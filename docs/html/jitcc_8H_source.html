<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>hobbes: include/hobbes/eval/jitcc.H Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">hobbes
   </div>
   <div id="projectbrief">a language, embedded compiler, and runtime for efficient dynamic expression evaluation, data storage and analysis</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_1365a971e5d9cbbb58eec91883a8b9c3.html">hobbes</a></li><li class="navelem"><a class="el" href="dir_03030b9d9a85cacc197b5ed7a5630a6d.html">eval</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">jitcc.H</div>  </div>
</div><!--header-->
<div class="contents">
<a href="jitcc_8H.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#ifndef HOBBES_EVAL_JITCC_HPP_INCLUDED</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#define HOBBES_EVAL_JITCC_HPP_INCLUDED</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="expr_8H.html">hobbes/lang/expr.H</a>&gt;</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="type_8H.html">hobbes/lang/type.H</a>&gt;</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="region_8H.html">hobbes/util/region.H</a>&gt;</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="llvm_8H.html">hobbes/util/llvm.H</a>&gt;</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="eval_2func_8H.html">hobbes/eval/func.H</a>&gt;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="ctype_8H.html">hobbes/eval/ctype.H</a>&gt;</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &lt;map&gt;</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacehobbes.html">hobbes</a> {</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// an operation, which can emit some specialized assembly code</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">class </span>jitcc;</div><div class="line"><a name="l00021"></a><span class="lineno"><a class="line" href="structhobbes_1_1op.html">   21</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structhobbes_1_1op.html">op</a> {</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;  <span class="keyword">virtual</span> <a class="code" href="structhobbes_1_1op.html#aa70381e29e4e966bb8f9dc9c29d4c33b">~op</a>();</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;  <span class="comment">// type : reports the functional type of this operator (may be polymorphic)</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;  <span class="keyword">virtual</span> <a class="code" href="namespacehobbes.html#a43663d8b7ebf265890ae1a4b1c56672d">PolyTypePtr</a> <a class="code" href="structhobbes_1_1op.html#a6e99e69f590eeb1285d13d2b9a58c5bd">type</a>(<a class="code" href="structhobbes_1_1typedb.html">typedb</a>&amp;) <span class="keyword">const</span> = 0;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;  <span class="comment">// apply : produces some assembly code out of a JIT compiler,</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  <span class="comment">//         assuming the given input/output types and with expressions provided for arguments</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  <span class="keyword">virtual</span> llvm::Value* <a class="code" href="structhobbes_1_1op.html#a19811554370097c288fc14d4093e1df9">apply</a>(<a class="code" href="classhobbes_1_1jitcc.html">jitcc</a>* ev, <span class="keyword">const</span> <a class="code" href="namespacehobbes.html#a87910f87372aa2af1001f53c5d301dd1">MonoTypes</a>&amp; tys, <span class="keyword">const</span> <a class="code" href="namespacehobbes.html#a1a6ba26dcc2124d5a4365c07e51fdf27">MonoTypePtr</a>&amp; rty, <span class="keyword">const</span> <a class="code" href="namespacehobbes.html#adbad2a93cbaad93a66577f318d692307">Exprs</a>&amp; es) = 0;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;};</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">// a JIT compiler for monotyped expressions</span></div><div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="classhobbes_1_1jitcc.html">   33</a></span>&#160;<span class="keyword">class </span><a class="code" href="classhobbes_1_1jitcc.html">jitcc</a> {</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <a class="code" href="classhobbes_1_1jitcc.html">jitcc</a>();</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  ~<a class="code" href="classhobbes_1_1jitcc.html">jitcc</a>();</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  llvm::IRBuilder&lt;&gt;* builder() <span class="keyword">const</span>;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  llvm::Module*      module();</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="comment">// get the address of a bound symbol</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <span class="keywordtype">void</span>* getSymbolAddress(<span class="keyword">const</span> std::string&amp;);</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <span class="comment">// print all module contents</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <span class="keywordtype">void</span> dump() <span class="keyword">const</span>;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="comment">// define a global from a primitive expression</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="keywordtype">void</span> defineGlobal(<span class="keyword">const</span> std::string&amp; vname, <span class="keyword">const</span> <a class="code" href="namespacehobbes.html#a0dea7eda5292679a41b168758dedebca">ExprPtr</a>&amp; unsweetExp);</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <span class="comment">// define a global on some existing memory</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="keywordtype">void</span> bindGlobal(<span class="keyword">const</span> std::string&amp; vn, <span class="keyword">const</span> <a class="code" href="namespacehobbes.html#a1a6ba26dcc2124d5a4365c07e51fdf27">MonoTypePtr</a>&amp; ty, <span class="keywordtype">void</span>* v);</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="comment">// is there a definition of the named symbol?</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="keywordtype">bool</span> isDefined(<span class="keyword">const</span> std::string&amp;) <span class="keyword">const</span>;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="comment">// compile a named or anonymous expression (into the current instruction stream)</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="comment">// these assume that expressions have explicit (mono-)type annotations</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  llvm::Value* <a class="code" href="namespacehobbes.html#a8e47e2726a09b01ab946b461fb139ab2">compile</a>(<span class="keyword">const</span> <a class="code" href="namespacehobbes.html#a0dea7eda5292679a41b168758dedebca">ExprPtr</a>&amp; exp);</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  llvm::Value* <a class="code" href="namespacehobbes.html#a8e47e2726a09b01ab946b461fb139ab2">compile</a>(<span class="keyword">const</span> std::string&amp; vname, <span class="keyword">const</span> <a class="code" href="namespacehobbes.html#a0dea7eda5292679a41b168758dedebca">ExprPtr</a>&amp; exp);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="comment">// backtrack on local-scope to compile an expression that uses only global data</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  llvm::Value* compileAtGlobalScope(<span class="keyword">const</span> <a class="code" href="namespacehobbes.html#a0dea7eda5292679a41b168758dedebca">ExprPtr</a>&amp; exp);</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="comment">// compile a function or a set of mutually-recursive functions</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  llvm::Function* compileFunction(<span class="keyword">const</span> std::string&amp; name, <span class="keyword">const</span> <a class="code" href="namespacehobbes_1_1str.html#a8b4f3b5c48e32aa110d823703be36e06">str::seq</a>&amp; argns, <span class="keyword">const</span> <a class="code" href="namespacehobbes.html#a87910f87372aa2af1001f53c5d301dd1">MonoTypes</a>&amp; argtys, <span class="keyword">const</span> <a class="code" href="namespacehobbes.html#a0dea7eda5292679a41b168758dedebca">ExprPtr</a>&amp; exp);</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="keywordtype">void</span>            compileFunctions(<span class="keyword">const</span> <a class="code" href="classhobbes_1_1LetRec.html#ab72b1c919f40f1ed88dd669665429015">LetRec::Bindings</a>&amp;, std::vector&lt;llvm::Function*&gt;* <a class="code" href="namespacehobbes.html#aee08ce488a4342b3cc2e2cb513297ec8">result</a>);</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="keywordtype">void</span>            compileFunctions(<span class="keyword">const</span> <a class="code" href="classhobbes_1_1LetRec.html#ab72b1c919f40f1ed88dd669665429015">LetRec::Bindings</a>&amp;);</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="comment">// compile an allocation statement (to dynamically allocate some data)</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  llvm::Value* compileAllocStmt(<span class="keywordtype">size_t</span> sz, llvm::Type* mty, <span class="keywordtype">bool</span> zeroMem = <span class="keyword">false</span>);</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  llvm::Value* compileAllocStmt(llvm::Value* sz, llvm::Type* mty, <span class="keywordtype">bool</span> zeroMem = <span class="keyword">false</span>);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="comment">// begin a function with the given name, argument type list, return type</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  llvm::Function* allocFunction(<span class="keyword">const</span> std::string&amp; fname, <span class="keyword">const</span> <a class="code" href="namespacehobbes.html#a87910f87372aa2af1001f53c5d301dd1">MonoTypes</a>&amp; argl, <span class="keyword">const</span> <a class="code" href="namespacehobbes.html#a1a6ba26dcc2124d5a4365c07e51fdf27">MonoTypePtr</a>&amp; rty);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="comment">// bind within local scopes, and begin/end new nested local scopes</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="keywordtype">void</span> pushScope();</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="keywordtype">void</span> bindScope(<span class="keyword">const</span> std::string&amp; vn, llvm::Value* v);</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="keywordtype">void</span> popScope();</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="comment">// produce some machine code from a function specification (input names, input types, expression body)</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="keywordtype">void</span>* reifyMachineCodeForFn(<span class="keyword">const</span> <a class="code" href="namespacehobbes.html#a1a6ba26dcc2124d5a4365c07e51fdf27">MonoTypePtr</a>&amp; reqTy, <span class="keyword">const</span> <a class="code" href="namespacehobbes_1_1str.html#a8b4f3b5c48e32aa110d823703be36e06">str::seq</a>&amp; names, <span class="keyword">const</span> <a class="code" href="namespacehobbes.html#a87910f87372aa2af1001f53c5d301dd1">MonoTypes</a>&amp; tys, <span class="keyword">const</span> <a class="code" href="namespacehobbes.html#a0dea7eda5292679a41b168758dedebca">ExprPtr</a>&amp; exp);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="keywordtype">void</span> releaseMachineCode(<span class="keywordtype">void</span>*);</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="comment">// bind a low-level function definition</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="keywordtype">void</span> bindInstruction(<span class="keyword">const</span> std::string&amp;, <a class="code" href="structhobbes_1_1op.html">op</a>*);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="comment">// find a low-level function definition by name</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <a class="code" href="structhobbes_1_1op.html">op</a>* lookupOp(<span class="keyword">const</span> std::string&amp;) <span class="keyword">const</span>;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="comment">// lookup a variable, either in local scopes, globals, or constants</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  llvm::Value* lookupVar(<span class="keyword">const</span> std::string&amp;, <span class="keyword">const</span> <a class="code" href="namespacehobbes.html#a1a6ba26dcc2124d5a4365c07e51fdf27">MonoTypePtr</a>&amp;);</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="comment">// find a function by name (returns nullptr if not found)</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  llvm::Function* lookupFunction(<span class="keyword">const</span> std::string&amp;);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="comment">// maybe get a pointer to global data</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="comment">//   this will give a nullptr either if the variable is in local scope, or if there is no global variable with that name</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  llvm::GlobalVariable* lookupVarRef(<span class="keyword">const</span> std::string&amp;);</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="comment">// produce a constant reference to an interned string</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  llvm::Value* internConstString(<span class="keyword">const</span> std::string&amp;);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="comment">// get the machine code produced for a given expression</span></div><div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="classhobbes_1_1jitcc.html#a92d57a421233464900a096a463e3758e">  105</a></span>&#160;  <span class="keyword">typedef</span> std::vector&lt;uint8_t&gt; <a class="code" href="classhobbes_1_1jitcc.html#a92d57a421233464900a096a463e3758e">bytes</a>;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  bytes machineCodeForExpr(<span class="keyword">const</span> <a class="code" href="namespacehobbes.html#a0dea7eda5292679a41b168758dedebca">ExprPtr</a>&amp;);</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="comment">// inline all global definitions within an expression</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <a class="code" href="namespacehobbes.html#a0dea7eda5292679a41b168758dedebca">ExprPtr</a> inlineGlobals(<span class="keyword">const</span> <a class="code" href="namespacehobbes.html#a0dea7eda5292679a41b168758dedebca">ExprPtr</a>&amp;);</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="comment">// produce some machine code for a compiled function</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="keywordtype">void</span>* getMachineCode(llvm::Function*, llvm::JITEventListener* listener = 0);</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="comment">// the current non-finalized module</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="comment">// (new definitions will be accumulated here)</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="comment">// (may be null, to lazily allocate modules)</span></div><div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="classhobbes_1_1jitcc.html#a0016582a192f46c71131cd2fea2f384a">  117</a></span>&#160;  llvm::Module* <a class="code" href="classhobbes_1_1jitcc.html#a0016582a192f46c71131cd2fea2f384a">currentModule</a>;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="comment">// the set of allocated modules</span></div><div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="classhobbes_1_1jitcc.html#a7739259652c7a5b98c208ca5e9324054">  120</a></span>&#160;  <span class="keyword">typedef</span> std::vector&lt;llvm::Module*&gt; <a class="code" href="classhobbes_1_1jitcc.html#a7739259652c7a5b98c208ca5e9324054">Modules</a>;</div><div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="classhobbes_1_1jitcc.html#aea1f9379fa177db201cece53af3d3b2f">  121</a></span>&#160;  Modules <a class="code" href="classhobbes_1_1jitcc.html#aea1f9379fa177db201cece53af3d3b2f">modules</a>;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="preprocessor">#if LLVM_VERSION_MINOR == 6 || LLVM_VERSION_MINOR == 7 || LLVM_VERSION_MINOR == 8</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  llvm::legacy::PassManager* mpm;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="comment">// the set of allocated execution engines (each will own a finalized module from the set of modules)</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="keyword">typedef</span> std::vector&lt;llvm::ExecutionEngine*&gt; ExecutionEngines;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  ExecutionEngines eengines;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="preprocessor">#elif LLVM_VERSION_MINOR == 3</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  llvm::PassManager*         mpm;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  llvm::ExecutionEngine*     eengine;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  llvm::FunctionPassManager* fpm;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="preprocessor">#elif LLVM_VERSION_MINOR == 5</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  llvm::legacy::PassManager*         mpm;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  llvm::ExecutionEngine*             eengine;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  llvm::legacy::FunctionPassManager* fpm;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="preprocessor">#error &quot;This version of LLVM is not supported&quot;</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="comment">// support incremental construction of LLVM assembly sequences</span></div><div class="line"><a name="l00142"></a><span class="lineno"><a class="line" href="classhobbes_1_1jitcc.html#ad024650a2d1c5e16cf778e0a39ec4132">  142</a></span>&#160;  llvm::IRBuilder&lt;&gt;* <a class="code" href="classhobbes_1_1jitcc.html#ad024650a2d1c5e16cf778e0a39ec4132">irbuilder</a>;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="comment">// the bound root function environment</span></div><div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="classhobbes_1_1jitcc.html#a6d7edea4b87d929ec342c5c6f73726c2">  145</a></span>&#160;  <span class="keyword">typedef</span> std::map&lt;std::string, op*&gt; <a class="code" href="classhobbes_1_1jitcc.html#a6d7edea4b87d929ec342c5c6f73726c2">FuncEnv</a>;</div><div class="line"><a name="l00146"></a><span class="lineno"><a class="line" href="classhobbes_1_1jitcc.html#a6cc9f82515cd5ec04e7d1ebe797c7f40">  146</a></span>&#160;  FuncEnv <a class="code" href="classhobbes_1_1jitcc.html#a6cc9f82515cd5ec04e7d1ebe797c7f40">fenv</a>;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="comment">// keep track of variables and local scopes during compilation</span></div><div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="classhobbes_1_1jitcc.html#a1de57b3c3c712efa7c77db036b1d2e8d">  149</a></span>&#160;  <span class="keyword">typedef</span> std::map&lt;std::string, llvm::Value*&gt; <a class="code" href="classhobbes_1_1jitcc.html#a1de57b3c3c712efa7c77db036b1d2e8d">VarBindings</a>;</div><div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="classhobbes_1_1jitcc.html#ab68f5c5d160906dbff6e9d2fdf1c9f61">  150</a></span>&#160;  <span class="keyword">typedef</span> std::vector&lt;VarBindings&gt;            <a class="code" href="classhobbes_1_1jitcc.html#ab68f5c5d160906dbff6e9d2fdf1c9f61">VarBindingStack</a>;</div><div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="classhobbes_1_1jitcc.html#acf67d281926033193ffa25f32f5bc9d7">  151</a></span>&#160;  VarBindingStack <a class="code" href="classhobbes_1_1jitcc.html#acf67d281926033193ffa25f32f5bc9d7">vtenv</a>;</div><div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="classhobbes_1_1jitcc.html#a4df435ac92921ed408adb180487e5a73">  152</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classhobbes_1_1jitcc.html#a4df435ac92921ed408adb180487e5a73">ignoreLocalScope</a>;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="comment">// compile sets of mutually-recursive functions (as a special case, single-function compilation)</span></div><div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="structhobbes_1_1jitcc_1_1UCF.html">  155</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1jitcc_1_1UCF.html">UCF</a> {</div><div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="structhobbes_1_1jitcc_1_1UCF.html#aebf2b0f0a25fd831d8dcabb03df448f0">  156</a></span>&#160;    <span class="keyword">const</span> std::string&amp; <a class="code" href="structhobbes_1_1jitcc_1_1UCF.html#aebf2b0f0a25fd831d8dcabb03df448f0">name</a>;</div><div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="structhobbes_1_1jitcc_1_1UCF.html#ace461b9840e59bf02506986211928aac">  157</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="namespacehobbes_1_1str.html#a8b4f3b5c48e32aa110d823703be36e06">str::seq</a>&amp;    <a class="code" href="structhobbes_1_1jitcc_1_1UCF.html#ace461b9840e59bf02506986211928aac">argns</a>;</div><div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="structhobbes_1_1jitcc_1_1UCF.html#a4eb6c7a30e686ba9b7954fcfa03ca2a7">  158</a></span>&#160;    <a class="code" href="namespacehobbes.html#a87910f87372aa2af1001f53c5d301dd1">MonoTypes</a>          <a class="code" href="structhobbes_1_1jitcc_1_1UCF.html#a4eb6c7a30e686ba9b7954fcfa03ca2a7">argtys</a>;</div><div class="line"><a name="l00159"></a><span class="lineno"><a class="line" href="structhobbes_1_1jitcc_1_1UCF.html#aa20546b6af634f128540f0662ae23140">  159</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="namespacehobbes.html#a0dea7eda5292679a41b168758dedebca">ExprPtr</a>&amp;     <a class="code" href="structhobbes_1_1jitcc_1_1UCF.html#aa20546b6af634f128540f0662ae23140">exp</a>;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="structhobbes_1_1jitcc_1_1UCF.html#ae8583abcb8cfaa4f5971072773589be1">  161</a></span>&#160;    llvm::Function*    <a class="code" href="structhobbes_1_1jitcc_1_1UCF.html#ae8583abcb8cfaa4f5971072773589be1">result</a>;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno"><a class="line" href="structhobbes_1_1jitcc_1_1UCF.html#a391252f574aaa779da1a4241945c31a9">  163</a></span>&#160;    <span class="keyword">inline</span> <a class="code" href="structhobbes_1_1jitcc_1_1UCF.html#a391252f574aaa779da1a4241945c31a9">UCF</a>(<span class="keyword">const</span> std::string&amp; name, <span class="keyword">const</span> <a class="code" href="namespacehobbes_1_1str.html#a8b4f3b5c48e32aa110d823703be36e06">str::seq</a>&amp; argns, <span class="keyword">const</span> <a class="code" href="namespacehobbes.html#a87910f87372aa2af1001f53c5d301dd1">MonoTypes</a>&amp; argtys, <span class="keyword">const</span> <a class="code" href="namespacehobbes.html#a0dea7eda5292679a41b168758dedebca">ExprPtr</a>&amp; exp)</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      : name(name), argns(argns), argtys(argtys), exp(exp) { }</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  };</div><div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="classhobbes_1_1jitcc.html#a0034a4a148ca768ee99a05ce71647c8a">  166</a></span>&#160;  <span class="keyword">typedef</span> std::vector&lt;UCF&gt; <a class="code" href="classhobbes_1_1jitcc.html#a0034a4a148ca768ee99a05ce71647c8a">UCFS</a>;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="keywordtype">void</span> unsafeCompileFunctions(UCFS*);</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="comment">// keep track of global variables</span></div><div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="structhobbes_1_1jitcc_1_1Global.html">  170</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1jitcc_1_1Global.html">Global</a> {</div><div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="structhobbes_1_1jitcc_1_1Global.html#a8e4838a8e4a6441304445d96123f1fbe">  171</a></span>&#160;    <a class="code" href="namespacehobbes.html#a1a6ba26dcc2124d5a4365c07e51fdf27">MonoTypePtr</a>           <a class="code" href="structhobbes_1_1jitcc_1_1Global.html#a8e4838a8e4a6441304445d96123f1fbe">type</a>;</div><div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="structhobbes_1_1jitcc_1_1Global.html#a0e4911528d5d591bc1734df97e6415d9">  172</a></span>&#160;    <span class="keywordtype">void</span>*                 <a class="code" href="structhobbes_1_1jitcc_1_1Global.html#a0e4911528d5d591bc1734df97e6415d9">value</a>;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keyword">union </span>{</div><div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="structhobbes_1_1jitcc_1_1Global.html#a464a67e0bcf7869aebd931eedd6a387c">  174</a></span>&#160;      llvm::GlobalVariable* <a class="code" href="structhobbes_1_1jitcc_1_1Global.html#a464a67e0bcf7869aebd931eedd6a387c">var</a>;</div><div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="structhobbes_1_1jitcc_1_1Global.html#adadabc5ce725a38c4b69a1ca660a290d">  175</a></span>&#160;      llvm::Function*       <a class="code" href="structhobbes_1_1jitcc_1_1Global.html#adadabc5ce725a38c4b69a1ca660a290d">fn</a>;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    } ref;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  };</div><div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="classhobbes_1_1jitcc.html#a80ba9681515bde5f04be991f3338a8cf">  178</a></span>&#160;  <span class="keyword">typedef</span> std::map&lt;std::string, Global&gt; <a class="code" href="classhobbes_1_1jitcc.html#a80ba9681515bde5f04be991f3338a8cf">Globals</a>;</div><div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="classhobbes_1_1jitcc.html#a4d0ccade0bfb8e9031dd99b2849295c1">  179</a></span>&#160;  Globals <a class="code" href="classhobbes_1_1jitcc.html#a4d0ccade0bfb8e9031dd99b2849295c1">globals</a>;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="comment">// keep track of global data (in case we need to dynamically allocate global variables of any type)</span></div><div class="line"><a name="l00182"></a><span class="lineno"><a class="line" href="classhobbes_1_1jitcc.html#ada6ad5d042afc6ca0c5735587eaded95">  182</a></span>&#160;  <a class="code" href="classhobbes_1_1region.html">region</a> <a class="code" href="classhobbes_1_1jitcc.html#ada6ad5d042afc6ca0c5735587eaded95">globalData</a>;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="keywordtype">size_t</span> pushGlobalRegion();</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="keywordtype">void</span> popGlobalRegion(<span class="keywordtype">size_t</span> x);</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="comment">// keep track of global constants</span></div><div class="line"><a name="l00187"></a><span class="lineno"><a class="line" href="structhobbes_1_1jitcc_1_1Constant.html">  187</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1jitcc_1_1Constant.html">Constant</a> {</div><div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="structhobbes_1_1jitcc_1_1Constant.html#a84311ab5777154707c3a991b497ea409">  188</a></span>&#160;    llvm::Constant*       <a class="code" href="structhobbes_1_1jitcc_1_1Constant.html#a84311ab5777154707c3a991b497ea409">value</a>;</div><div class="line"><a name="l00189"></a><span class="lineno"><a class="line" href="structhobbes_1_1jitcc_1_1Constant.html#a5f2c4cb02e91d168b14e90296369479d">  189</a></span>&#160;    llvm::Type*           <a class="code" href="structhobbes_1_1jitcc_1_1Constant.html#a5f2c4cb02e91d168b14e90296369479d">type</a>;</div><div class="line"><a name="l00190"></a><span class="lineno"><a class="line" href="structhobbes_1_1jitcc_1_1Constant.html#adbfa934549f818f833baa32f13799450">  190</a></span>&#160;    <a class="code" href="namespacehobbes.html#a1a6ba26dcc2124d5a4365c07e51fdf27">MonoTypePtr</a>           <a class="code" href="structhobbes_1_1jitcc_1_1Constant.html#adbfa934549f818f833baa32f13799450">mtype</a>;</div><div class="line"><a name="l00191"></a><span class="lineno"><a class="line" href="structhobbes_1_1jitcc_1_1Constant.html#a7cc1ea40dd5bc1138984e3a05b4ac4e5">  191</a></span>&#160;    llvm::GlobalVariable* <a class="code" href="structhobbes_1_1jitcc_1_1Constant.html#a7cc1ea40dd5bc1138984e3a05b4ac4e5">ref</a>;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  };</div><div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="classhobbes_1_1jitcc.html#aae138bd3f8601ec21e53f36ea7d83782">  193</a></span>&#160;  <span class="keyword">typedef</span> std::map&lt;std::string, Constant&gt; <a class="code" href="classhobbes_1_1jitcc.html#aae138bd3f8601ec21e53f36ea7d83782">Constants</a>;</div><div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="classhobbes_1_1jitcc.html#a515f5e4cd71433b3e08c80baf8ea1ef9">  194</a></span>&#160;  Constants <a class="code" href="classhobbes_1_1jitcc.html#a515f5e4cd71433b3e08c80baf8ea1ef9">constants</a>;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  llvm::Value* loadConstant(<span class="keyword">const</span> std::string&amp;);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <span class="comment">// keep some interned strings, helpful for global constants and debug info</span></div><div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="classhobbes_1_1jitcc.html#a00dbfee70923180778706c18886cf957">  198</a></span>&#160;  <span class="keyword">typedef</span> std::unordered_map&lt;std::string, std::string&gt; <a class="code" href="classhobbes_1_1jitcc.html#a00dbfee70923180778706c18886cf957">InternConstVars</a>;</div><div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="classhobbes_1_1jitcc.html#a7e81b25f771374b8dc851fb91345e02e">  199</a></span>&#160;  InternConstVars <a class="code" href="classhobbes_1_1jitcc.html#a7e81b25f771374b8dc851fb91345e02e">internConstVars</a>;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <span class="comment">// try to load a symbol as a global (may return nullptr if this can&#39;t be done)</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  llvm::GlobalVariable* maybeRefGlobal(<span class="keyword">const</span> std::string&amp;);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  llvm::GlobalVariable* refGlobal(<span class="keyword">const</span> std::string&amp;, llvm::GlobalVariable*);</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="comment">// pass through a value if it&#39;s not a global or if it&#39;s a global in the current module</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="comment">// else wrap it in an extern decl</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  llvm::Value* maybeRefGlobalV(llvm::Value*);</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="comment">// keep track of monotyped definitions as expressions</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="comment">// (in case we want to inline them later)</span></div><div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="classhobbes_1_1jitcc.html#a10aaab9a39bf2243a66d62a5872a7c95">  211</a></span>&#160;  <span class="keyword">typedef</span> std::map&lt;std::string, ExprPtr&gt; <a class="code" href="classhobbes_1_1jitcc.html#a10aaab9a39bf2243a66d62a5872a7c95">GlobalExprs</a>;</div><div class="line"><a name="l00212"></a><span class="lineno"><a class="line" href="classhobbes_1_1jitcc.html#afd9ce3cad059e7317bcc1b401c86c2f2">  212</a></span>&#160;  GlobalExprs <a class="code" href="classhobbes_1_1jitcc.html#afd9ce3cad059e7317bcc1b401c86c2f2">globalExprs</a>;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;};</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">// shorthand for compilation over a sequence of expressions</span></div><div class="line"><a name="l00216"></a><span class="lineno"><a class="line" href="namespacehobbes.html#a95ea2f2d705abd8b624a4d5bb7e4e419">  216</a></span>&#160;<span class="keyword">typedef</span> std::vector&lt;llvm::Value*&gt; <a class="code" href="namespacehobbes.html#a95ea2f2d705abd8b624a4d5bb7e4e419">Values</a>;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;Values <a class="code" href="namespacehobbes.html#a8e47e2726a09b01ab946b461fb139ab2">compile</a>(<a class="code" href="classhobbes_1_1jitcc.html">jitcc</a>*, <span class="keyword">const</span> <a class="code" href="namespacehobbes.html#adbad2a93cbaad93a66577f318d692307">Exprs</a>&amp;);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;Values <a class="code" href="namespacehobbes.html#accf1a65beaa86c6ccb3c8cd82132e2c4">compileArgs</a>(<a class="code" href="classhobbes_1_1jitcc.html">jitcc</a>*, <span class="keyword">const</span> <a class="code" href="namespacehobbes.html#adbad2a93cbaad93a66577f318d692307">Exprs</a>&amp;);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;}</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="ttc" id="namespacehobbes_html_a95ea2f2d705abd8b624a4d5bb7e4e419"><div class="ttname"><a href="namespacehobbes.html#a95ea2f2d705abd8b624a4d5bb7e4e419">hobbes::Values</a></div><div class="ttdeci">std::vector&lt; llvm::Value * &gt; Values</div><div class="ttdef"><b>Definition:</b> jitcc.H:216</div></div>
<div class="ttc" id="namespacehobbes_html_accf1a65beaa86c6ccb3c8cd82132e2c4"><div class="ttname"><a href="namespacehobbes.html#accf1a65beaa86c6ccb3c8cd82132e2c4">hobbes::compileArgs</a></div><div class="ttdeci">Values compileArgs(jitcc *, const Exprs &amp;)</div><div class="ttdef"><b>Definition:</b> jitcc.C:776</div></div>
<div class="ttc" id="namespacehobbes_html_a43663d8b7ebf265890ae1a4b1c56672d"><div class="ttname"><a href="namespacehobbes.html#a43663d8b7ebf265890ae1a4b1c56672d">hobbes::PolyTypePtr</a></div><div class="ttdeci">std::shared_ptr&lt; PolyType &gt; PolyTypePtr</div><div class="ttdef"><b>Definition:</b> type.H:23</div></div>
<div class="ttc" id="structhobbes_1_1jitcc_1_1Global_html_a0e4911528d5d591bc1734df97e6415d9"><div class="ttname"><a href="structhobbes_1_1jitcc_1_1Global.html#a0e4911528d5d591bc1734df97e6415d9">hobbes::jitcc::Global::value</a></div><div class="ttdeci">void * value</div><div class="ttdef"><b>Definition:</b> jitcc.H:172</div></div>
<div class="ttc" id="classhobbes_1_1jitcc_html"><div class="ttname"><a href="classhobbes_1_1jitcc.html">hobbes::jitcc</a></div><div class="ttdef"><b>Definition:</b> jitcc.H:33</div></div>
<div class="ttc" id="type_8H_html"><div class="ttname"><a href="type_8H.html">type.H</a></div></div>
<div class="ttc" id="classhobbes_1_1jitcc_html_ad024650a2d1c5e16cf778e0a39ec4132"><div class="ttname"><a href="classhobbes_1_1jitcc.html#ad024650a2d1c5e16cf778e0a39ec4132">hobbes::jitcc::irbuilder</a></div><div class="ttdeci">llvm::IRBuilder * irbuilder</div><div class="ttdef"><b>Definition:</b> jitcc.H:142</div></div>
<div class="ttc" id="structhobbes_1_1typedb_html"><div class="ttname"><a href="structhobbes_1_1typedb.html">hobbes::typedb</a></div><div class="ttdef"><b>Definition:</b> tylift.H:22</div></div>
<div class="ttc" id="llvm_8H_html"><div class="ttname"><a href="llvm_8H.html">llvm.H</a></div></div>
<div class="ttc" id="structhobbes_1_1jitcc_1_1UCF_html_a391252f574aaa779da1a4241945c31a9"><div class="ttname"><a href="structhobbes_1_1jitcc_1_1UCF.html#a391252f574aaa779da1a4241945c31a9">hobbes::jitcc::UCF::UCF</a></div><div class="ttdeci">UCF(const std::string &amp;name, const str::seq &amp;argns, const MonoTypes &amp;argtys, const ExprPtr &amp;exp)</div><div class="ttdef"><b>Definition:</b> jitcc.H:163</div></div>
<div class="ttc" id="structhobbes_1_1jitcc_1_1Constant_html"><div class="ttname"><a href="structhobbes_1_1jitcc_1_1Constant.html">hobbes::jitcc::Constant</a></div><div class="ttdef"><b>Definition:</b> jitcc.H:187</div></div>
<div class="ttc" id="classhobbes_1_1jitcc_html_a4d0ccade0bfb8e9031dd99b2849295c1"><div class="ttname"><a href="classhobbes_1_1jitcc.html#a4d0ccade0bfb8e9031dd99b2849295c1">hobbes::jitcc::globals</a></div><div class="ttdeci">Globals globals</div><div class="ttdef"><b>Definition:</b> jitcc.H:179</div></div>
<div class="ttc" id="classhobbes_1_1jitcc_html_a6d7edea4b87d929ec342c5c6f73726c2"><div class="ttname"><a href="classhobbes_1_1jitcc.html#a6d7edea4b87d929ec342c5c6f73726c2">hobbes::jitcc::FuncEnv</a></div><div class="ttdeci">std::map&lt; std::string, op * &gt; FuncEnv</div><div class="ttdef"><b>Definition:</b> jitcc.H:145</div></div>
<div class="ttc" id="classhobbes_1_1jitcc_html_afd9ce3cad059e7317bcc1b401c86c2f2"><div class="ttname"><a href="classhobbes_1_1jitcc.html#afd9ce3cad059e7317bcc1b401c86c2f2">hobbes::jitcc::globalExprs</a></div><div class="ttdeci">GlobalExprs globalExprs</div><div class="ttdef"><b>Definition:</b> jitcc.H:212</div></div>
<div class="ttc" id="structhobbes_1_1jitcc_1_1UCF_html_ae8583abcb8cfaa4f5971072773589be1"><div class="ttname"><a href="structhobbes_1_1jitcc_1_1UCF.html#ae8583abcb8cfaa4f5971072773589be1">hobbes::jitcc::UCF::result</a></div><div class="ttdeci">llvm::Function * result</div><div class="ttdef"><b>Definition:</b> jitcc.H:161</div></div>
<div class="ttc" id="structhobbes_1_1jitcc_1_1Global_html_a464a67e0bcf7869aebd931eedd6a387c"><div class="ttname"><a href="structhobbes_1_1jitcc_1_1Global.html#a464a67e0bcf7869aebd931eedd6a387c">hobbes::jitcc::Global::var</a></div><div class="ttdeci">llvm::GlobalVariable * var</div><div class="ttdef"><b>Definition:</b> jitcc.H:174</div></div>
<div class="ttc" id="namespacehobbes_html"><div class="ttname"><a href="namespacehobbes.html">hobbes</a></div><div class="ttdef"><b>Definition:</b> boot.H:7</div></div>
<div class="ttc" id="structhobbes_1_1jitcc_1_1Global_html"><div class="ttname"><a href="structhobbes_1_1jitcc_1_1Global.html">hobbes::jitcc::Global</a></div><div class="ttdef"><b>Definition:</b> jitcc.H:170</div></div>
<div class="ttc" id="structhobbes_1_1jitcc_1_1UCF_html_aebf2b0f0a25fd831d8dcabb03df448f0"><div class="ttname"><a href="structhobbes_1_1jitcc_1_1UCF.html#aebf2b0f0a25fd831d8dcabb03df448f0">hobbes::jitcc::UCF::name</a></div><div class="ttdeci">const std::string &amp; name</div><div class="ttdef"><b>Definition:</b> jitcc.H:156</div></div>
<div class="ttc" id="structhobbes_1_1jitcc_1_1Constant_html_a84311ab5777154707c3a991b497ea409"><div class="ttname"><a href="structhobbes_1_1jitcc_1_1Constant.html#a84311ab5777154707c3a991b497ea409">hobbes::jitcc::Constant::value</a></div><div class="ttdeci">llvm::Constant * value</div><div class="ttdef"><b>Definition:</b> jitcc.H:188</div></div>
<div class="ttc" id="namespacehobbes_html_adbad2a93cbaad93a66577f318d692307"><div class="ttname"><a href="namespacehobbes.html#adbad2a93cbaad93a66577f318d692307">hobbes::Exprs</a></div><div class="ttdeci">std::vector&lt; ExprPtr &gt; Exprs</div><div class="ttdef"><b>Definition:</b> expr.H:59</div></div>
<div class="ttc" id="classhobbes_1_1jitcc_html_a6cc9f82515cd5ec04e7d1ebe797c7f40"><div class="ttname"><a href="classhobbes_1_1jitcc.html#a6cc9f82515cd5ec04e7d1ebe797c7f40">hobbes::jitcc::fenv</a></div><div class="ttdeci">FuncEnv fenv</div><div class="ttdef"><b>Definition:</b> jitcc.H:146</div></div>
<div class="ttc" id="ctype_8H_html"><div class="ttname"><a href="ctype_8H.html">ctype.H</a></div></div>
<div class="ttc" id="structhobbes_1_1jitcc_1_1Global_html_a8e4838a8e4a6441304445d96123f1fbe"><div class="ttname"><a href="structhobbes_1_1jitcc_1_1Global.html#a8e4838a8e4a6441304445d96123f1fbe">hobbes::jitcc::Global::type</a></div><div class="ttdeci">MonoTypePtr type</div><div class="ttdef"><b>Definition:</b> jitcc.H:171</div></div>
<div class="ttc" id="namespacehobbes_html_a1a6ba26dcc2124d5a4365c07e51fdf27"><div class="ttname"><a href="namespacehobbes.html#a1a6ba26dcc2124d5a4365c07e51fdf27">hobbes::MonoTypePtr</a></div><div class="ttdeci">MonoType::ptr MonoTypePtr</div><div class="ttdef"><b>Definition:</b> type.H:71</div></div>
<div class="ttc" id="classhobbes_1_1jitcc_html_a80ba9681515bde5f04be991f3338a8cf"><div class="ttname"><a href="classhobbes_1_1jitcc.html#a80ba9681515bde5f04be991f3338a8cf">hobbes::jitcc::Globals</a></div><div class="ttdeci">std::map&lt; std::string, Global &gt; Globals</div><div class="ttdef"><b>Definition:</b> jitcc.H:178</div></div>
<div class="ttc" id="structhobbes_1_1jitcc_1_1Constant_html_a7cc1ea40dd5bc1138984e3a05b4ac4e5"><div class="ttname"><a href="structhobbes_1_1jitcc_1_1Constant.html#a7cc1ea40dd5bc1138984e3a05b4ac4e5">hobbes::jitcc::Constant::ref</a></div><div class="ttdeci">llvm::GlobalVariable * ref</div><div class="ttdef"><b>Definition:</b> jitcc.H:191</div></div>
<div class="ttc" id="classhobbes_1_1jitcc_html_a4df435ac92921ed408adb180487e5a73"><div class="ttname"><a href="classhobbes_1_1jitcc.html#a4df435ac92921ed408adb180487e5a73">hobbes::jitcc::ignoreLocalScope</a></div><div class="ttdeci">bool ignoreLocalScope</div><div class="ttdef"><b>Definition:</b> jitcc.H:152</div></div>
<div class="ttc" id="classhobbes_1_1jitcc_html_a92d57a421233464900a096a463e3758e"><div class="ttname"><a href="classhobbes_1_1jitcc.html#a92d57a421233464900a096a463e3758e">hobbes::jitcc::bytes</a></div><div class="ttdeci">std::vector&lt; uint8_t &gt; bytes</div><div class="ttdef"><b>Definition:</b> jitcc.H:105</div></div>
<div class="ttc" id="structhobbes_1_1jitcc_1_1UCF_html_a4eb6c7a30e686ba9b7954fcfa03ca2a7"><div class="ttname"><a href="structhobbes_1_1jitcc_1_1UCF.html#a4eb6c7a30e686ba9b7954fcfa03ca2a7">hobbes::jitcc::UCF::argtys</a></div><div class="ttdeci">MonoTypes argtys</div><div class="ttdef"><b>Definition:</b> jitcc.H:158</div></div>
<div class="ttc" id="structhobbes_1_1jitcc_1_1Global_html_adadabc5ce725a38c4b69a1ca660a290d"><div class="ttname"><a href="structhobbes_1_1jitcc_1_1Global.html#adadabc5ce725a38c4b69a1ca660a290d">hobbes::jitcc::Global::fn</a></div><div class="ttdeci">llvm::Function * fn</div><div class="ttdef"><b>Definition:</b> jitcc.H:175</div></div>
<div class="ttc" id="namespacehobbes_html_a0dea7eda5292679a41b168758dedebca"><div class="ttname"><a href="namespacehobbes.html#a0dea7eda5292679a41b168758dedebca">hobbes::ExprPtr</a></div><div class="ttdeci">std::shared_ptr&lt; Expr &gt; ExprPtr</div><div class="ttdef"><b>Definition:</b> expr.H:58</div></div>
<div class="ttc" id="structhobbes_1_1jitcc_1_1UCF_html"><div class="ttname"><a href="structhobbes_1_1jitcc_1_1UCF.html">hobbes::jitcc::UCF</a></div><div class="ttdef"><b>Definition:</b> jitcc.H:155</div></div>
<div class="ttc" id="structhobbes_1_1jitcc_1_1UCF_html_aa20546b6af634f128540f0662ae23140"><div class="ttname"><a href="structhobbes_1_1jitcc_1_1UCF.html#aa20546b6af634f128540f0662ae23140">hobbes::jitcc::UCF::exp</a></div><div class="ttdeci">const ExprPtr &amp; exp</div><div class="ttdef"><b>Definition:</b> jitcc.H:159</div></div>
<div class="ttc" id="structhobbes_1_1op_html_a6e99e69f590eeb1285d13d2b9a58c5bd"><div class="ttname"><a href="structhobbes_1_1op.html#a6e99e69f590eeb1285d13d2b9a58c5bd">hobbes::op::type</a></div><div class="ttdeci">virtual PolyTypePtr type(typedb &amp;) const =0</div></div>
<div class="ttc" id="structhobbes_1_1jitcc_1_1Constant_html_adbfa934549f818f833baa32f13799450"><div class="ttname"><a href="structhobbes_1_1jitcc_1_1Constant.html#adbfa934549f818f833baa32f13799450">hobbes::jitcc::Constant::mtype</a></div><div class="ttdeci">MonoTypePtr mtype</div><div class="ttdef"><b>Definition:</b> jitcc.H:190</div></div>
<div class="ttc" id="classhobbes_1_1jitcc_html_a7739259652c7a5b98c208ca5e9324054"><div class="ttname"><a href="classhobbes_1_1jitcc.html#a7739259652c7a5b98c208ca5e9324054">hobbes::jitcc::Modules</a></div><div class="ttdeci">std::vector&lt; llvm::Module * &gt; Modules</div><div class="ttdef"><b>Definition:</b> jitcc.H:120</div></div>
<div class="ttc" id="namespacehobbes_1_1str_html_a8b4f3b5c48e32aa110d823703be36e06"><div class="ttname"><a href="namespacehobbes_1_1str.html#a8b4f3b5c48e32aa110d823703be36e06">hobbes::str::seq</a></div><div class="ttdeci">std::vector&lt; std::string &gt; seq</div><div class="ttdef"><b>Definition:</b> str.H:19</div></div>
<div class="ttc" id="eval_2func_8H_html"><div class="ttname"><a href="eval_2func_8H.html">func.H</a></div></div>
<div class="ttc" id="classhobbes_1_1jitcc_html_a0016582a192f46c71131cd2fea2f384a"><div class="ttname"><a href="classhobbes_1_1jitcc.html#a0016582a192f46c71131cd2fea2f384a">hobbes::jitcc::currentModule</a></div><div class="ttdeci">llvm::Module * currentModule</div><div class="ttdef"><b>Definition:</b> jitcc.H:117</div></div>
<div class="ttc" id="classhobbes_1_1jitcc_html_a1de57b3c3c712efa7c77db036b1d2e8d"><div class="ttname"><a href="classhobbes_1_1jitcc.html#a1de57b3c3c712efa7c77db036b1d2e8d">hobbes::jitcc::VarBindings</a></div><div class="ttdeci">std::map&lt; std::string, llvm::Value * &gt; VarBindings</div><div class="ttdef"><b>Definition:</b> jitcc.H:149</div></div>
<div class="ttc" id="classhobbes_1_1jitcc_html_a0034a4a148ca768ee99a05ce71647c8a"><div class="ttname"><a href="classhobbes_1_1jitcc.html#a0034a4a148ca768ee99a05ce71647c8a">hobbes::jitcc::UCFS</a></div><div class="ttdeci">std::vector&lt; UCF &gt; UCFS</div><div class="ttdef"><b>Definition:</b> jitcc.H:166</div></div>
<div class="ttc" id="classhobbes_1_1jitcc_html_ada6ad5d042afc6ca0c5735587eaded95"><div class="ttname"><a href="classhobbes_1_1jitcc.html#ada6ad5d042afc6ca0c5735587eaded95">hobbes::jitcc::globalData</a></div><div class="ttdeci">region globalData</div><div class="ttdef"><b>Definition:</b> jitcc.H:182</div></div>
<div class="ttc" id="namespacehobbes_html_aee08ce488a4342b3cc2e2cb513297ec8"><div class="ttname"><a href="namespacehobbes.html#aee08ce488a4342b3cc2e2cb513297ec8">hobbes::result</a></div><div class="ttdeci">uint32_t result</div><div class="ttdef"><b>Definition:</b> regex.C:376</div></div>
<div class="ttc" id="classhobbes_1_1jitcc_html_a00dbfee70923180778706c18886cf957"><div class="ttname"><a href="classhobbes_1_1jitcc.html#a00dbfee70923180778706c18886cf957">hobbes::jitcc::InternConstVars</a></div><div class="ttdeci">std::unordered_map&lt; std::string, std::string &gt; InternConstVars</div><div class="ttdef"><b>Definition:</b> jitcc.H:198</div></div>
<div class="ttc" id="classhobbes_1_1jitcc_html_a515f5e4cd71433b3e08c80baf8ea1ef9"><div class="ttname"><a href="classhobbes_1_1jitcc.html#a515f5e4cd71433b3e08c80baf8ea1ef9">hobbes::jitcc::constants</a></div><div class="ttdeci">Constants constants</div><div class="ttdef"><b>Definition:</b> jitcc.H:194</div></div>
<div class="ttc" id="classhobbes_1_1jitcc_html_aae138bd3f8601ec21e53f36ea7d83782"><div class="ttname"><a href="classhobbes_1_1jitcc.html#aae138bd3f8601ec21e53f36ea7d83782">hobbes::jitcc::Constants</a></div><div class="ttdeci">std::map&lt; std::string, Constant &gt; Constants</div><div class="ttdef"><b>Definition:</b> jitcc.H:193</div></div>
<div class="ttc" id="classhobbes_1_1jitcc_html_ab68f5c5d160906dbff6e9d2fdf1c9f61"><div class="ttname"><a href="classhobbes_1_1jitcc.html#ab68f5c5d160906dbff6e9d2fdf1c9f61">hobbes::jitcc::VarBindingStack</a></div><div class="ttdeci">std::vector&lt; VarBindings &gt; VarBindingStack</div><div class="ttdef"><b>Definition:</b> jitcc.H:150</div></div>
<div class="ttc" id="structhobbes_1_1op_html_a19811554370097c288fc14d4093e1df9"><div class="ttname"><a href="structhobbes_1_1op.html#a19811554370097c288fc14d4093e1df9">hobbes::op::apply</a></div><div class="ttdeci">virtual llvm::Value * apply(jitcc *ev, const MonoTypes &amp;tys, const MonoTypePtr &amp;rty, const Exprs &amp;es)=0</div></div>
<div class="ttc" id="classhobbes_1_1jitcc_html_a7e81b25f771374b8dc851fb91345e02e"><div class="ttname"><a href="classhobbes_1_1jitcc.html#a7e81b25f771374b8dc851fb91345e02e">hobbes::jitcc::internConstVars</a></div><div class="ttdeci">InternConstVars internConstVars</div><div class="ttdef"><b>Definition:</b> jitcc.H:199</div></div>
<div class="ttc" id="region_8H_html"><div class="ttname"><a href="region_8H.html">region.H</a></div></div>
<div class="ttc" id="structhobbes_1_1op_html_aa70381e29e4e966bb8f9dc9c29d4c33b"><div class="ttname"><a href="structhobbes_1_1op.html#aa70381e29e4e966bb8f9dc9c29d4c33b">hobbes::op::~op</a></div><div class="ttdeci">virtual ~op()</div><div class="ttdef"><b>Definition:</b> jitcc.C:810</div></div>
<div class="ttc" id="namespacehobbes_html_a87910f87372aa2af1001f53c5d301dd1"><div class="ttname"><a href="namespacehobbes.html#a87910f87372aa2af1001f53c5d301dd1">hobbes::MonoTypes</a></div><div class="ttdeci">std::vector&lt; MonoTypePtr &gt; MonoTypes</div><div class="ttdef"><b>Definition:</b> type.H:72</div></div>
<div class="ttc" id="classhobbes_1_1LetRec_html_ab72b1c919f40f1ed88dd669665429015"><div class="ttname"><a href="classhobbes_1_1LetRec.html#ab72b1c919f40f1ed88dd669665429015">hobbes::LetRec::Bindings</a></div><div class="ttdeci">std::vector&lt; Binding &gt; Bindings</div><div class="ttdef"><b>Definition:</b> expr.H:327</div></div>
<div class="ttc" id="expr_8H_html"><div class="ttname"><a href="expr_8H.html">expr.H</a></div></div>
<div class="ttc" id="namespacehobbes_html_a8e47e2726a09b01ab946b461fb139ab2"><div class="ttname"><a href="namespacehobbes.html#a8e47e2726a09b01ab946b461fb139ab2">hobbes::compile</a></div><div class="ttdeci">void compile(cc *, const ModulePtr &amp;m)</div><div class="ttdef"><b>Definition:</b> cmodule.C:301</div></div>
<div class="ttc" id="classhobbes_1_1region_html"><div class="ttname"><a href="classhobbes_1_1region.html">hobbes::region</a></div><div class="ttdef"><b>Definition:</b> region.H:16</div></div>
<div class="ttc" id="structhobbes_1_1jitcc_1_1UCF_html_ace461b9840e59bf02506986211928aac"><div class="ttname"><a href="structhobbes_1_1jitcc_1_1UCF.html#ace461b9840e59bf02506986211928aac">hobbes::jitcc::UCF::argns</a></div><div class="ttdeci">const str::seq &amp; argns</div><div class="ttdef"><b>Definition:</b> jitcc.H:157</div></div>
<div class="ttc" id="classhobbes_1_1jitcc_html_aea1f9379fa177db201cece53af3d3b2f"><div class="ttname"><a href="classhobbes_1_1jitcc.html#aea1f9379fa177db201cece53af3d3b2f">hobbes::jitcc::modules</a></div><div class="ttdeci">Modules modules</div><div class="ttdef"><b>Definition:</b> jitcc.H:121</div></div>
<div class="ttc" id="structhobbes_1_1jitcc_1_1Constant_html_a5f2c4cb02e91d168b14e90296369479d"><div class="ttname"><a href="structhobbes_1_1jitcc_1_1Constant.html#a5f2c4cb02e91d168b14e90296369479d">hobbes::jitcc::Constant::type</a></div><div class="ttdeci">llvm::Type * type</div><div class="ttdef"><b>Definition:</b> jitcc.H:189</div></div>
<div class="ttc" id="structhobbes_1_1op_html"><div class="ttname"><a href="structhobbes_1_1op.html">hobbes::op</a></div><div class="ttdef"><b>Definition:</b> jitcc.H:21</div></div>
<div class="ttc" id="classhobbes_1_1jitcc_html_acf67d281926033193ffa25f32f5bc9d7"><div class="ttname"><a href="classhobbes_1_1jitcc.html#acf67d281926033193ffa25f32f5bc9d7">hobbes::jitcc::vtenv</a></div><div class="ttdeci">VarBindingStack vtenv</div><div class="ttdef"><b>Definition:</b> jitcc.H:151</div></div>
<div class="ttc" id="classhobbes_1_1jitcc_html_a10aaab9a39bf2243a66d62a5872a7c95"><div class="ttname"><a href="classhobbes_1_1jitcc.html#a10aaab9a39bf2243a66d62a5872a7c95">hobbes::jitcc::GlobalExprs</a></div><div class="ttdeci">std::map&lt; std::string, ExprPtr &gt; GlobalExprs</div><div class="ttdef"><b>Definition:</b> jitcc.H:211</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
