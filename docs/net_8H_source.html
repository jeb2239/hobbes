<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>hobbes: include/hobbes/net.H Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">hobbes
   </div>
   <div id="projectbrief">a language, embedded compiler, and runtime for efficient dynamic expression evaluation, data storage and analysis</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_1365a971e5d9cbbb58eec91883a8b9c3.html">hobbes</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">net.H</div>  </div>
</div><!--header-->
<div class="contents">
<a href="net_8H.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * net : structured communication between processes</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *   use DEFINE_NET_CLIENT(T, C) to create a type T to send/receive through the commands in C</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *     each tuple in C is written (N, T, E) where</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *       N is a name for a member function in T to mediate the network command</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *       T is a C++ _function type_ (the type we expect N to have)</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *       E is a constant string expression to evaluate in the remote process</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#ifndef HNET_H_INCLUDED</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#define HNET_H_INCLUDED</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;queue&gt;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;functional&gt;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;sstream&gt;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;tuple&gt;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;map&gt;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;stdexcept&gt;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;sys/types.h&gt;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;sys/un.h&gt;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;sys/socket.h&gt;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;sys/ioctl.h&gt;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;netinet/in.h&gt;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;netdb.h&gt;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;unistd.h&gt;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;fcntl.h&gt;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="namespacehobbes_1_1net.html">   34</a></span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacehobbes.html">hobbes</a> { <span class="keyword">namespace </span>net {</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="net_8H.html#ab75ff31bc99fd7682adeb34e78574fe0">   36</a></span>&#160;<span class="preprocessor">#define HNET_VERSION     ((uint32_t)0x00010000)</span></div><div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="net_8H.html#a468c25f4e4a73f7c265e4e5637359f25">   37</a></span>&#160;<span class="preprocessor">#define HNET_CMD_DEFEXPR ((uint8_t)0)</span></div><div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="net_8H.html#a83d71ecea2dd83b294854ffc107b845b">   38</a></span>&#160;<span class="preprocessor">#define HNET_CMD_INVOKE  ((uint8_t)2)</span></div><div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="net_8H.html#a535bf5c6405e99b5e6e37f4dcb18fccf">   39</a></span>&#160;<span class="preprocessor">#define HNET_RESULT_FAIL 0</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="namespacehobbes_1_1net.html#a70ce255cbdc9f854fe86150856cbf5da">   41</a></span>&#160;<span class="keyword">typedef</span> std::vector&lt;uint8_t&gt; <a class="code" href="namespacehobbes_1_1net.html#a70ce255cbdc9f854fe86150856cbf5da">bytes</a>;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">// basic socket I/O</span></div><div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="namespacehobbes_1_1net.html#a54111fdc38eb6ad569a64973a1c866e9">   44</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacehobbes_1_1net.html#a54111fdc38eb6ad569a64973a1c866e9">sendData</a>(<span class="keywordtype">int</span> socket, <span class="keyword">const</span> uint8_t* d, <span class="keywordtype">size_t</span> sz) {</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <span class="keywordtype">size_t</span> i = 0;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="keywordflow">while</span> (i &lt; sz) {</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    ssize_t c = ::send(socket, d + i, sz - i, 0);</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keywordflow">if</span> (c &lt; 0) {</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;      <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;Couldn&#39;t write to socket: &quot;</span> + std::string(strerror(errno)));</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    }</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    i += c;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  }</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;}</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="namespacehobbes_1_1net.html#abcc1694520fa2502eb65f7efbab6e6e0">   55</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacehobbes_1_1net.html#abcc1694520fa2502eb65f7efbab6e6e0">sendString</a>(<span class="keywordtype">int</span> socket, <span class="keyword">const</span> std::string&amp; s) {</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="keywordtype">size_t</span> n = s.size();</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <a class="code" href="namespacehobbes_1_1net.html#a54111fdc38eb6ad569a64973a1c866e9">sendData</a>(socket, (<span class="keyword">const</span> uint8_t*)&amp;n, <span class="keyword">sizeof</span>(n));</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <a class="code" href="namespacehobbes_1_1net.html#a54111fdc38eb6ad569a64973a1c866e9">sendData</a>(socket, (<span class="keyword">const</span> uint8_t*)s.data(), n);</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;}</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="namespacehobbes_1_1net.html#afc47641e046a4d747e0d772eb1bfea80">   61</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacehobbes_1_1net.html#afc47641e046a4d747e0d772eb1bfea80">sendBytes</a>(<span class="keywordtype">int</span> socket, <span class="keyword">const</span> bytes&amp; x) {</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="keywordtype">size_t</span> n = x.size();</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <a class="code" href="namespacehobbes_1_1net.html#a54111fdc38eb6ad569a64973a1c866e9">sendData</a>(socket, (<span class="keyword">const</span> uint8_t*)&amp;n, <span class="keyword">sizeof</span>(n));</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="keywordflow">if</span> (n &gt; 0) {</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <a class="code" href="namespacehobbes_1_1net.html#a54111fdc38eb6ad569a64973a1c866e9">sendData</a>(socket, &amp;x[0], n);</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  }</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;}</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="namespacehobbes_1_1net.html#a237ffac2d20d3f18d8c50934a93e6cf7">   70</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacehobbes_1_1net.html#a237ffac2d20d3f18d8c50934a93e6cf7">recvData</a>(<span class="keywordtype">int</span> socket, uint8_t* d, <span class="keywordtype">size_t</span> sz) {</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="keywordtype">size_t</span> i = 0;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="keywordflow">while</span> (i &lt; sz) {</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    ssize_t di = recv(socket, d + i, sz - i, 0);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keywordflow">if</span> (di &lt; 0) {</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;      <span class="keywordflow">if</span> (errno != EINTR) {</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;Couldn&#39;t read socket: &quot;</span> + std::string(strerror(errno)));</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;      }</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (di == 0) {</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;Remote process closed session prematurely&quot;</span>);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;      i += di;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    }</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  }</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;}</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="namespacehobbes_1_1net.html#a1537ed619fbae307bdf0439cc2a27b8b">   87</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacehobbes_1_1net.html#a1537ed619fbae307bdf0439cc2a27b8b">recvString</a>(<span class="keywordtype">int</span> socket, std::string* x) {</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="keywordtype">size_t</span> n = 0;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <a class="code" href="namespacehobbes_1_1net.html#a237ffac2d20d3f18d8c50934a93e6cf7">recvData</a>(socket, (uint8_t*)&amp;n, <span class="keyword">sizeof</span>(n));</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  x-&gt;resize(n);</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <a class="code" href="namespacehobbes_1_1net.html#a237ffac2d20d3f18d8c50934a93e6cf7">recvData</a>(socket, (uint8_t*)&amp;((*x)[0]), n);</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;}</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="namespacehobbes_1_1net.html#ab2a3ad953d5ebdf1e38db1522ae63b96">   95</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacehobbes_1_1net.html#ab2a3ad953d5ebdf1e38db1522ae63b96">setBlockingBit</a>(<span class="keywordtype">int</span> socket, <span class="keywordtype">bool</span> block) {</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="keywordtype">int</span> f = fcntl(socket, F_GETFL, 0);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="keywordflow">if</span> (f == -1) f = 0;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  fcntl(socket, F_SETFL, block ? (f &amp; (~O_NONBLOCK)) : (f | O_NONBLOCK));</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;}</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="namespacehobbes_1_1net.html#a393f1251dceafa382796c81887d1b09b">  101</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">size_t</span> <a class="code" href="namespacehobbes_1_1net.html#a393f1251dceafa382796c81887d1b09b">recvDataPartial</a>(<span class="keywordtype">int</span> socket, uint8_t* d, <span class="keywordtype">size_t</span> sz) {</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  ssize_t di = recv(socket, d, sz, 0);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keywordflow">if</span> (di == 0) {</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;Remote process closed session prematurely&quot;</span>);</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (di &lt; 0) {</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordflow">if</span> (errno == EAGAIN || errno == EWOULDBLOCK || errno == EINTR) {</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;Couldn&#39;t read socket: &quot;</span> + std::string(strerror(errno)));</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    }</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  }</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="keywordflow">return</span> (<span class="keywordtype">size_t</span>)di;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;}</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">// socket connection and session initiation</span></div><div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1RPCDef.html">  117</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1RPCDef.html">RPCDef</a> {</div><div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1RPCDef.html#a397b915eb570d7995e9aab1d58a999bd">  118</a></span>&#160;  <a class="code" href="structhobbes_1_1net_1_1RPCDef.html#a397b915eb570d7995e9aab1d58a999bd">RPCDef</a>(uint32_t <span class="keywordtype">id</span> = 0, <span class="keyword">const</span> std::string&amp; <a class="code" href="structhobbes_1_1net_1_1RPCDef.html#a79ed3d9a8bc408214f42ec64500ec82e">expr</a> = <span class="stringliteral">&quot;&quot;</span>, <span class="keyword">const</span> bytes&amp; <a class="code" href="structhobbes_1_1net_1_1RPCDef.html#a182c6d69698021ee61dc9ce5eb248d13">willPut</a> = <a class="code" href="namespacehobbes_1_1net.html#a70ce255cbdc9f854fe86150856cbf5da">bytes</a>(), <span class="keyword">const</span> bytes&amp; <a class="code" href="structhobbes_1_1net_1_1RPCDef.html#af6757e32d450d33a78b6d5a5bfa81ea9">willGet</a> = <a class="code" href="namespacehobbes_1_1net.html#a70ce255cbdc9f854fe86150856cbf5da">bytes</a>()) :</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <a class="code" href="structhobbes_1_1net_1_1RPCDef.html#a7d57f0cb9b4a749f2e2a220b3855beb4">id</a>(<a class="code" href="structhobbes_1_1net_1_1RPCDef.html#a7d57f0cb9b4a749f2e2a220b3855beb4">id</a>), <a class="code" href="structhobbes_1_1net_1_1RPCDef.html#a79ed3d9a8bc408214f42ec64500ec82e">expr</a>(<a class="code" href="structhobbes_1_1net_1_1RPCDef.html#a79ed3d9a8bc408214f42ec64500ec82e">expr</a>), <a class="code" href="structhobbes_1_1net_1_1RPCDef.html#a182c6d69698021ee61dc9ce5eb248d13">willPut</a>(<a class="code" href="structhobbes_1_1net_1_1RPCDef.html#a182c6d69698021ee61dc9ce5eb248d13">willPut</a>), <a class="code" href="structhobbes_1_1net_1_1RPCDef.html#af6757e32d450d33a78b6d5a5bfa81ea9">willGet</a>(<a class="code" href="structhobbes_1_1net_1_1RPCDef.html#af6757e32d450d33a78b6d5a5bfa81ea9">willGet</a>)</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  {</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  }</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1RPCDef.html#a7d57f0cb9b4a749f2e2a220b3855beb4">  123</a></span>&#160;  uint32_t    <a class="code" href="structhobbes_1_1net_1_1RPCDef.html#a7d57f0cb9b4a749f2e2a220b3855beb4">id</a>;      <span class="comment">// how will this RPC be identified?</span></div><div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1RPCDef.html#a79ed3d9a8bc408214f42ec64500ec82e">  124</a></span>&#160;  std::string <a class="code" href="structhobbes_1_1net_1_1RPCDef.html#a79ed3d9a8bc408214f42ec64500ec82e">expr</a>;    <span class="comment">// what expression will be applied for this RPC on the remote side?</span></div><div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1RPCDef.html#a182c6d69698021ee61dc9ce5eb248d13">  125</a></span>&#160;  bytes       <a class="code" href="structhobbes_1_1net_1_1RPCDef.html#a182c6d69698021ee61dc9ce5eb248d13">willPut</a>; <span class="comment">// what type will be sent?</span></div><div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1RPCDef.html#af6757e32d450d33a78b6d5a5bfa81ea9">  126</a></span>&#160;  bytes       <a class="code" href="structhobbes_1_1net_1_1RPCDef.html#af6757e32d450d33a78b6d5a5bfa81ea9">willGet</a>; <span class="comment">// what type will be received?</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;};</div><div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="namespacehobbes_1_1net.html#a4737710e8e08cb62497625e5eb6b3461">  128</a></span>&#160;<span class="keyword">typedef</span> std::vector&lt;RPCDef&gt; <a class="code" href="namespacehobbes_1_1net.html#a4737710e8e08cb62497625e5eb6b3461">RPCDefs</a>;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">// initiate a session on a connected socket by sending all of the RPC defs</span></div><div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="namespacehobbes_1_1net.html#a434ad51614dfb1d517558a768f7b4f77">  131</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="namespacehobbes_1_1net.html#a434ad51614dfb1d517558a768f7b4f77">initSession</a>(<span class="keywordtype">int</span> s, <span class="keyword">const</span> RPCDefs&amp; rpcds) {</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  uint32_t version = <a class="code" href="net_8H.html#ab75ff31bc99fd7682adeb34e78574fe0">HNET_VERSION</a>;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <a class="code" href="namespacehobbes_1_1net.html#a54111fdc38eb6ad569a64973a1c866e9">sendData</a>(s, (<span class="keyword">const</span> uint8_t*)&amp;version, <span class="keyword">sizeof</span>(version));</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; rpcd : rpcds) {</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    uint8_t defCmd = <a class="code" href="net_8H.html#a468c25f4e4a73f7c265e4e5637359f25">HNET_CMD_DEFEXPR</a>;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <a class="code" href="namespacehobbes_1_1net.html#a54111fdc38eb6ad569a64973a1c866e9">sendData</a>(s, &amp;defCmd, <span class="keyword">sizeof</span>(defCmd));</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <a class="code" href="namespacehobbes_1_1net.html#a54111fdc38eb6ad569a64973a1c866e9">sendData</a>(s, (<span class="keyword">const</span> uint8_t*)&amp;rpcd.id, <span class="keyword">sizeof</span>(rpcd.id));</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <a class="code" href="namespacehobbes_1_1net.html#abcc1694520fa2502eb65f7efbab6e6e0">sendString</a>(s, rpcd.expr);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="namespacehobbes_1_1net.html#afc47641e046a4d747e0d772eb1bfea80">sendBytes</a>(s, rpcd.willPut);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <a class="code" href="namespacehobbes_1_1net.html#afc47641e046a4d747e0d772eb1bfea80">sendBytes</a>(s, rpcd.willGet);</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    uint8_t <a class="code" href="namespacehobbes.html#aee08ce488a4342b3cc2e2cb513297ec8">result</a> = <a class="code" href="net_8H.html#a535bf5c6405e99b5e6e37f4dcb18fccf">HNET_RESULT_FAIL</a>;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <a class="code" href="namespacehobbes_1_1net.html#a237ffac2d20d3f18d8c50934a93e6cf7">recvData</a>(s, &amp;result, <span class="keyword">sizeof</span>(result));</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">if</span> (result == <a class="code" href="net_8H.html#a535bf5c6405e99b5e6e37f4dcb18fccf">HNET_RESULT_FAIL</a>) {</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      std::string err;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      <a class="code" href="namespacehobbes_1_1net.html#a1537ed619fbae307bdf0439cc2a27b8b">recvString</a>(s, &amp;err);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      std::ostringstream <a class="code" href="hexpr_8parse_8C.html#aab67351865de70c1e46d2434b16b1a07">m</a>;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      m &lt;&lt; <span class="stringliteral">&quot;While trying to define &#39;&quot;</span> &lt;&lt; rpcd.expr &lt;&lt; <span class="stringliteral">&quot;&#39; with id=&quot;</span> &lt;&lt; rpcd.id &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; err &lt;&lt; std::flush;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      <span class="keywordflow">throw</span> std::runtime_error(m.str());</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    }</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  }</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="keywordflow">return</span> s;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;}</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="namespacehobbes_1_1net.html#ae3a54035fb643eda7362a415a5efaaeb">  156</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="namespacehobbes_1_1net.html#ae3a54035fb643eda7362a415a5efaaeb">makeConnection</a>(<span class="keywordtype">int</span> s, sockaddr* saddr, <span class="keywordtype">size_t</span> len) {</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <span class="keywordflow">if</span> (connect(s, saddr, len) == -1) {</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    std::ostringstream ss;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    ss &lt;&lt; <span class="stringliteral">&quot;Unable to connect socket: &quot;</span> &lt;&lt; strerror(errno) &lt;&lt; std::flush;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    close(s);</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">throw</span> std::runtime_error(ss.str());</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  }</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  fd_set wd;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  FD_ZERO(&amp;wd);</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  FD_SET(s, &amp;wd);</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacehobbes.html#a10d33eee44f86065fb908209061f8cb3">select</a>(s + 1, 0, &amp;wd, 0, 0) == -1) {</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    std::ostringstream ss;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    ss &lt;&lt; <span class="stringliteral">&quot;Failed to connect socket while waiting for writeability: &quot;</span> &lt;&lt; strerror(errno) &lt;&lt; std::flush;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    close(s);</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">throw</span> std::runtime_error(ss.str());</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  }</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="keywordflow">return</span> s;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;}</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div><div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="namespacehobbes_1_1net.html#ab5335a42c6d331cd375b205d1633b544">  178</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="namespacehobbes_1_1net.html#ae3a54035fb643eda7362a415a5efaaeb">makeConnection</a>(<span class="keyword">const</span> hostent&amp; host, <span class="keywordtype">int</span> port) {</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="keywordtype">int</span> s = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="keywordflow">if</span> (s == -1) {</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;Unable to allocate socket: &quot;</span> + std::string(strerror(errno)));</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  }</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  sockaddr_in addr;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  memset(&amp;addr, 0, <span class="keyword">sizeof</span>(addr));</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  addr.sin_family = AF_INET;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  addr.sin_addr   = *((in_addr*)(host.h_addr_list[0]));</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  addr.sin_port   = htons(port);</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacehobbes_1_1net.html#ae3a54035fb643eda7362a415a5efaaeb">makeConnection</a>(s, (sockaddr*)&amp;addr, <span class="keyword">sizeof</span>(addr));</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;}</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="namespacehobbes_1_1net.html#a412d99ac1190b3e012abb88dac424ef5">  193</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="namespacehobbes_1_1net.html#ae3a54035fb643eda7362a415a5efaaeb">makeConnection</a>(<span class="keyword">const</span> std::string&amp; host, <span class="keywordtype">size_t</span> port) {</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> hostent* h = (host.size() &gt; 0 &amp;&amp; std::isdigit(host[0]) != 0) ? gethostbyaddr(host.c_str(), host.size(), AF_INET) : gethostbyname(host.c_str())) {</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacehobbes_1_1net.html#ae3a54035fb643eda7362a415a5efaaeb">makeConnection</a>(*h, port);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;Unable to resolve host: &quot;</span> + host);</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  }</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;}</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno"><a class="line" href="namespacehobbes_1_1net.html#a9e37ab7c36b846db0dc2d37e58b5b674">  201</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="namespacehobbes_1_1net.html#ae3a54035fb643eda7362a415a5efaaeb">makeConnection</a>(<span class="keyword">const</span> std::string&amp; host, <span class="keyword">const</span> std::string&amp; port) {</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  std::istringstream ss(port);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="keywordtype">size_t</span> p = 0;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  ss &gt;&gt; p;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="keywordflow">if</span> (ss) {</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacehobbes_1_1net.html#ae3a54035fb643eda7362a415a5efaaeb">makeConnection</a>(host, p);</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keyword">struct </span>servent* s = getservbyname(port.c_str(), <span class="stringliteral">&quot;tcp&quot;</span>);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">if</span> (s != 0) {</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacehobbes_1_1net.html#ae3a54035fb643eda7362a415a5efaaeb">makeConnection</a>(host, ntohs(s-&gt;s_port));</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;Failed to resolve port name: &quot;</span> + port);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    }</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  }</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;}</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno"><a class="line" href="namespacehobbes_1_1net.html#a34d662c2c499d28e65b237300960078f">  217</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="namespacehobbes_1_1net.html#ae3a54035fb643eda7362a415a5efaaeb">makeConnection</a>(<span class="keyword">const</span> std::string&amp; hostport) {</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <span class="keyword">auto</span> p = hostport.find(<span class="stringliteral">&quot;:&quot;</span>);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="keywordflow">if</span> (p == std::string::npos) {</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;Failed to determine port: &quot;</span> + hostport);</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacehobbes_1_1net.html#ae3a54035fb643eda7362a415a5efaaeb">makeConnection</a>(hostport.substr(0, p), hostport.substr(p + 1, hostport.size()));</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  }</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;}</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment">// very basic macro metaprogramming</span></div><div class="line"><a name="l00227"></a><span class="lineno"><a class="line" href="net_8H.html#a6ba783efe42fb2aa4c031a2beaab7702">  227</a></span>&#160;<span class="preprocessor">#define _HNET_FIRST(a, ...) a</span></div><div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="net_8H.html#a1e3eee09f7a21f006bb2ea8169960081">  228</a></span>&#160;<span class="preprocessor">#define _HNET_SECOND(a, b, ...) b</span></div><div class="line"><a name="l00229"></a><span class="lineno"><a class="line" href="net_8H.html#ac06c40b319b447b084a322a79225b7b0">  229</a></span>&#160;<span class="preprocessor">#define _HNET_JOIN(a,b) a ## b</span></div><div class="line"><a name="l00230"></a><span class="lineno"><a class="line" href="net_8H.html#a006321f1a95c5b5c92739ad00aacb4e3">  230</a></span>&#160;<span class="preprocessor">#define _HNET_IS_NEGATE(...) _HNET_SECOND(__VA_ARGS__, 0)</span></div><div class="line"><a name="l00231"></a><span class="lineno"><a class="line" href="net_8H.html#a639b99ddee29e1d6c7984597ce40b89f">  231</a></span>&#160;<span class="preprocessor">#define _HNET_NOT(x) _HNET_IS_NEGATE(_HNET_JOIN(_HNET__NOT_, x))</span></div><div class="line"><a name="l00232"></a><span class="lineno"><a class="line" href="net_8H.html#a09646cf769e3421478cc76972fb73078">  232</a></span>&#160;<span class="preprocessor">#define _HNET__NOT_0 NEGATE, 1</span></div><div class="line"><a name="l00233"></a><span class="lineno"><a class="line" href="net_8H.html#a12e277b56ef08609237c8bbb0b4d5462">  233</a></span>&#160;<span class="preprocessor">#define _HNET_BOOL(x) _HNET_NOT(_HNET_NOT(x))</span></div><div class="line"><a name="l00234"></a><span class="lineno"><a class="line" href="net_8H.html#ad5d28779a9d41f68189e5caaf87848a4">  234</a></span>&#160;<span class="preprocessor">#define _HNET_IF_ELSE(condition) _HNET__IF_ELSE(_HNET_BOOL(condition))</span></div><div class="line"><a name="l00235"></a><span class="lineno"><a class="line" href="net_8H.html#a230a07084cc564dc5d76f728e592fc09">  235</a></span>&#160;<span class="preprocessor">#define _HNET__IF_ELSE(condition) _HNET_JOIN(_HNET__IF_, condition)</span></div><div class="line"><a name="l00236"></a><span class="lineno"><a class="line" href="net_8H.html#a6e546908c91e431d84f237dea9c1d920">  236</a></span>&#160;<span class="preprocessor">#define _HNET__IF_1(...) __VA_ARGS__ _HNET__IF_1_ELSE</span></div><div class="line"><a name="l00237"></a><span class="lineno"><a class="line" href="net_8H.html#a4ca9414da9fd1cf39fcd00e5e60a6e80">  237</a></span>&#160;<span class="preprocessor">#define _HNET__IF_0(...)             _HNET__IF_0_ELSE</span></div><div class="line"><a name="l00238"></a><span class="lineno"><a class="line" href="net_8H.html#a11b3a5ba6f6139d6f0852745dd661280">  238</a></span>&#160;<span class="preprocessor">#define _HNET__IF_1_ELSE(...)</span></div><div class="line"><a name="l00239"></a><span class="lineno"><a class="line" href="net_8H.html#af2286170835a5d948db7dd0dd1dd6d40">  239</a></span>&#160;<span class="preprocessor">#define _HNET__IF_0_ELSE(...) __VA_ARGS__</span></div><div class="line"><a name="l00240"></a><span class="lineno"><a class="line" href="net_8H.html#a3683bd4496eef7c81697246b065fcf34">  240</a></span>&#160;<span class="preprocessor">#define _HNET_EMPTY()</span></div><div class="line"><a name="l00241"></a><span class="lineno"><a class="line" href="net_8H.html#a090b7e33d1f852d6feb5e8f386488b93">  241</a></span>&#160;<span class="preprocessor">#define _HNET_EVAL(...) _HNET_EVAL256(__VA_ARGS__)</span></div><div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="net_8H.html#a1011ea10c76f002a9a44e893a56cbbe1">  242</a></span>&#160;<span class="preprocessor">#define _HNET_EVAL256(...) _HNET_EVAL128(_HNET_EVAL128(__VA_ARGS__))</span></div><div class="line"><a name="l00243"></a><span class="lineno"><a class="line" href="net_8H.html#a1dc58c1f762576db5d9889d7e94b2092">  243</a></span>&#160;<span class="preprocessor">#define _HNET_EVAL128(...) _HNET_EVAL64(_HNET_EVAL64(__VA_ARGS__))</span></div><div class="line"><a name="l00244"></a><span class="lineno"><a class="line" href="net_8H.html#a219ffabdc5765602937bfa2b2dc5e1b9">  244</a></span>&#160;<span class="preprocessor">#define _HNET_EVAL64(...) _HNET_EVAL32(_HNET_EVAL32(__VA_ARGS__))</span></div><div class="line"><a name="l00245"></a><span class="lineno"><a class="line" href="net_8H.html#ab327e3fe3fade455bb66fa4ec97b49a8">  245</a></span>&#160;<span class="preprocessor">#define _HNET_EVAL32(...) _HNET_EVAL16(_HNET_EVAL16(__VA_ARGS__))</span></div><div class="line"><a name="l00246"></a><span class="lineno"><a class="line" href="net_8H.html#ab717b9fdc967874f3935aff1b146577f">  246</a></span>&#160;<span class="preprocessor">#define _HNET_EVAL16(...) _HNET_EVAL8(_HNET_EVAL8(__VA_ARGS__))</span></div><div class="line"><a name="l00247"></a><span class="lineno"><a class="line" href="net_8H.html#a7f5ec279836824250f1db552026cda3d">  247</a></span>&#160;<span class="preprocessor">#define _HNET_EVAL8(...) _HNET_EVAL4(_HNET_EVAL4(__VA_ARGS__))</span></div><div class="line"><a name="l00248"></a><span class="lineno"><a class="line" href="net_8H.html#a1c2ff47e0e055b99b756fab8dd8ae6b4">  248</a></span>&#160;<span class="preprocessor">#define _HNET_EVAL4(...) _HNET_EVAL2(_HNET_EVAL2(__VA_ARGS__))</span></div><div class="line"><a name="l00249"></a><span class="lineno"><a class="line" href="net_8H.html#acda17b6abb6cbd8eefd8874c65dbdfd8">  249</a></span>&#160;<span class="preprocessor">#define _HNET_EVAL2(...) _HNET_EVAL1(_HNET_EVAL1(__VA_ARGS__))</span></div><div class="line"><a name="l00250"></a><span class="lineno"><a class="line" href="net_8H.html#a83a69af8a7e93391158821fd7e55d3c4">  250</a></span>&#160;<span class="preprocessor">#define _HNET_EVAL1(...) __VA_ARGS__</span></div><div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="net_8H.html#a00b304973fcd1cd4287d46a1244bbfa7">  251</a></span>&#160;<span class="preprocessor">#define _HNET_DEFER2(m) m _HNET_EMPTY _HNET_EMPTY()()</span></div><div class="line"><a name="l00252"></a><span class="lineno"><a class="line" href="net_8H.html#a182dfb173eba5627a29e3c43ba67e9ae">  252</a></span>&#160;<span class="preprocessor">#define _HNET_HAS_PARGS(...) _HNET_BOOL(_HNET_FIRST(_HNET__EOAP_ __VA_ARGS__)())</span></div><div class="line"><a name="l00253"></a><span class="lineno"><a class="line" href="net_8H.html#aa8d2efd6c3c5b056cc4ebc7a96ec0284">  253</a></span>&#160;<span class="preprocessor">#define _HNET__EOAP_(...) _HNET_BOOL(_HNET_FIRST(_HNET__EOA_ __VA_ARGS__)())</span></div><div class="line"><a name="l00254"></a><span class="lineno"><a class="line" href="net_8H.html#a4451109e68accc8ed337e4f4914e69cf">  254</a></span>&#160;<span class="preprocessor">#define _HNET__EOA_() 0</span></div><div class="line"><a name="l00255"></a><span class="lineno"><a class="line" href="net_8H.html#a392b978338a4c95d1f5e0002c3dc9dc0">  255</a></span>&#160;<span class="preprocessor">#define _HNET_MAP(f, VS...) _HNET_EVAL(_HNET_MAPP(f, VS))</span></div><div class="line"><a name="l00256"></a><span class="lineno"><a class="line" href="net_8H.html#a8ffa3a3b64a0565cfd21102278a07abc">  256</a></span>&#160;<span class="preprocessor">#define _HNET_MAPP(f, H, T...)        \</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="preprocessor">  f H                                 \</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="preprocessor">  _HNET_IF_ELSE(_HNET_HAS_PARGS(T))(  \</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="preprocessor">    _HNET_DEFER2(_HNET__MAPP)()(f, T) \</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="preprocessor">  )(                                  \</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="preprocessor">  )</span></div><div class="line"><a name="l00262"></a><span class="lineno"><a class="line" href="net_8H.html#af698cba0b83410ad87b9c56981a089c0">  262</a></span>&#160;<span class="preprocessor">#define _HNET__MAPP() _HNET_MAPP</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">/*****************************</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment"> * BEGIN serialization by type / type-family</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment"> *****************************/</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> P = <span class="keywordtype">void</span>&gt;</div><div class="line"><a name="l00268"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io.html">  268</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1io.html">io</a> {</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  };</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">// type serialization</span></div><div class="line"><a name="l00272"></a><span class="lineno"><a class="line" href="net_8H.html#a79799930e5e8b49cd493bd14e53b56c5">  272</a></span>&#160;<span class="preprocessor">#define _HNET_TYCTOR_PRIM      ((int)0)</span></div><div class="line"><a name="l00273"></a><span class="lineno"><a class="line" href="net_8H.html#aba5f29d0c0206027daf2654d0a340a6b">  273</a></span>&#160;<span class="preprocessor">#define _HNET_TYCTOR_TVAR      ((int)2)</span></div><div class="line"><a name="l00274"></a><span class="lineno"><a class="line" href="net_8H.html#ad4759fa33652d5bea7dc9596921ed3fc">  274</a></span>&#160;<span class="preprocessor">#define _HNET_TYCTOR_FIXEDARR  ((int)4)</span></div><div class="line"><a name="l00275"></a><span class="lineno"><a class="line" href="net_8H.html#a9a8e86d83dbcc67c9af615f3d75a7e3d">  275</a></span>&#160;<span class="preprocessor">#define _HNET_TYCTOR_ARR       ((int)5)</span></div><div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="net_8H.html#ad45a0c8ebd5581296c08423939effac9">  276</a></span>&#160;<span class="preprocessor">#define _HNET_TYCTOR_VARIANT   ((int)6)</span></div><div class="line"><a name="l00277"></a><span class="lineno"><a class="line" href="net_8H.html#af44cc134ba320bce6bdba2b14e81342e">  277</a></span>&#160;<span class="preprocessor">#define _HNET_TYCTOR_STRUCT    ((int)7)</span></div><div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="net_8H.html#a70dd5c00b90abc46c0f8972ae322bdbe">  278</a></span>&#160;<span class="preprocessor">#define _HNET_TYCTOR_SIZE      ((int)11)</span></div><div class="line"><a name="l00279"></a><span class="lineno"><a class="line" href="net_8H.html#a7dc5d065a0336c92f0a26dccedcdfc5d">  279</a></span>&#160;<span class="preprocessor">#define _HNET_TYCTOR_RECURSIVE ((int)13)</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l00282"></a><span class="lineno"><a class="line" href="namespacehobbes_1_1net.html#a5c4c0f003879ad2770dfd6a181a2b655">  282</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="namespacehobbes_1_1net.html#a5c4c0f003879ad2770dfd6a181a2b655">w</a>(<span class="keyword">const</span> T&amp; x, bytes* <a class="code" href="netio_8H.html#a9a18f415b2912f27ae28ab8225dda5d4">out</a>) {</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    out-&gt;insert(out-&gt;end(), (uint8_t*)&amp;x, ((uint8_t*)&amp;x) + <span class="keyword">sizeof</span>(x));</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  }</div><div class="line"><a name="l00285"></a><span class="lineno"><a class="line" href="namespacehobbes_1_1net.html#a05034c768dd1231859bbb44a45a4306d">  285</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacehobbes_1_1net.html#a05034c768dd1231859bbb44a45a4306d">ws</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* x, bytes* <a class="code" href="netio_8H.html#a9a18f415b2912f27ae28ab8225dda5d4">out</a>) {</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="keywordtype">size_t</span> n = strlen(x);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <a class="code" href="namespacehobbes_1_1net.html#a5c4c0f003879ad2770dfd6a181a2b655">w</a>(n, out);</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  out-&gt;insert(out-&gt;end(), x, x + n);</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;}</div><div class="line"><a name="l00290"></a><span class="lineno"><a class="line" href="namespacehobbes_1_1net.html#a6b91ad4e4364850018a41f5992b98c55">  290</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacehobbes_1_1net.html#a05034c768dd1231859bbb44a45a4306d">ws</a>(<span class="keyword">const</span> std::string&amp; x, bytes* <a class="code" href="netio_8H.html#a9a18f415b2912f27ae28ab8225dda5d4">out</a>) {</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <a class="code" href="namespacehobbes_1_1net.html#a5c4c0f003879ad2770dfd6a181a2b655">w</a>((<span class="keywordtype">size_t</span>)x.size(), <a class="code" href="netio_8H.html#a9a18f415b2912f27ae28ab8225dda5d4">out</a>);</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  out-&gt;insert(out-&gt;end(), x.begin(), x.end());</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;}</div><div class="line"><a name="l00294"></a><span class="lineno"><a class="line" href="namespacehobbes_1_1net.html#a0e1f13a847821fc72c3ba8a86656f660">  294</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacehobbes_1_1net.html#a05034c768dd1231859bbb44a45a4306d">ws</a>(<span class="keyword">const</span> bytes&amp; x, bytes* <a class="code" href="netio_8H.html#a9a18f415b2912f27ae28ab8225dda5d4">out</a>) {</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <a class="code" href="namespacehobbes_1_1net.html#a5c4c0f003879ad2770dfd6a181a2b655">w</a>((<span class="keywordtype">size_t</span>)x.size(), <a class="code" href="netio_8H.html#a9a18f415b2912f27ae28ab8225dda5d4">out</a>);</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  out-&gt;insert(out-&gt;end(), x.begin(), x.end());</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;}</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div><div class="line"><a name="l00299"></a><span class="lineno"><a class="line" href="namespacehobbes_1_1net.html#ab251aabc451fcd00548ec9e3adf98ded">  299</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacehobbes_1_1net.html#ab251aabc451fcd00548ec9e3adf98ded">encode_primty</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* tn, bytes* <a class="code" href="netio_8H.html#a9a18f415b2912f27ae28ab8225dda5d4">out</a>) {</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <a class="code" href="namespacehobbes_1_1net.html#a5c4c0f003879ad2770dfd6a181a2b655">w</a>(<a class="code" href="net_8H.html#a79799930e5e8b49cd493bd14e53b56c5">_HNET_TYCTOR_PRIM</a>, out);</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <a class="code" href="namespacehobbes_1_1net.html#a05034c768dd1231859bbb44a45a4306d">ws</a>(tn, out);</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <a class="code" href="namespacehobbes_1_1net.html#a5c4c0f003879ad2770dfd6a181a2b655">w</a>((<span class="keywordtype">bool</span>)<span class="keyword">false</span>, out);</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;}</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment">// primitive serialization</span></div><div class="line"><a name="l00306"></a><span class="lineno"><a class="line" href="net_8H.html#a6cabe27b2bf565025cddec586973be33">  306</a></span>&#160;<span class="preprocessor">#define _HNET_DEFINE_PRIMTYS(T, n) \</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="preprocessor">  template &lt;&gt; \</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="preprocessor">    struct io&lt;T&gt; { \</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="preprocessor">      typedef void can_memcpy; \</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="preprocessor">      static void        encode(bytes* out)       { encode_primty(n, out); } \</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="preprocessor">      static std::string describe()               { return n; } \</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="preprocessor">      static void        write(int s, const T&amp; x) { sendData(s, (const uint8_t*)&amp;x, sizeof(x)); } \</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="preprocessor">      static void        read(int s, T* x)        { recvData(s, (uint8_t*)x, sizeof(T)); } \</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="preprocessor">      typedef uint8_t async_read_state; \</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="preprocessor">      static void prepare(uint8_t* o) { *o = 0; } \</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="preprocessor">      static bool accum(int s, uint8_t* o, T* x) { *o += recvDataPartial(s, ((uint8_t*)x) + *o, sizeof(T) - *o); return *o == sizeof(T); } \</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="preprocessor">    }</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<a class="code" href="namespacehobbes_1_1net.html#a00d9b10c9bb695798cfc41694aacaf59">_HNET_DEFINE_PRIMTYS</a>(<span class="keywordtype">bool</span>,     <span class="stringliteral">&quot;bool&quot;</span>);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<a class="code" href="namespacehobbes_1_1net.html#a00d9b10c9bb695798cfc41694aacaf59">_HNET_DEFINE_PRIMTYS</a>(uint8_t,  <span class="stringliteral">&quot;byte&quot;</span>);</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<a class="code" href="namespacehobbes_1_1net.html#a00d9b10c9bb695798cfc41694aacaf59">_HNET_DEFINE_PRIMTYS</a>(<span class="keywordtype">char</span>,     <span class="stringliteral">&quot;char&quot;</span>);</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<a class="code" href="namespacehobbes_1_1net.html#a00d9b10c9bb695798cfc41694aacaf59">_HNET_DEFINE_PRIMTYS</a>(int16_t,  <span class="stringliteral">&quot;short&quot;</span>);</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<a class="code" href="namespacehobbes_1_1net.html#a00d9b10c9bb695798cfc41694aacaf59">_HNET_DEFINE_PRIMTYS</a>(uint16_t, <span class="stringliteral">&quot;short&quot;</span>);</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<a class="code" href="namespacehobbes_1_1net.html#a00d9b10c9bb695798cfc41694aacaf59">_HNET_DEFINE_PRIMTYS</a>(int32_t,  <span class="stringliteral">&quot;int&quot;</span>);</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<a class="code" href="namespacehobbes_1_1net.html#a00d9b10c9bb695798cfc41694aacaf59">_HNET_DEFINE_PRIMTYS</a>(uint32_t, <span class="stringliteral">&quot;int&quot;</span>);</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<a class="code" href="namespacehobbes_1_1net.html#a00d9b10c9bb695798cfc41694aacaf59">_HNET_DEFINE_PRIMTYS</a>(int64_t,  <span class="stringliteral">&quot;long&quot;</span>);</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<a class="code" href="namespacehobbes_1_1net.html#a00d9b10c9bb695798cfc41694aacaf59">_HNET_DEFINE_PRIMTYS</a>(uint64_t, <span class="stringliteral">&quot;long&quot;</span>);</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="preprocessor">#ifdef __clang__</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<a class="code" href="namespacehobbes_1_1net.html#a00d9b10c9bb695798cfc41694aacaf59">_HNET_DEFINE_PRIMTYS</a>(<span class="keywordtype">size_t</span>,   <span class="stringliteral">&quot;long&quot;</span>);</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<a class="code" href="namespacehobbes_1_1net.html#a00d9b10c9bb695798cfc41694aacaf59">_HNET_DEFINE_PRIMTYS</a>(<span class="keywordtype">float</span>,    <span class="stringliteral">&quot;float&quot;</span>);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<a class="code" href="namespacehobbes_1_1net.html#a00d9b10c9bb695798cfc41694aacaf59">_HNET_DEFINE_PRIMTYS</a>(<span class="keywordtype">double</span>,   <span class="stringliteral">&quot;double&quot;</span>);</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> P = <span class="keywordtype">void</span>&gt;</div><div class="line"><a name="l00334"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1cannot__memcpy.html">  334</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1cannot__memcpy.html">cannot_memcpy</a> {</div><div class="line"><a name="l00335"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1cannot__memcpy.html#aff735b5bc814d1121e62fb46b2c0dfd4">  335</a></span>&#160;    <span class="keyword">typedef</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1cannot__memcpy.html#aff735b5bc814d1121e62fb46b2c0dfd4">type</a>;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  };</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l00338"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1cannot__memcpy_3_01T_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4.html">  338</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1cannot__memcpy.html">cannot_memcpy</a>&lt;T, typename <a class="code" href="structhobbes_1_1net_1_1io.html">io</a>&lt;T&gt;::can_memcpy&gt; {</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  };</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment">// support unit</span></div><div class="line"><a name="l00342"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1unit.html#a46745ea3d27ef921dd538cafdf38a19a">  342</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1unit.html">unit</a> { <a class="code" href="structhobbes_1_1net_1_1unit.html#a46745ea3d27ef921dd538cafdf38a19a">unit</a>() { } };</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="keyword">template</span> &lt;&gt;</div><div class="line"><a name="l00345"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01unit_01_4.html">  345</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1io.html">io</a>&lt;<a class="code" href="structhobbes_1_1net_1_1unit.html">unit</a>&gt; {</div><div class="line"><a name="l00346"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01unit_01_4.html#acf395211bdcdba51225b629ab58aab1b">  346</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01unit_01_4.html#acf395211bdcdba51225b629ab58aab1b">encode</a>(bytes* <a class="code" href="netio_8H.html#a9a18f415b2912f27ae28ab8225dda5d4">out</a>) { <a class="code" href="namespacehobbes_1_1net.html#ab251aabc451fcd00548ec9e3adf98ded">encode_primty</a>(<span class="stringliteral">&quot;unit&quot;</span>, out); }</div><div class="line"><a name="l00347"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01unit_01_4.html#a47c2003e7d0d97b88aab685ad9ccbeb0">  347</a></span>&#160;    <span class="keyword">static</span> std::string <a class="code" href="structhobbes_1_1net_1_1io_3_01unit_01_4.html#a47c2003e7d0d97b88aab685ad9ccbeb0">describe</a>() { <span class="keywordflow">return</span> <span class="stringliteral">&quot;()&quot;</span>; }</div><div class="line"><a name="l00348"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01unit_01_4.html#a5a1923689e0e0ec682c2927a68d03557">  348</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01unit_01_4.html#a5a1923689e0e0ec682c2927a68d03557">write</a>(<span class="keywordtype">int</span> s, <span class="keyword">const</span> <a class="code" href="structhobbes_1_1net_1_1unit.html">unit</a>&amp;) { }</div><div class="line"><a name="l00349"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01unit_01_4.html#a2140ca3b5338c101b128020ff575ca39">  349</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01unit_01_4.html#a2140ca3b5338c101b128020ff575ca39">read</a>(<span class="keywordtype">int</span> s, <a class="code" href="structhobbes_1_1net_1_1unit.html">unit</a>*) { }</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  };</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment">// support enumerations</span></div><div class="line"><a name="l00353"></a><span class="lineno"><a class="line" href="net_8H.html#a5f6133d2837b91b95b1ddb17f2359388">  353</a></span>&#160;<span class="preprocessor">#define HNET_ENUM_CTOR_DEF(n) n ,</span></div><div class="line"><a name="l00354"></a><span class="lineno"><a class="line" href="net_8H.html#a6b53556babab5a38dbf2464f5951628f">  354</a></span>&#160;<span class="preprocessor">#define HNET_ENUM_CTOR_CTOR(n) static const SelfT n() { return SelfT(SelfT::Enum::n); }</span></div><div class="line"><a name="l00355"></a><span class="lineno"><a class="line" href="net_8H.html#adebe83985f49b7f6ff3e2207831d3892">  355</a></span>&#160;<span class="preprocessor">#define HNET_ENUM_CTORC_SUCC(n) +1</span></div><div class="line"><a name="l00356"></a><span class="lineno"><a class="line" href="net_8H.html#a23343a1c921d78d09e19c508a52a9bc1">  356</a></span>&#160;<span class="preprocessor">#define HNET_ENUM_CTOR_STR(n) + &quot;|&quot; #n</span></div><div class="line"><a name="l00357"></a><span class="lineno"><a class="line" href="net_8H.html#a4145abc5827fdd36d84466a4a6afca7c">  357</a></span>&#160;<span class="preprocessor">#define HNET_ENUM_CTOR_ENCODE(n) \</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="preprocessor">  ::hobbes::net::ws(#n, out); \</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="preprocessor">  ::hobbes::net::w((uint32_t)(Enum :: n), out); \</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="preprocessor">  ::hobbes::net::encode_primty(&quot;unit&quot;, out);</span></div><div class="line"><a name="l00361"></a><span class="lineno"><a class="line" href="net_8H.html#ad3920f70a8ea33cb6294a49b34fd5966">  361</a></span>&#160;<span class="preprocessor">#define HNET_ENUM_TOSTR_CASE(n) \</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="preprocessor">  case SelfT :: Enum :: n: o &lt;&lt; &quot;|&quot; #n &quot;|&quot;; break;</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div><div class="line"><a name="l00364"></a><span class="lineno"><a class="line" href="net_8H.html#a1c0fc12402886433cf5a15add67968be">  364</a></span>&#160;<span class="preprocessor">#define DEFINE_HNET_ENUM(T, CTORS...) \</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="preprocessor">  struct T { \</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="preprocessor">    typedef void is_hnet_enum; \</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="preprocessor">    enum class Enum : uint32_t { \</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="preprocessor">      _HNET_MAP(HNET_ENUM_CTOR_DEF, CTORS) \</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="preprocessor">      COUNT \</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="preprocessor">    }; \</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="preprocessor">    Enum value; \</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="preprocessor">    T() : value() { } \</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="preprocessor">    T(Enum v) : value(v) { } \</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="preprocessor">    T&amp; operator=(Enum v) { this-&gt;value = v; return *this; } \</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="preprocessor">    operator Enum() { return this-&gt;value; } \</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="preprocessor">    typedef T SelfT; \</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="preprocessor">    _HNET_MAP(HNET_ENUM_CTOR_CTOR, CTORS) \</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="preprocessor">    static void encode(::hobbes::net::bytes* out) { \</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="preprocessor">      ::hobbes::net::w(_HNET_TYCTOR_VARIANT, out); \</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="preprocessor">      ::hobbes::net::w((size_t)(0 _HNET_MAP(HNET_ENUM_CTORC_SUCC, CTORS)), out); \</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="preprocessor">      _HNET_MAP(HNET_ENUM_CTOR_ENCODE, CTORS); \</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="preprocessor">    } \</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="preprocessor">    static std::string describe() { \</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="preprocessor">      return (std::string(&quot;&quot;) _HNET_MAP(HNET_ENUM_CTOR_STR, CTORS)).substr(1); \</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="preprocessor">    } \</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="preprocessor">    bool operator==(const T&amp; rhs) const { return this-&gt;value == rhs.value; } \</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="preprocessor">  }; \</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="preprocessor">  inline std::ostream&amp; operator&lt;&lt;(std::ostream&amp; o, const T&amp; x) { \</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="preprocessor">    typedef T SelfT; \</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="preprocessor">    switch (x.value) { \</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="preprocessor">    _HNET_MAP(HNET_ENUM_TOSTR_CASE, CTORS) \</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="preprocessor">    default: \</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="preprocessor">      o &lt;&lt; &quot;|?|&quot;; \</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="preprocessor">      break; \</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="preprocessor">    } \</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="preprocessor">    return o; \</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="preprocessor">  }</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l00400"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__enum_01_4.html">  400</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1io.html">io</a>&lt;T, typename T::is_hnet_enum&gt; {</div><div class="line"><a name="l00401"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__enum_01_4.html#a6b3706258a7f64a5c885d4af68816981">  401</a></span>&#160;    <span class="keyword">typedef</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__enum_01_4.html#a6b3706258a7f64a5c885d4af68816981">can_memcpy</a>;</div><div class="line"><a name="l00402"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__enum_01_4.html#aa4cf6530d62680e272b2877781c78161">  402</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span>        <a class="code" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__enum_01_4.html#aa4cf6530d62680e272b2877781c78161">encode</a>(bytes* <a class="code" href="netio_8H.html#a9a18f415b2912f27ae28ab8225dda5d4">out</a>)          { <a class="code" href="namespacehobbes.html#a735a44e6ab40e01f4bdbd98ee4ded4d4">T::encode</a>(out); }</div><div class="line"><a name="l00403"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__enum_01_4.html#a4a3762d727ad67e6cf7d9868bdb03cc1">  403</a></span>&#160;    <span class="keyword">static</span> std::string <a class="code" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__enum_01_4.html#a4a3762d727ad67e6cf7d9868bdb03cc1">describe</a>()                  { <span class="keywordflow">return</span> T::describe(); }</div><div class="line"><a name="l00404"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__enum_01_4.html#a34ab1f49d73381a3c313bdcb5376c8f9">  404</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">size_t</span>      <a class="code" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__enum_01_4.html#a34ab1f49d73381a3c313bdcb5376c8f9">size</a>(<span class="keyword">const</span> T&amp;)              { <span class="keywordflow">return</span> <span class="keyword">sizeof</span>(T); }</div><div class="line"><a name="l00405"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__enum_01_4.html#a8c4dc2c71b0e814001f3bc33f7b4aba1">  405</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span>        <a class="code" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__enum_01_4.html#a8c4dc2c71b0e814001f3bc33f7b4aba1">write</a>(<span class="keywordtype">int</span> s, <span class="keyword">const</span> T&amp; x)    { <a class="code" href="namespacehi.html#ade6eb55847b8c6cc62f9d82356f398fe">io&lt;uint32_t&gt;::write</a>(s, (uint32_t)x.value); }</div><div class="line"><a name="l00406"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__enum_01_4.html#aff36bb6bf0a4c4313bfad7f7aef9d8e6">  406</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span>        <a class="code" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__enum_01_4.html#aff36bb6bf0a4c4313bfad7f7aef9d8e6">read</a>(<span class="keywordtype">int</span> s, T* x)           { <a class="code" href="namespacehog.html#a69806acabf162cbe9803ada209348f96">io&lt;uint32_t&gt;::read</a>(s, (uint32_t*)&amp;x-&gt;value); }</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div><div class="line"><a name="l00408"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__enum_01_4.html#aa69d953c34c36571f57ae0566022a06b">  408</a></span>&#160;    <span class="keyword">typedef</span> uint8_t <a class="code" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__enum_01_4.html#aa69d953c34c36571f57ae0566022a06b">async_read_state</a>;</div><div class="line"><a name="l00409"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__enum_01_4.html#a0d26e13cb59fd5e6735311e0c12c9a9b">  409</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__enum_01_4.html#a0d26e13cb59fd5e6735311e0c12c9a9b">prepare</a>(uint8_t* o) { *o = 0; }</div><div class="line"><a name="l00410"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__enum_01_4.html#a047e62bb9b46dab42e36238cbfbd2b4a">  410</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__enum_01_4.html#a047e62bb9b46dab42e36238cbfbd2b4a">accum</a>(<span class="keywordtype">int</span> s, uint8_t* o, T* x) { *o += <a class="code" href="namespacehobbes_1_1net.html#a393f1251dceafa382796c81887d1b09b">recvDataPartial</a>(s, ((uint8_t*)x) + *o, <span class="keyword">sizeof</span>(uint32_t) - *o); <span class="keywordflow">return</span> *o == <span class="keyword">sizeof</span>(uint32_t); }</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  };</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment">// support variants (with and without explicit constructor names)</span></div><div class="line"><a name="l00414"></a><span class="lineno"><a class="line" href="net_8H.html#a0c956727521ecdc093e92d6b778fce57">  414</a></span>&#160;<span class="preprocessor">#define DEFINE_HNET_VARIANT_GEN(T, VDECL, VCTORS, VCOPY, VDESTROY, CTORCOUNT, VENCODE, VDESC, VWRITE, VREAD, VVISITCASE, VEQCASE, CTAGS, CDATA, CAIOSTATES, CAIOSTATEINIT, CAIOREAD) \</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="preprocessor">  template &lt;typename R&gt; \</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="preprocessor">    struct T##Visitor { \</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="preprocessor">      VDECL \</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="preprocessor">    }; \</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="preprocessor">  struct T { \</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="preprocessor">    typedef void is_hnet_variant; \</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="preprocessor">    typedef T SelfT; \</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="preprocessor">    T() : tag(Enum::COUNT) { } \</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="preprocessor">    VCTORS \</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="preprocessor">    T(const T&amp; rhs) : tag(rhs.tag) { \</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="preprocessor">      switch (this-&gt;tag) { \</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="preprocessor">      VCOPY \</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="preprocessor">      default: break; \</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="preprocessor">      } \</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="preprocessor">    } \</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="preprocessor">    ~T() { \</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="preprocessor">      switch (this-&gt;tag) { \</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="preprocessor">      VDESTROY \</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="preprocessor">      default: break; \</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="preprocessor">      } \</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="preprocessor">    } \</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="preprocessor">    T&amp; operator=(const T&amp; rhs) { \</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="preprocessor">      if (this == &amp;rhs) return *this; \</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="preprocessor">      switch (this-&gt;tag) { \</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="preprocessor">      VDESTROY \</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="preprocessor">      default: break; \</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="preprocessor">      } \</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="preprocessor">      this-&gt;tag = rhs.tag; \</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="preprocessor">      switch (this-&gt;tag) { \</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="preprocessor">      VCOPY \</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="preprocessor">      default: break; \</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="preprocessor">      } \</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="preprocessor">      return *this; \</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="preprocessor">    } \</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="preprocessor">    static void encode(::hobbes::net::bytes* out) { \</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="preprocessor">      ::hobbes::net::w(_HNET_TYCTOR_VARIANT, out); \</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="preprocessor">      ::hobbes::net::w((size_t)(0 CTORCOUNT), out); \</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="preprocessor">      VENCODE; \</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="preprocessor">    } \</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="preprocessor">    static std::string describe() { \</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="preprocessor">      return &quot;|&quot; + (std::string(&quot;&quot;) VDESC).substr(1) + &quot;|&quot;; \</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="preprocessor">    } \</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="preprocessor">    void write(int s) const { \</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="preprocessor">      switch (this-&gt;tag) { \</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="preprocessor">      VWRITE \</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="preprocessor">      default: break; \</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="preprocessor">      } \</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="preprocessor">    } \</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="preprocessor">    void read(int s) { \</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="preprocessor">      switch (this-&gt;tag) { \</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="preprocessor">      VDESTROY \</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="preprocessor">      default: break; \</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="preprocessor">      } \</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="preprocessor">      this-&gt;tag = Enum::COUNT; \</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="preprocessor">      ::hobbes::net::io&lt;uint32_t&gt;::read(s, (uint32_t*)&amp;this-&gt;tag); \</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="preprocessor">      switch (this-&gt;tag) { \</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="preprocessor">      VREAD \</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="preprocessor">      default: break; \</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="preprocessor">      } \</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="preprocessor">    } \</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="preprocessor">    template &lt;typename R&gt; \</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="preprocessor">      R visit(const T##Visitor&lt;R&gt;&amp; v) const { \</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="preprocessor">        switch (this-&gt;tag) { \</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="preprocessor">        VVISITCASE \</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="preprocessor">        default: throw std::runtime_error(&quot;while deconstructing the &quot; #T &quot; variant, cannot decide payload type because tag is invalid&quot;); \</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="preprocessor">        } \</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="preprocessor">      } \</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="preprocessor">    bool operator==(const T&amp; rhs) const { \</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="preprocessor">      if (this-&gt;tag != rhs.tag) { \</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="preprocessor">        return false; \</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="preprocessor">      } else { \</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="preprocessor">        switch (this-&gt;tag) { \</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="preprocessor">        VEQCASE \</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="preprocessor">        default: return false; \</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="preprocessor">        } \</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="preprocessor">      } \</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="preprocessor">    } \</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="preprocessor">  private: \</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="preprocessor">    enum class Enum : uint32_t { \</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="preprocessor">      CTAGS \</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="preprocessor">      COUNT \</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="preprocessor">    }; \</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="preprocessor">    Enum tag; \</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="preprocessor">    union { \</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="preprocessor">      char data[1]; \</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="preprocessor">      CDATA \</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="preprocessor">    }; \</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="preprocessor">  public: \</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="preprocessor">    typedef ::hobbes::net::io&lt;uint32_t&gt;::async_read_state TagState; \</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="preprocessor">    union PayloadState { \</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="preprocessor">      char data[1]; \</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="preprocessor">      CAIOSTATES \</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="preprocessor">    }; \</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="preprocessor">    struct async_read_state { \</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="preprocessor">      bool         readTag; \</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="preprocessor">      TagState     tagS; \</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="preprocessor">      PayloadState payloadS; \</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="preprocessor">    }; \</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="preprocessor">    static void prepare(async_read_state* o) { o-&gt;readTag = true; ::hobbes::net::io&lt;uint32_t&gt;::prepare(&amp;o-&gt;tagS); } \</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="preprocessor">    static bool accum(int s, async_read_state* o, T* x) { \</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="preprocessor">      if (o-&gt;readTag) { \</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="preprocessor">        if (::hobbes::net::io&lt;uint32_t&gt;::accum(s, &amp;o-&gt;tagS, (uint32_t*)&amp;x-&gt;tag)) { \</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="preprocessor">          o-&gt;readTag = false; \</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="preprocessor">          switch (x-&gt;tag) { \</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="preprocessor">          CAIOSTATEINIT \</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="preprocessor">          default: break; \</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="preprocessor">          } \</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="preprocessor">        } \</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="preprocessor">      } else { \</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="preprocessor">        switch (x-&gt;tag) { \</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="preprocessor">        CAIOREAD \</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="preprocessor">        default: break; \</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="preprocessor">        } \</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="preprocessor">      } \</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="preprocessor">      return false; \</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="preprocessor">    } \</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="preprocessor">  }</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment">// (with implicit ctor names)</span></div><div class="line"><a name="l00534"></a><span class="lineno"><a class="line" href="net_8H.html#a7f2ff5eab953522d5d1a89303d28cd2e">  534</a></span>&#160;<span class="preprocessor">#define HNET_VARIANT_CTOR(n, t) static SelfT n(const t &amp; x) { SelfT r; r.tag = Enum::tag_##n; new (r.data) t(x); return r; }</span></div><div class="line"><a name="l00535"></a><span class="lineno"><a class="line" href="net_8H.html#a5c109a7b7f1fe95944275e4cd2eff682">  535</a></span>&#160;<span class="preprocessor">#define HNET_VARIANT_CTOR_STR(n, t) + &quot;,&quot; #n &quot;:&quot; + ::hobbes::net::io&lt; t &gt;::describe()</span></div><div class="line"><a name="l00536"></a><span class="lineno"><a class="line" href="net_8H.html#a4c4a547d2fe93a261c555527f9c55c0a">  536</a></span>&#160;<span class="preprocessor">#define HNET_VARIANT_CTOR_TAG(n, t) tag_##n,</span></div><div class="line"><a name="l00537"></a><span class="lineno"><a class="line" href="net_8H.html#af8d7571288e9c2829f272e9151e64473">  537</a></span>&#160;<span class="preprocessor">#define HNET_VARIANT_WRITE_CASE(n, t) case Enum::tag_##n: ::hobbes::net::io&lt;int&gt;::write(s, (int)this-&gt;tag); ::hobbes::net::io&lt; t &gt;::write(s, this-&gt;n##_data); break;</span></div><div class="line"><a name="l00538"></a><span class="lineno"><a class="line" href="net_8H.html#a7502e47f969dfed24b0e9a6a43b4b37d">  538</a></span>&#160;<span class="preprocessor">#define HNET_VARIANT_READ_CASE(n, t)  case Enum::tag_##n: new (this-&gt;data) t(); ::hobbes::net::io&lt; t &gt;::read(s, &amp;this-&gt;n##_data); break;</span></div><div class="line"><a name="l00539"></a><span class="lineno"><a class="line" href="net_8H.html#a9dc64aefba234cdd859db808c7381dea">  539</a></span>&#160;<span class="preprocessor">#define HNET_VARIANT_PCOPY(n, t)      case Enum::tag_##n: new (this-&gt;data) t(rhs.n##_data); break;</span></div><div class="line"><a name="l00540"></a><span class="lineno"><a class="line" href="net_8H.html#a8ad3e757e6ad1d4434c2458b2f559620">  540</a></span>&#160;<span class="preprocessor">#define HNET_VARIANT_PDESTROY(n, t)   case Enum::tag_##n: { typedef t __DT; ((__DT*)&amp;this-&gt;n##_data)-&gt;~__DT(); } break;</span></div><div class="line"><a name="l00541"></a><span class="lineno"><a class="line" href="net_8H.html#ac151279c7a670b4bd316dd79ba6d74cc">  541</a></span>&#160;<span class="preprocessor">#define HNET_VARIANT_SUCC(n, t) +1</span></div><div class="line"><a name="l00542"></a><span class="lineno"><a class="line" href="net_8H.html#afa7397aeafac675eef69c8202c692088">  542</a></span>&#160;<span class="preprocessor">#define HNET_VARIANT_CTOR_OPAQUEDATA(n, t) t n##_data;</span></div><div class="line"><a name="l00543"></a><span class="lineno"><a class="line" href="net_8H.html#a63f72f4dc39d9776aab12705fc2a366a">  543</a></span>&#160;<span class="preprocessor">#define HNET_VARIANT_CTOR_ENCODE(n, t)      \</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="preprocessor">  ::hobbes::net::ws(#n, out); \</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="preprocessor">  ::hobbes::net::w((uint32_t)Enum::tag_##n, out); \</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="preprocessor">  ::hobbes::net::io&lt; t &gt;::encode(out);</span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div><div class="line"><a name="l00548"></a><span class="lineno"><a class="line" href="net_8H.html#a219b99a4883171a0446c3295aeaa46f3">  548</a></span>&#160;<span class="preprocessor">#define HNET_VARIANT_VDECL(n, t) virtual R n(const t &amp; x) const = 0;</span></div><div class="line"><a name="l00549"></a><span class="lineno"><a class="line" href="net_8H.html#a5d4f6fbcc3458e114e986e5da67b6bda">  549</a></span>&#160;<span class="preprocessor">#define HNET_VARIANT_VCASE(n, t) case Enum::tag_##n: return v.n (this-&gt;n##_data);</span></div><div class="line"><a name="l00550"></a><span class="lineno"><a class="line" href="net_8H.html#a590a282cb042e78ed1c5d0c5a323f35a">  550</a></span>&#160;<span class="preprocessor">#define HNET_VARIANT_EQCASE(n, t) case Enum::tag_##n: return (this-&gt;n##_data == rhs.n##_data);</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div><div class="line"><a name="l00552"></a><span class="lineno"><a class="line" href="net_8H.html#a3c9b8b0df0ec5fae179502cade0042f2">  552</a></span>&#160;<span class="preprocessor">#define HNET_VARIANT_AIOSTATE_DATA(n, t) ::hobbes::net::io&lt;t&gt;::async_read_state n##_aioS;</span></div><div class="line"><a name="l00553"></a><span class="lineno"><a class="line" href="net_8H.html#ab5add2644977544e9b1a472958958b0e">  553</a></span>&#160;<span class="preprocessor">#define HNET_VARIANT_AIOSTATE_INIT(n, t) case Enum::tag_##n: { new (o-&gt;payloadS.data) ::hobbes::net::io&lt;t&gt;::async_read_state(); ::hobbes::net::io&lt;t&gt;::prepare(&amp;o-&gt;payloadS.n##_aioS); new (x-&gt;data) t(); } break;</span></div><div class="line"><a name="l00554"></a><span class="lineno"><a class="line" href="net_8H.html#af89f7bebc21c5f6771420fa0dac742d8">  554</a></span>&#160;<span class="preprocessor">#define HNET_VARIANT_AIOSTATE_ACCUM(n, t) case Enum::tag_##n: return ::hobbes::net::io&lt;t&gt;::accum(s, &amp;o-&gt;payloadS.n##_aioS, &amp;x-&gt;n##_data);</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div><div class="line"><a name="l00556"></a><span class="lineno"><a class="line" href="net_8H.html#ae0c5a25a286d5280bb57bdad913f3c62">  556</a></span>&#160;<span class="preprocessor">#define DEFINE_HNET_VARIANT(T, CTORS...) \</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="preprocessor">  DEFINE_HNET_VARIANT_GEN(T, _HNET_MAP(HNET_VARIANT_VDECL, CTORS), _HNET_MAP(HNET_VARIANT_CTOR, CTORS), _HNET_MAP(HNET_VARIANT_PCOPY, CTORS), _HNET_MAP(HNET_VARIANT_PDESTROY, CTORS), _HNET_MAP(HNET_VARIANT_SUCC, CTORS), _HNET_MAP(HNET_VARIANT_CTOR_ENCODE, CTORS), _HNET_MAP(HNET_VARIANT_CTOR_STR, CTORS), _HNET_MAP(HNET_VARIANT_WRITE_CASE, CTORS), _HNET_MAP(HNET_VARIANT_READ_CASE, CTORS), _HNET_MAP(HNET_VARIANT_VCASE, CTORS), _HNET_MAP(HNET_VARIANT_EQCASE, CTORS), _HNET_MAP(HNET_VARIANT_CTOR_TAG, CTORS), _HNET_MAP(HNET_VARIANT_CTOR_OPAQUEDATA, CTORS), _HNET_MAP(HNET_VARIANT_AIOSTATE_DATA, CTORS), _HNET_MAP(HNET_VARIANT_AIOSTATE_INIT, CTORS), _HNET_MAP(HNET_VARIANT_AIOSTATE_ACCUM, CTORS))</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="comment">// (with explicit ctor names)</span></div><div class="line"><a name="l00560"></a><span class="lineno"><a class="line" href="net_8H.html#a6d25a560e1e82bef1372c47e12af1d34">  560</a></span>&#160;<span class="preprocessor">#define HNET_VARIANT_LBL_CTOR(n, lbl, t) static SelfT n(const t &amp; x) { SelfT r; r.tag = Enum::tag_##n; new (r.data) t(x); return r; }</span></div><div class="line"><a name="l00561"></a><span class="lineno"><a class="line" href="net_8H.html#ac6391f3e63fcc73448ce5346e4c1b36d">  561</a></span>&#160;<span class="preprocessor">#define HNET_VARIANT_LBL_CTOR_STR(n, lbl, t) + &quot;,&quot; #n &quot;:&quot; + ::hobbes::net::io&lt; t &gt;::describe()</span></div><div class="line"><a name="l00562"></a><span class="lineno"><a class="line" href="net_8H.html#a06c30a96aca502289123c70cf3456346">  562</a></span>&#160;<span class="preprocessor">#define HNET_VARIANT_LBL_CTOR_TAG(n, lbl, t) tag_##n,</span></div><div class="line"><a name="l00563"></a><span class="lineno"><a class="line" href="net_8H.html#a903c16e478069aa8e94c1a4e06c723ee">  563</a></span>&#160;<span class="preprocessor">#define HNET_VARIANT_LBL_WRITE_CASE(n, lbl, t) case Enum::tag_##n: ::hobbes::net::io&lt;int&gt;::write(s, (int)this-&gt;tag); ::hobbes::net::io&lt; t &gt;::write(s, this-&gt;n##_data); break;</span></div><div class="line"><a name="l00564"></a><span class="lineno"><a class="line" href="net_8H.html#a70fcce8356772d1608aa2f110349db55">  564</a></span>&#160;<span class="preprocessor">#define HNET_VARIANT_LBL_READ_CASE(n, lbl, t)  case Enum::tag_##n: new (this-&gt;data) t(); ::hobbes::net::io&lt; t &gt;::read(s, &amp;this-&gt;n##_data); break;</span></div><div class="line"><a name="l00565"></a><span class="lineno"><a class="line" href="net_8H.html#aa05b2e3aa281c9283d0b42d626a40a76">  565</a></span>&#160;<span class="preprocessor">#define HNET_VARIANT_LBL_PCOPY(n, lbl, t)      case Enum::tag_##n: new (this-&gt;data) t(rhs.n##_data); break;</span></div><div class="line"><a name="l00566"></a><span class="lineno"><a class="line" href="net_8H.html#a285df28420a13767d098f6fde33c2ef3">  566</a></span>&#160;<span class="preprocessor">#define HNET_VARIANT_LBL_PDESTROY(n, lbl, t)   case Enum::tag_##n: { typedef t __DT; ((__DT*)&amp;this-&gt;n##_data)-&gt;~__DT(); } break;</span></div><div class="line"><a name="l00567"></a><span class="lineno"><a class="line" href="net_8H.html#ac2b4740bd8da7213120772a03ee8121c">  567</a></span>&#160;<span class="preprocessor">#define HNET_VARIANT_LBL_SUCC(n, lbl, t) +1</span></div><div class="line"><a name="l00568"></a><span class="lineno"><a class="line" href="net_8H.html#a7666d010e53545132f35d661871e683f">  568</a></span>&#160;<span class="preprocessor">#define HNET_VARIANT_LBL_CTOR_OPAQUEDATA(n, lbl, t) t n##_data;</span></div><div class="line"><a name="l00569"></a><span class="lineno"><a class="line" href="net_8H.html#a02868664ed53196b577d83366c2f6260">  569</a></span>&#160;<span class="preprocessor">#define HNET_VARIANT_LBL_CTOR_ENCODE(n, lbl, t) \</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="preprocessor">  ::hobbes::net::ws(#lbl, out); \</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="preprocessor">  ::hobbes::net::w((uint32_t)Enum::tag_##n, out); \</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="preprocessor">  ::hobbes::net::io&lt; t &gt;::encode(out);</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div><div class="line"><a name="l00574"></a><span class="lineno"><a class="line" href="net_8H.html#aabf68ef437c9d8197e22aebcd7b34595">  574</a></span>&#160;<span class="preprocessor">#define HNET_VARIANT_LBL_VDECL(n, lbl, t) virtual R n(const t &amp; x) const = 0;</span></div><div class="line"><a name="l00575"></a><span class="lineno"><a class="line" href="net_8H.html#adae78b0fcb39aa72a5ef1e04e0815783">  575</a></span>&#160;<span class="preprocessor">#define HNET_VARIANT_LBL_VCASE(n, lbl, t) case Enum::tag_##n: return v. n (this-&gt;n##_data);</span></div><div class="line"><a name="l00576"></a><span class="lineno"><a class="line" href="net_8H.html#a48d9fb01b134c791b870a00dca34024b">  576</a></span>&#160;<span class="preprocessor">#define HNET_VARIANT_LBL_EQCASE(n, lbl, t) case Enum::tag_##n: return (this-&gt;n##_data == rhs.n##_data);</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div><div class="line"><a name="l00578"></a><span class="lineno"><a class="line" href="net_8H.html#a68cde0d318fb77723686b2a1e0ccf45f">  578</a></span>&#160;<span class="preprocessor">#define HNET_VARIANT_LBL_CTOR_AIOSTATE_DATA(n, lbl, t) ::hobbes::net::io&lt;t&gt;::async_read_state n##_aioS;</span></div><div class="line"><a name="l00579"></a><span class="lineno"><a class="line" href="net_8H.html#a16f956da8f0ddfabfd091327eca5557b">  579</a></span>&#160;<span class="preprocessor">#define HNET_VARIANT_LBL_CTOR_AIOSTATE_INIT(n, lbl, t) case Enum::tag_##n: { new (o-&gt;payloadS.data) ::hobbes::net::io&lt;t&gt;::async_read_state(); ::hobbes::net::io&lt;t&gt;::prepare(&amp;o-&gt;payloadS.n##_aioS); new (x-&gt;data) t(); } break;</span></div><div class="line"><a name="l00580"></a><span class="lineno"><a class="line" href="net_8H.html#a74cfdb5adb348e48aca7b2c0437bd5fe">  580</a></span>&#160;<span class="preprocessor">#define HNET_VARIANT_LBL_CTOR_AIOSTATE_ACCUM(n, lbl, t) case Enum::tag_##n: return ::hobbes::net::io&lt;t&gt;::accum(s, &amp;o-&gt;payloadS.n##_aioS, &amp;x-&gt;n##_data);</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div><div class="line"><a name="l00582"></a><span class="lineno"><a class="line" href="net_8H.html#a144b6532e39cf90e0e6e3140666f2d88">  582</a></span>&#160;<span class="preprocessor">#define DEFINE_HNET_VARIANT_WITH_LABELS(T, CTORS...) \</span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="preprocessor">  DEFINE_HNET_VARIANT_GEN(T, _HNET_MAP(HNET_VARIANT_LBL_VDECL, CTORS), _HNET_MAP(HNET_VARIANT_LBL_CTOR, CTORS), _HNET_MAP(HNET_VARIANT_LBL_PCOPY, CTORS), _HNET_MAP(HNET_VARIANT_LBL_PDESTROY, CTORS), _HNET_MAP(HNET_VARIANT_LBL_SUCC, CTORS), _HNET_MAP(HNET_VARIANT_LBL_CTOR_ENCODE, CTORS), _HNET_MAP(HNET_VARIANT_LBL_CTOR_STR, CTORS), _HNET_MAP(HNET_VARIANT_LBL_WRITE_CASE, CTORS), _HNET_MAP(HNET_VARIANT_LBL_READ_CASE, CTORS), _HNET_MAP(HNET_VARIANT_LBL_VCASE, CTORS), _HNET_MAP(HNET_VARIANT_LBL_EQCASE, CTORS), _HNET_MAP(HNET_VARIANT_LBL_CTOR_TAG, CTORS), _HNET_MAP(HNET_VARIANT_LBL_CTOR_OPAQUEDATA, CTORS), _HNET_MAP(HNET_VARIANT_LBL_CTOR_AIOSTATE_DATA, CTORS), _HNET_MAP(HNET_VARIANT_LBL_CTOR_AIOSTATE_INIT, CTORS), _HNET_MAP(HNET_VARIANT_LBL_CTOR_AIOSTATE_ACCUM, CTORS))</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l00586"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__variant_01_4.html">  586</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1io.html">io</a>&lt;T, typename T::is_hnet_variant&gt; {</div><div class="line"><a name="l00587"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__variant_01_4.html#a2aacf585fab237533f818db18d817c0a">  587</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span>        <a class="code" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__variant_01_4.html#a2aacf585fab237533f818db18d817c0a">encode</a>(bytes* <a class="code" href="netio_8H.html#a9a18f415b2912f27ae28ab8225dda5d4">out</a>)       { <a class="code" href="namespacehobbes.html#a735a44e6ab40e01f4bdbd98ee4ded4d4">T::encode</a>(out); }</div><div class="line"><a name="l00588"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__variant_01_4.html#a4007871bf0964b633840f0b87f8c4d77">  588</a></span>&#160;    <span class="keyword">static</span> std::string <a class="code" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__variant_01_4.html#a4007871bf0964b633840f0b87f8c4d77">describe</a>()               { <span class="keywordflow">return</span> T::describe(); }</div><div class="line"><a name="l00589"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__variant_01_4.html#aa596461d484320e33f1f507774b45e27">  589</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span>        <a class="code" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__variant_01_4.html#aa596461d484320e33f1f507774b45e27">write</a>(<span class="keywordtype">int</span> s, <span class="keyword">const</span> T&amp; x) { <span class="keywordflow">return</span> x.write(s); }</div><div class="line"><a name="l00590"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__variant_01_4.html#ae09c812158077636fc612e47543be2ae">  590</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span>        <a class="code" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__variant_01_4.html#ae09c812158077636fc612e47543be2ae">read</a>(<span class="keywordtype">int</span> s, T* x)        { <span class="keywordflow">return</span> x-&gt;read(s); }</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="comment">// async reading of variants</span></div><div class="line"><a name="l00593"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__variant_01_4.html#aba5fcaa3cf54455a9c1c6b661e58a170">  593</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> T::async_read_state <a class="code" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__variant_01_4.html#aba5fcaa3cf54455a9c1c6b661e58a170">async_read_state</a>;</div><div class="line"><a name="l00594"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__variant_01_4.html#a638824ace36d3b6a2f00c8459e879f68">  594</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__variant_01_4.html#a638824ace36d3b6a2f00c8459e879f68">prepare</a>(async_read_state* o) { T::prepare(o); }</div><div class="line"><a name="l00595"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__variant_01_4.html#a510c75fd84d0f3d851ea999a8b024d7b">  595</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__variant_01_4.html#a510c75fd84d0f3d851ea999a8b024d7b">accum</a>(<span class="keywordtype">int</span> s, async_read_state* o, T* x) { <span class="keywordflow">return</span> T::accum(s, o, x); }</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  };</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="comment">// support pairs</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> U, <span class="keyword">typename</span> V&gt;</div><div class="line"><a name="l00600"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4.html">  600</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1io.html">io</a>&lt;<a class="code" href="namespacestd.html">std</a>::<a class="code" href="namespacehobbes_1_1str.html#ae0eccb44dca0257fa0e76fb9db052df4">pair</a>&lt;U,V&gt;&gt; {</div><div class="line"><a name="l00601"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4.html#a0b631dd6860dd7d416fcb364ac9a5681">  601</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4.html#a0b631dd6860dd7d416fcb364ac9a5681">encode</a>(bytes* <a class="code" href="netio_8H.html#a9a18f415b2912f27ae28ab8225dda5d4">out</a>) {</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      <a class="code" href="namespacehobbes_1_1net.html#a5c4c0f003879ad2770dfd6a181a2b655">w</a>(<a class="code" href="net_8H.html#af44cc134ba320bce6bdba2b14e81342e">_HNET_TYCTOR_STRUCT</a>, out);</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;      <a class="code" href="namespacehobbes_1_1net.html#a5c4c0f003879ad2770dfd6a181a2b655">w</a>((<span class="keywordtype">size_t</span>)2, out);</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;      </div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      <a class="code" href="namespacehobbes_1_1net.html#a05034c768dd1231859bbb44a45a4306d">ws</a>(<span class="stringliteral">&quot;.f0&quot;</span>, out);</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;      <a class="code" href="namespacehobbes_1_1net.html#a5c4c0f003879ad2770dfd6a181a2b655">w</a>((<span class="keywordtype">int</span>)-1, out);</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;      <a class="code" href="namespacehobbes.html#a735a44e6ab40e01f4bdbd98ee4ded4d4">io&lt;U&gt;::encode</a>(out);</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;      <a class="code" href="namespacehobbes_1_1net.html#a05034c768dd1231859bbb44a45a4306d">ws</a>(<span class="stringliteral">&quot;.f1&quot;</span>, out);</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      <a class="code" href="namespacehobbes_1_1net.html#a5c4c0f003879ad2770dfd6a181a2b655">w</a>((<span class="keywordtype">int</span>)-1, out);</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;      <a class="code" href="namespacehobbes.html#a735a44e6ab40e01f4bdbd98ee4ded4d4">io&lt;V&gt;::encode</a>(out);</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    }</div><div class="line"><a name="l00613"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4.html#ae00d0c3a8a6c5d48294e7134f1731355">  613</a></span>&#160;    <span class="keyword">static</span> std::string <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4.html#ae00d0c3a8a6c5d48294e7134f1731355">describe</a>() {</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;(&quot;</span> + <a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;U&gt;::describe</a>() + <span class="stringliteral">&quot;*&quot;</span> + <a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;V&gt;::describe</a>() + <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    }</div><div class="line"><a name="l00616"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4.html#acf2a1777a02525549406d41a2e57479f">  616</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4.html#acf2a1777a02525549406d41a2e57479f">write</a>(<span class="keywordtype">int</span> s, <span class="keyword">const</span> std::pair&lt;U,V&gt;&amp; p) {</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      <a class="code" href="namespacehi.html#ade6eb55847b8c6cc62f9d82356f398fe">io&lt;U&gt;::write</a>(s, p.first);</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      <a class="code" href="namespacehi.html#ade6eb55847b8c6cc62f9d82356f398fe">io&lt;V&gt;::write</a>(s, p.second);</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    }</div><div class="line"><a name="l00620"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4.html#a02a7f1377bd1bce311171708b44b8751">  620</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4.html#a02a7f1377bd1bce311171708b44b8751">read</a>(<span class="keywordtype">int</span> s, std::pair&lt;U,V&gt;* p) {</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <a class="code" href="namespacehog.html#a69806acabf162cbe9803ada209348f96">io&lt;U&gt;::read</a>(s, &amp;p-&gt;first);</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      <a class="code" href="namespacehog.html#a69806acabf162cbe9803ada209348f96">io&lt;V&gt;::read</a>(s, &amp;p-&gt;second);</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    }</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <span class="comment">// async reading of pairs</span></div><div class="line"><a name="l00626"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4_1_1async__read__state.html">  626</a></span>&#160;    <span class="keyword">struct </span>async_read_state {</div><div class="line"><a name="l00627"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4_1_1async__read__state.html#a75eef2af9ff03d07023410b6bce9ee4f">  627</a></span>&#160;      <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;U&gt;::async_read_state</a> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4_1_1async__read__state.html#a75eef2af9ff03d07023410b6bce9ee4f">Ustate</a>;</div><div class="line"><a name="l00628"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4_1_1async__read__state.html#ab2d0b64da4e5095eb69701719bd9008b">  628</a></span>&#160;      <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;V&gt;::async_read_state</a> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4_1_1async__read__state.html#ab2d0b64da4e5095eb69701719bd9008b">Vstate</a>;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div><div class="line"><a name="l00630"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4_1_1async__read__state.html#a5d0b73b1d71240668c89457eea0e6c64">  630</a></span>&#160;      <span class="keywordtype">bool</span>   <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4_1_1async__read__state.html#a5d0b73b1d71240668c89457eea0e6c64">readFirst</a>;</div><div class="line"><a name="l00631"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4_1_1async__read__state.html#afb298bca50f39cd6754ca3d8c6c5c1dc">  631</a></span>&#160;      Ustate <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4_1_1async__read__state.html#afb298bca50f39cd6754ca3d8c6c5c1dc">fstState</a>;</div><div class="line"><a name="l00632"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4_1_1async__read__state.html#a13d8ab2ee5476ccf2ff8d1d77d801399">  632</a></span>&#160;      Vstate <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4_1_1async__read__state.html#a13d8ab2ee5476ccf2ff8d1d77d801399">sndState</a>;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    };</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;</div><div class="line"><a name="l00635"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4.html#a31704c5b3acb65f0ed2b3348913820ab">  635</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4.html#a31704c5b3acb65f0ed2b3348913820ab">prepare</a>(async_read_state* o) {</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;      o-&gt;readFirst = <span class="keyword">true</span>;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;      <a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;U&gt;::prepare</a>(&amp;o-&gt;fstState);</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;      <a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;V&gt;::prepare</a>(&amp;o-&gt;sndState);</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    }</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div><div class="line"><a name="l00641"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4.html#ac03c74a9098720db0342cd2aab7e0141">  641</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4.html#ac03c74a9098720db0342cd2aab7e0141">accum</a>(<span class="keywordtype">int</span> s, async_read_state* o, std::pair&lt;U, V&gt;* x) {</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;      <span class="keywordflow">if</span> (o-&gt;readFirst) {</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;U&gt;::accum</a>(s, &amp;o-&gt;fstState, &amp;x-&gt;first)) {</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;          o-&gt;readFirst = <span class="keyword">false</span>;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        }</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;V&gt;::accum</a>(s, &amp;o-&gt;sndState, &amp;x-&gt;second)) {</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        }</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      }</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    }</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  };</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="comment">// support vectors of mem-copyable type</span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l00657"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4.html">  657</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1io.html">io</a>&lt;<a class="code" href="namespacestd.html">std</a>::vector&lt;T&gt;, typename <a class="code" href="structhobbes_1_1net_1_1io.html">io</a>&lt;T&gt;::can_memcpy&gt; {</div><div class="line"><a name="l00658"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4.html#ae09ec82649d8165b8ebdff31ec77147f">  658</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4.html#ae09ec82649d8165b8ebdff31ec77147f">encode</a>(bytes* <a class="code" href="netio_8H.html#a9a18f415b2912f27ae28ab8225dda5d4">out</a>) { <a class="code" href="namespacehobbes_1_1net.html#a5c4c0f003879ad2770dfd6a181a2b655">w</a>(<a class="code" href="net_8H.html#a9a8e86d83dbcc67c9af615f3d75a7e3d">_HNET_TYCTOR_ARR</a>, out); <a class="code" href="namespacehobbes.html#a735a44e6ab40e01f4bdbd98ee4ded4d4">io&lt;T&gt;::encode</a>(out); }</div><div class="line"><a name="l00659"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4.html#af81dad7ba87aefdaabbe3cae15643860">  659</a></span>&#160;    <span class="keyword">static</span> std::string <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4.html#af81dad7ba87aefdaabbe3cae15643860">describe</a>() { <span class="keywordflow">return</span> <span class="stringliteral">&quot;[&quot;</span> + <a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;T&gt;::describe</a>() + <span class="stringliteral">&quot;]&quot;</span>; }</div><div class="line"><a name="l00660"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4.html#a888ed9874afd48ca282989c70fbbf4fd">  660</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4.html#a888ed9874afd48ca282989c70fbbf4fd">write</a>(<span class="keywordtype">int</span> s, <span class="keyword">const</span> std::vector&lt;T&gt;&amp; x) { <span class="keywordtype">size_t</span> n = x.size(); <a class="code" href="namespacehi.html#ade6eb55847b8c6cc62f9d82356f398fe">io&lt;size_t&gt;::write</a>(s, n); <span class="keywordflow">if</span> (n &gt; 0) <a class="code" href="namespacehobbes_1_1net.html#a54111fdc38eb6ad569a64973a1c866e9">sendData</a>(s, (<span class="keyword">const</span> uint8_t*)&amp;x[0], <span class="keyword">sizeof</span>(T) * n); }</div><div class="line"><a name="l00661"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4.html#a0f37d48a8285dbbbb4306960c8c563e9">  661</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4.html#a0f37d48a8285dbbbb4306960c8c563e9">read</a>(<span class="keywordtype">int</span> s, std::vector&lt;T&gt;* x) { <span class="keywordtype">size_t</span> n = 0; <a class="code" href="namespacehog.html#a69806acabf162cbe9803ada209348f96">io&lt;size_t&gt;::read</a>(s, &amp;n); x-&gt;resize(n); <span class="keywordflow">if</span> (n &gt; 0) <a class="code" href="namespacehobbes_1_1net.html#a237ffac2d20d3f18d8c50934a93e6cf7">recvData</a>(s, (uint8_t*)&amp;(*x)[0], n); }</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="comment">// async reading of mem-copyable vectors</span></div><div class="line"><a name="l00664"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4_1_1async__read__state.html">  664</a></span>&#160;    <span class="keyword">struct </span>async_read_state {</div><div class="line"><a name="l00665"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4_1_1async__read__state.html#a334268f3109e206ee43ddf4f9e23c096">  665</a></span>&#160;      <span class="keyword">typedef</span> <a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;size_t&gt;::async_read_state</a> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4_1_1async__read__state.html#a334268f3109e206ee43ddf4f9e23c096">LenS</a>;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;</div><div class="line"><a name="l00667"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4_1_1async__read__state.html#a24b50c29116c8217ff3d5384bd336d0e">  667</a></span>&#160;      <span class="keywordtype">bool</span>   <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4_1_1async__read__state.html#a24b50c29116c8217ff3d5384bd336d0e">readLen</a>;</div><div class="line"><a name="l00668"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4_1_1async__read__state.html#aa7e459e5a82d66969da708d63a3bdff1">  668</a></span>&#160;      LenS   <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4_1_1async__read__state.html#aa7e459e5a82d66969da708d63a3bdff1">lenS</a>;</div><div class="line"><a name="l00669"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4_1_1async__read__state.html#a515d8015057651abd7aa53473e8b2098">  669</a></span>&#160;      <span class="keywordtype">size_t</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4_1_1async__read__state.html#a515d8015057651abd7aa53473e8b2098">bytesRead</a>;</div><div class="line"><a name="l00670"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4_1_1async__read__state.html#a117ce8aa109322d9e9e26c3c3e33b69d">  670</a></span>&#160;      <span class="keywordtype">size_t</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4_1_1async__read__state.html#a117ce8aa109322d9e9e26c3c3e33b69d">byteLen</a>;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    };</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div><div class="line"><a name="l00673"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4.html#af666b76c08641f84a72ce100b370b9bb">  673</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4.html#af666b76c08641f84a72ce100b370b9bb">prepare</a>(async_read_state* o) {</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;      o-&gt;readLen = <span class="keyword">true</span>;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;      <a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;size_t&gt;::prepare</a>(&amp;o-&gt;lenS);</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    }</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;</div><div class="line"><a name="l00678"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4.html#a9df9958f157dad94a1f78c80f302614d">  678</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4.html#a9df9958f157dad94a1f78c80f302614d">accum</a>(<span class="keywordtype">int</span> s, async_read_state* o, std::vector&lt;T&gt;* x) {</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;      <span class="keywordflow">if</span> (o-&gt;readLen) {</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;size_t&gt;::accum</a>(s, &amp;o-&gt;lenS, &amp;o-&gt;byteLen)) {</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;          x-&gt;resize(o-&gt;byteLen);</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;          o-&gt;bytesRead = 0;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;          o-&gt;byteLen   = <span class="keyword">sizeof</span>(T) * o-&gt;byteLen;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;          o-&gt;readLen   = <span class="keyword">false</span>;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        }</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        uint8_t* buf = (uint8_t*)&amp;((*x)[0]);</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        o-&gt;bytesRead += <a class="code" href="namespacehobbes_1_1net.html#a393f1251dceafa382796c81887d1b09b">recvDataPartial</a>(s, buf + o-&gt;bytesRead, o-&gt;byteLen - o-&gt;bytesRead);</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;      }</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;      <span class="keywordflow">return</span> !o-&gt;readLen &amp;&amp; o-&gt;bytesRead == o-&gt;byteLen;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    }</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  };</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l00695"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_4_1_1type_01_4.html">  695</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1io.html">io</a>&lt;<a class="code" href="namespacestd.html">std</a>::vector&lt;T&gt;, typename <a class="code" href="structhobbes_1_1net_1_1cannot__memcpy.html">cannot_memcpy</a>&lt;T&gt;::type&gt; {</div><div class="line"><a name="l00696"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_4_1_1type_01_4.html#add8bf6053b0976669143c5331948c34b">  696</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_4_1_1type_01_4.html#add8bf6053b0976669143c5331948c34b">encode</a>(bytes* <a class="code" href="netio_8H.html#a9a18f415b2912f27ae28ab8225dda5d4">out</a>) { <a class="code" href="namespacehobbes_1_1net.html#a5c4c0f003879ad2770dfd6a181a2b655">w</a>(<a class="code" href="net_8H.html#a9a8e86d83dbcc67c9af615f3d75a7e3d">_HNET_TYCTOR_ARR</a>, out); <a class="code" href="namespacehobbes.html#a735a44e6ab40e01f4bdbd98ee4ded4d4">io&lt;T&gt;::encode</a>(out); }</div><div class="line"><a name="l00697"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_4_1_1type_01_4.html#ab9f3d8f327cb0b23a6f61194e617c39c">  697</a></span>&#160;    <span class="keyword">static</span> std::string <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_4_1_1type_01_4.html#ab9f3d8f327cb0b23a6f61194e617c39c">describe</a>() { <span class="keywordflow">return</span> <span class="stringliteral">&quot;[&quot;</span> + <a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;T&gt;::describe</a>() + <span class="stringliteral">&quot;]&quot;</span>; }</div><div class="line"><a name="l00698"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_4_1_1type_01_4.html#aa36b56b6a4491ff60b9949b7b2a981d5">  698</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_4_1_1type_01_4.html#aa36b56b6a4491ff60b9949b7b2a981d5">write</a>(<span class="keywordtype">int</span> s, <span class="keyword">const</span> std::vector&lt;T&gt;&amp; x) {</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;      <span class="keywordtype">size_t</span> n = x.size();</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;      <a class="code" href="namespacehi.html#ade6eb55847b8c6cc62f9d82356f398fe">io&lt;size_t&gt;::write</a>(s, n);</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; n; ++i) {</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        <a class="code" href="namespacehi.html#ade6eb55847b8c6cc62f9d82356f398fe">io&lt;T&gt;::write</a>(s, x[i]);</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      }</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    }</div><div class="line"><a name="l00705"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_4_1_1type_01_4.html#a1012cf6004e074403e40d61bc87bb887">  705</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_4_1_1type_01_4.html#a1012cf6004e074403e40d61bc87bb887">read</a>(<span class="keywordtype">int</span> s, std::vector&lt;T&gt;* x) {</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      <span class="keywordtype">size_t</span> n = 0;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;      <a class="code" href="namespacehog.html#a69806acabf162cbe9803ada209348f96">io&lt;size_t&gt;::read</a>(s, &amp;n);</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      x-&gt;resize(n);</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; n; ++i) {</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        <a class="code" href="namespacehog.html#a69806acabf162cbe9803ada209348f96">io&lt;T&gt;::read</a>(s, &amp;(*x)[i]);</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      }</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    }</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="comment">// async reading of vectors</span></div><div class="line"><a name="l00715"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_413907d7a41fd8b8d9d4586d80544e951.html">  715</a></span>&#160;    <span class="keyword">struct </span>async_read_state {</div><div class="line"><a name="l00716"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_413907d7a41fd8b8d9d4586d80544e951.html#a00bc9e7cc023001d0da37d4ac52ae5c0">  716</a></span>&#160;      <span class="keyword">typedef</span> <a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;size_t&gt;::async_read_state</a> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_413907d7a41fd8b8d9d4586d80544e951.html#a00bc9e7cc023001d0da37d4ac52ae5c0">LenS</a>;</div><div class="line"><a name="l00717"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_413907d7a41fd8b8d9d4586d80544e951.html#a8e968f224147fe710e0d1146e60478d4">  717</a></span>&#160;      <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;T&gt;::async_read_state</a> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_413907d7a41fd8b8d9d4586d80544e951.html#a8e968f224147fe710e0d1146e60478d4">ElemS</a>;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;</div><div class="line"><a name="l00719"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_413907d7a41fd8b8d9d4586d80544e951.html#a8748ac8c3903327b19702acbdd683393">  719</a></span>&#160;      <span class="keywordtype">bool</span>   <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_413907d7a41fd8b8d9d4586d80544e951.html#a8748ac8c3903327b19702acbdd683393">readLen</a>;</div><div class="line"><a name="l00720"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_413907d7a41fd8b8d9d4586d80544e951.html#a5e43e96a9e22b7cef8c1374d36129891">  720</a></span>&#160;      LenS   <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_413907d7a41fd8b8d9d4586d80544e951.html#a5e43e96a9e22b7cef8c1374d36129891">lenS</a>;</div><div class="line"><a name="l00721"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_413907d7a41fd8b8d9d4586d80544e951.html#a973aba081b84f7105c30d7e7853067b3">  721</a></span>&#160;      <span class="keywordtype">size_t</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_413907d7a41fd8b8d9d4586d80544e951.html#a973aba081b84f7105c30d7e7853067b3">idx</a>;</div><div class="line"><a name="l00722"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_413907d7a41fd8b8d9d4586d80544e951.html#a3e3b8493a4e2e29d017d8b439bb28ae5">  722</a></span>&#160;      ElemS  <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_413907d7a41fd8b8d9d4586d80544e951.html#a3e3b8493a4e2e29d017d8b439bb28ae5">elemS</a>;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    };</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div><div class="line"><a name="l00725"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_4_1_1type_01_4.html#a9c49c7ca72cd2b299356301654c5419c">  725</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_4_1_1type_01_4.html#a9c49c7ca72cd2b299356301654c5419c">prepare</a>(async_read_state* o) {</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;      o-&gt;readLen = <span class="keyword">true</span>;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      <a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;size_t&gt;::prepare</a>(&amp;o-&gt;lenS);</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    }</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;</div><div class="line"><a name="l00730"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_4_1_1type_01_4.html#a052f631799e3ada935f3c2ebdeab62c4">  730</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_4_1_1type_01_4.html#a052f631799e3ada935f3c2ebdeab62c4">accum</a>(<span class="keywordtype">int</span> s, async_read_state* o, std::vector&lt;T&gt;* x) {</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      <span class="keywordflow">if</span> (o-&gt;readLen) {</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;size_t&gt;::accum</a>(s, &amp;o-&gt;lenS, &amp;o-&gt;idx)) {</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;          x-&gt;resize(o-&gt;idx);</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;          o-&gt;idx     = 0;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;          o-&gt;readLen = <span class="keyword">false</span>;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;          <a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;T&gt;::prepare</a>(&amp;o-&gt;elemS);</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        }</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;T&gt;::accum</a>(s, &amp;o-&gt;elemS, &amp;(*x)[o-&gt;idx])) {</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;          ++o-&gt;idx;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;          <a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;T&gt;::prepare</a>(&amp;o-&gt;elemS);</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        }</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;      }</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;      <span class="keywordflow">return</span> !o-&gt;readLen &amp;&amp; o-&gt;idx == x-&gt;size();</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    }</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  };</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="comment">// support maps (as if vectors of pairs)</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> K, <span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l00750"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4.html">  750</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1io.html">io</a>&lt;<a class="code" href="namespacestd.html">std</a>::map&lt;K,T&gt;&gt; {</div><div class="line"><a name="l00751"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4.html#a471ce67d41101f0861fd41d79298f35d">  751</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4.html#a471ce67d41101f0861fd41d79298f35d">encode</a>(bytes* <a class="code" href="netio_8H.html#a9a18f415b2912f27ae28ab8225dda5d4">out</a>) { <a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;std::vector&lt;std::pair&lt;K,T&gt;</a>&gt;&gt;<a class="code" href="namespacehobbes.html#a735a44e6ab40e01f4bdbd98ee4ded4d4">::encode</a>(out); }</div><div class="line"><a name="l00752"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4.html#ae956ea2ed1fc25b079a1c8b9b237833a">  752</a></span>&#160;    <span class="keyword">static</span> std::string <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4.html#ae956ea2ed1fc25b079a1c8b9b237833a">describe</a>() { <span class="keywordflow">return</span> <a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;std::vector&lt;std::pair&lt;K,T&gt;</a>&gt;&gt;::describe(); }</div><div class="line"><a name="l00753"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4.html#ac4b17afb071cdd7b7500456f2c523803">  753</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4.html#ac4b17afb071cdd7b7500456f2c523803">write</a>(<span class="keywordtype">int</span> s, <span class="keyword">const</span> std::map&lt;K,T&gt;&amp; x) {</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;      <span class="keywordtype">size_t</span> n = x.size();</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;      <a class="code" href="namespacehi.html#ade6eb55847b8c6cc62f9d82356f398fe">io&lt;size_t&gt;::write</a>(s, n);</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; xp : x) {</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        <a class="code" href="namespacehi.html#ade6eb55847b8c6cc62f9d82356f398fe">io&lt;K&gt;::write</a>(s, xp.first);</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        <a class="code" href="namespacehi.html#ade6eb55847b8c6cc62f9d82356f398fe">io&lt;T&gt;::write</a>(s, xp.second);</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      }</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    }</div><div class="line"><a name="l00761"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4.html#a463dabc72f3c49d84d9dc94490c532b6">  761</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4.html#a463dabc72f3c49d84d9dc94490c532b6">read</a>(<span class="keywordtype">int</span> s, std::map&lt;K,T&gt;* x) {</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;      <span class="keywordtype">size_t</span> n = 0;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;      <a class="code" href="namespacehog.html#a69806acabf162cbe9803ada209348f96">io&lt;size_t&gt;::read</a>(s, &amp;n);</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; n; ++i) {</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        K k;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        <a class="code" href="namespacehog.html#a69806acabf162cbe9803ada209348f96">io&lt;K&gt;::read</a>(s, &amp;k);</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        T t;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        <a class="code" href="namespacehog.html#a69806acabf162cbe9803ada209348f96">io&lt;T&gt;::read</a>(s, &amp;t);</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        (*x)[k] = t;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;      }</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    }</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;</div><div class="line"><a name="l00773"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4.html#a9380c21af1f613c8412aafb3eda56a9e">  773</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;size_t&gt;::async_read_state</a> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4.html#a9380c21af1f613c8412aafb3eda56a9e">LenS</a>;</div><div class="line"><a name="l00774"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4.html#ade03b37ae124953bf22ba30593603874">  774</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;K&gt;::async_read_state</a>      <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4.html#ade03b37ae124953bf22ba30593603874">KS</a>;</div><div class="line"><a name="l00775"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4.html#a096080a33ba8b9b4861a0051a4de306a">  775</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;T&gt;::async_read_state</a>      <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4.html#a096080a33ba8b9b4861a0051a4de306a">TS</a>;</div><div class="line"><a name="l00776"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4.html#a193d3959ea2befbfc0dc238f9ee36cc7">  776</a></span>&#160;    <span class="keyword">enum class</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4.html#a193d3959ea2befbfc0dc238f9ee36cc7">ReadS</a> : uint8_t { LenS, KS, TS };</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;</div><div class="line"><a name="l00778"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_1_1async__read__state.html">  778</a></span>&#160;    <span class="keyword">struct </span>async_read_state {</div><div class="line"><a name="l00779"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_1_1async__read__state.html#ac4947975ddd9b98b9f5885a38ae27732">  779</a></span>&#160;      <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4.html#a193d3959ea2befbfc0dc238f9ee36cc7">ReadS</a>   <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_1_1async__read__state.html#ac4947975ddd9b98b9f5885a38ae27732">readS</a>;</div><div class="line"><a name="l00780"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_1_1async__read__state.html#a3edddc2e36350bd5eacb29959b7420a1">  780</a></span>&#160;      LenS    <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_1_1async__read__state.html#a3edddc2e36350bd5eacb29959b7420a1">lenS</a>;</div><div class="line"><a name="l00781"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_1_1async__read__state.html#a28f2765ea12d2836397b4d625e5d4e59">  781</a></span>&#160;      <span class="keywordtype">size_t</span>  <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_1_1async__read__state.html#a28f2765ea12d2836397b4d625e5d4e59">len</a>;</div><div class="line"><a name="l00782"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_1_1async__read__state.html#a42f0fefde7610a1be0e4322f275dbb1b">  782</a></span>&#160;      KS      <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_1_1async__read__state.html#a42f0fefde7610a1be0e4322f275dbb1b">kS</a>;</div><div class="line"><a name="l00783"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_1_1async__read__state.html#ae216eeda64ed9de4edd879bf1f5aa36d">  783</a></span>&#160;      K       <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_1_1async__read__state.html#ae216eeda64ed9de4edd879bf1f5aa36d">k</a>;</div><div class="line"><a name="l00784"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_1_1async__read__state.html#a37152369bed642d346b47fbdb4fe8544">  784</a></span>&#160;      TS      <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_1_1async__read__state.html#a37152369bed642d346b47fbdb4fe8544">tS</a>;</div><div class="line"><a name="l00785"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_1_1async__read__state.html#a25ad791423fc2de68128a7277b1bb7a9">  785</a></span>&#160;      T       <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_1_1async__read__state.html#a25ad791423fc2de68128a7277b1bb7a9">t</a>;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    };</div><div class="line"><a name="l00787"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4.html#a4ce0df27d0bc4f737561da94f190753d">  787</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4.html#a4ce0df27d0bc4f737561da94f190753d">prepare</a>(async_read_state* o) {</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      o-&gt;readS = ReadS::LenS;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;      <a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;size_t&gt;::prepare</a>(&amp;o-&gt;lenS);</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    }</div><div class="line"><a name="l00791"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4.html#aa00408ff4beecf924c99e59fe2a9008c">  791</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4.html#aa00408ff4beecf924c99e59fe2a9008c">accum</a>(<span class="keywordtype">int</span> s, async_read_state* o, std::map&lt;K,T&gt;* x) {</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;      <span class="keywordflow">switch</span> (o-&gt;readS) {</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;      <span class="keywordflow">case</span> ReadS::LenS:</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;size_t&gt;::accum</a>(s, &amp;o-&gt;lenS, &amp;o-&gt;len)) {</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;          o-&gt;readS = ReadS::KS;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;          <a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;K&gt;::prepare</a>(&amp;o-&gt;kS);</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        }</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;      <span class="keywordflow">case</span> ReadS::KS:</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;K&gt;::accum</a>(s, &amp;o-&gt;kS, &amp;o-&gt;k)) {</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;          o-&gt;readS = ReadS::TS;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;          <a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;T&gt;::prepare</a>(&amp;o-&gt;tS);</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        }</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;      <span class="keywordflow">case</span> ReadS::TS:</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;T&gt;::accum</a>(s, &amp;o-&gt;tS, &amp;o-&gt;t)) {</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;          (*x)[o-&gt;k] = o-&gt;t;</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;          --o-&gt;len;</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;          o-&gt;readS = ReadS::KS;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;          <a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;K&gt;::prepare</a>(&amp;o-&gt;kS);</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        }</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;      }</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;      <span class="keywordflow">return</span> o-&gt;readS != ReadS::LenS &amp;&amp; o-&gt;len == 0;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    }</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  };</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;<span class="comment">// support strings (but const char* can only be sent, not received)</span></div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;<span class="keyword">template</span> &lt;&gt;</div><div class="line"><a name="l00820"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01const_01char_01_5_01_4.html">  820</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1io.html">io</a>&lt;const char*&gt; {</div><div class="line"><a name="l00821"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01const_01char_01_5_01_4.html#a1be8f03f87b825433ed184b35b064b4e">  821</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01const_01char_01_5_01_4.html#a1be8f03f87b825433ed184b35b064b4e">encode</a>(bytes* <a class="code" href="netio_8H.html#a9a18f415b2912f27ae28ab8225dda5d4">out</a>) { <a class="code" href="namespacehobbes_1_1net.html#a5c4c0f003879ad2770dfd6a181a2b655">w</a>(<a class="code" href="net_8H.html#a9a8e86d83dbcc67c9af615f3d75a7e3d">_HNET_TYCTOR_ARR</a>, out); <a class="code" href="namespacehobbes.html#a735a44e6ab40e01f4bdbd98ee4ded4d4">io&lt;char&gt;::encode</a>(out); }</div><div class="line"><a name="l00822"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01const_01char_01_5_01_4.html#a615143c045682b62624c9cd30a3e31ef">  822</a></span>&#160;    <span class="keyword">static</span> std::string <a class="code" href="structhobbes_1_1net_1_1io_3_01const_01char_01_5_01_4.html#a615143c045682b62624c9cd30a3e31ef">describe</a>() { <span class="keywordflow">return</span> <span class="stringliteral">&quot;[char]&quot;</span>; }</div><div class="line"><a name="l00823"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01const_01char_01_5_01_4.html#a19c8934e6e4587e8245d27dc7819dab0">  823</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01const_01char_01_5_01_4.html#a19c8934e6e4587e8245d27dc7819dab0">write</a>(<span class="keywordtype">int</span> s, <span class="keyword">const</span> <span class="keywordtype">char</span>* x) { <span class="keywordtype">size_t</span> n = strlen(x); <a class="code" href="namespacehi.html#ade6eb55847b8c6cc62f9d82356f398fe">io&lt;size_t&gt;::write</a>(s, n); <a class="code" href="namespacehobbes_1_1net.html#a54111fdc38eb6ad569a64973a1c866e9">sendData</a>(s, (<span class="keyword">const</span> uint8_t*)x, n); }</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  };</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;<span class="keyword">template</span> &lt;&gt;</div><div class="line"><a name="l00826"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4.html">  826</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1io.html">io</a>&lt;<a class="code" href="namespacestd.html">std</a>::string&gt; {</div><div class="line"><a name="l00827"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4.html#afc0616294b23a8c8666934492b12a32f">  827</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4.html#afc0616294b23a8c8666934492b12a32f">encode</a>(bytes* <a class="code" href="netio_8H.html#a9a18f415b2912f27ae28ab8225dda5d4">out</a>) { <a class="code" href="namespacehobbes_1_1net.html#a5c4c0f003879ad2770dfd6a181a2b655">w</a>(<a class="code" href="net_8H.html#a9a8e86d83dbcc67c9af615f3d75a7e3d">_HNET_TYCTOR_ARR</a>, out); <a class="code" href="namespacehobbes.html#a735a44e6ab40e01f4bdbd98ee4ded4d4">io&lt;char&gt;::encode</a>(out); }</div><div class="line"><a name="l00828"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4.html#aa30421d16e259f38c110447fe6748a61">  828</a></span>&#160;    <span class="keyword">static</span> std::string <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4.html#aa30421d16e259f38c110447fe6748a61">describe</a>() { <span class="keywordflow">return</span> <span class="stringliteral">&quot;[char]&quot;</span>; }</div><div class="line"><a name="l00829"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4.html#ad8d618bed1dae1106f825d892fa19713">  829</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4.html#ad8d618bed1dae1106f825d892fa19713">write</a>(<span class="keywordtype">int</span> s, <span class="keyword">const</span> std::string&amp; x) { <a class="code" href="namespacehi.html#ade6eb55847b8c6cc62f9d82356f398fe">io&lt;size_t&gt;::write</a>(s, x.size()); <a class="code" href="namespacehobbes_1_1net.html#a54111fdc38eb6ad569a64973a1c866e9">sendData</a>(s, (<span class="keyword">const</span> uint8_t*)x.data(), x.size()); }</div><div class="line"><a name="l00830"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4.html#a9f11bb70898d4187056d73987b5537e9">  830</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4.html#a9f11bb70898d4187056d73987b5537e9">read</a>(<span class="keywordtype">int</span> s, std::string* x) { <span class="keywordtype">size_t</span> n = 0; <a class="code" href="namespacehog.html#a69806acabf162cbe9803ada209348f96">io&lt;size_t&gt;::read</a>(s, &amp;n); x-&gt;resize(n); <a class="code" href="namespacehobbes_1_1net.html#a237ffac2d20d3f18d8c50934a93e6cf7">recvData</a>(s, (uint8_t*)x-&gt;data(), n); }</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <span class="comment">// async reading of strings</span></div><div class="line"><a name="l00833"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4_1_1async__read__state.html">  833</a></span>&#160;    <span class="keyword">struct </span>async_read_state {</div><div class="line"><a name="l00834"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4_1_1async__read__state.html#a66366e249efab10302dcbea17678e028">  834</a></span>&#160;      <span class="keyword">typedef</span> <a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;size_t&gt;::async_read_state</a> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4_1_1async__read__state.html#a66366e249efab10302dcbea17678e028">LenS</a>;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;</div><div class="line"><a name="l00836"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4_1_1async__read__state.html#a860e0a307b836e4fb770acafc145370d">  836</a></span>&#160;      <span class="keywordtype">bool</span>   <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4_1_1async__read__state.html#a860e0a307b836e4fb770acafc145370d">readLen</a>;</div><div class="line"><a name="l00837"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4_1_1async__read__state.html#a7dd4328955ed98f8f5c1cbae18486a4a">  837</a></span>&#160;      LenS   <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4_1_1async__read__state.html#a7dd4328955ed98f8f5c1cbae18486a4a">lenS</a>;</div><div class="line"><a name="l00838"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4_1_1async__read__state.html#af15b27f46b05780bcf23046617afda86">  838</a></span>&#160;      <span class="keywordtype">size_t</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4_1_1async__read__state.html#af15b27f46b05780bcf23046617afda86">bytesRead</a>;</div><div class="line"><a name="l00839"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4_1_1async__read__state.html#ac868c88a7b97259907587ef679d61c85">  839</a></span>&#160;      <span class="keywordtype">size_t</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4_1_1async__read__state.html#ac868c88a7b97259907587ef679d61c85">byteLen</a>;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    };</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;</div><div class="line"><a name="l00842"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4.html#ac7b17c19df84e53db07e92be512ef734">  842</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4.html#ac7b17c19df84e53db07e92be512ef734">prepare</a>(async_read_state* o) {</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;      o-&gt;readLen = <span class="keyword">true</span>;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;      <a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;size_t&gt;::prepare</a>(&amp;o-&gt;lenS);</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    }</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;</div><div class="line"><a name="l00847"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4.html#a01bc1303e1015d017e145dc643334236">  847</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4.html#a01bc1303e1015d017e145dc643334236">accum</a>(<span class="keywordtype">int</span> s, async_read_state* o, std::string* x) {</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;      <span class="keywordflow">if</span> (o-&gt;readLen) {</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;size_t&gt;::accum</a>(s, &amp;o-&gt;lenS, &amp;o-&gt;byteLen)) {</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;          x-&gt;resize(o-&gt;byteLen);</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;          o-&gt;bytesRead = 0;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;          o-&gt;readLen = <span class="keyword">false</span>;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        }</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        uint8_t* buf = (uint8_t*)&amp;((*x)[0]);</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        o-&gt;bytesRead += <a class="code" href="namespacehobbes_1_1net.html#a393f1251dceafa382796c81887d1b09b">recvDataPartial</a>(s, buf + o-&gt;bytesRead, o-&gt;byteLen - o-&gt;bytesRead);</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;      }</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;      <span class="keywordflow">return</span> !o-&gt;readLen &amp;&amp; o-&gt;bytesRead == o-&gt;byteLen;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    }</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  };</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="comment">// support standard, reflective structs</span></div><div class="line"><a name="l00863"></a><span class="lineno"><a class="line" href="net_8H.html#a49f27fe689598b55cb02a1c564784233">  863</a></span>&#160;<span class="preprocessor">#define HNET_FIELDC_SUCC(t,n) +1</span></div><div class="line"><a name="l00864"></a><span class="lineno"><a class="line" href="net_8H.html#a0e14114a13477719479c987b63621afe">  864</a></span>&#160;<span class="preprocessor">#define HNET_FIELD_COUNT(FIELDS...) (0 _HNET_MAP(HNET_FIELDC_SUCC, FIELDS))</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;</div><div class="line"><a name="l00866"></a><span class="lineno"><a class="line" href="net_8H.html#afd5cb114118c3c6234b90e55b74617c0">  866</a></span>&#160;<span class="preprocessor">#define HNET_FIELDW_SUCC(t,n) ::hobbes::net::io&lt; t &gt;::write(s, this-&gt; n);</span></div><div class="line"><a name="l00867"></a><span class="lineno"><a class="line" href="net_8H.html#aea32b4cac0f53195912c73702d0a8021">  867</a></span>&#160;<span class="preprocessor">#define HNET_FIELD_WRITES(FIELDS...) _HNET_MAP(HNET_FIELDW_SUCC, FIELDS)</span></div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;</div><div class="line"><a name="l00869"></a><span class="lineno"><a class="line" href="net_8H.html#a3370e162272adc224a92915339deeab3">  869</a></span>&#160;<span class="preprocessor">#define HNET_FIELDR_SUCC(t,n) ::hobbes::net::io&lt; t &gt;::read(s, &amp;this-&gt; n);</span></div><div class="line"><a name="l00870"></a><span class="lineno"><a class="line" href="net_8H.html#ac2cb8325bcfa3051d30a8dabd72a5f35">  870</a></span>&#160;<span class="preprocessor">#define HNET_FIELD_READS(FIELDS...) _HNET_MAP(HNET_FIELDR_SUCC, FIELDS)</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;</div><div class="line"><a name="l00872"></a><span class="lineno"><a class="line" href="net_8H.html#ac8c31ed561eafc62a693a38ee3964609">  872</a></span>&#160;<span class="preprocessor">#define HNET_STRUCT_FIELD(t, n) t n;</span></div><div class="line"><a name="l00873"></a><span class="lineno"><a class="line" href="net_8H.html#a2b32107ab8f408a28c20b5d0fe542d98">  873</a></span>&#160;<span class="preprocessor">#define HNET_STRUCT_FIELD_ENC(t, n) ::hobbes::net::ws(#n, out); ::hobbes::net::w((int)-1, out); ::hobbes::net::io&lt; t &gt;::encode(out);</span></div><div class="line"><a name="l00874"></a><span class="lineno"><a class="line" href="net_8H.html#a203f07356f504e88c02ccaef751595c2">  874</a></span>&#160;<span class="preprocessor">#define HNET_STRUCT_FIELD_DESC(t, n) + (&quot;, &quot; #n &quot; : &quot; + ::hobbes::net::io&lt; t &gt;::describe())</span></div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;</div><div class="line"><a name="l00876"></a><span class="lineno"><a class="line" href="net_8H.html#a0a2c0f298c9ce50404792fbd1c5c1e5c">  876</a></span>&#160;<span class="preprocessor">#define HNET_FIELD_ASYNC_READ_IDX_DEF(_, n) readAt_##n,</span></div><div class="line"><a name="l00877"></a><span class="lineno"><a class="line" href="net_8H.html#a794deea174c21b89175630c340f5077c">  877</a></span>&#160;<span class="preprocessor">#define HNET_FIELD_ASYNC_READ_STATE_DEC(t, n) ::hobbes::net::io&lt; t &gt;::async_read_state n;</span></div><div class="line"><a name="l00878"></a><span class="lineno"><a class="line" href="net_8H.html#a0b39f6126acaf6af32cc81fdc8d80a3a">  878</a></span>&#160;<span class="preprocessor">#define HNET_FIELD_ASYNC_READ_STATE_INIT(t, n) ::hobbes::net::io&lt; t &gt;::prepare(&amp;o-&gt;fieldStates.n);</span></div><div class="line"><a name="l00879"></a><span class="lineno"><a class="line" href="net_8H.html#a74974b661a96fe6aeaae33a2c1cc1c23">  879</a></span>&#160;<span class="preprocessor">#define HNET_FIELD_ASYNC_READ_FIELD(t, n) case FieldIndex::readAt_##n: if (::hobbes::net::io&lt; t &gt;::accum(s, &amp;o-&gt;fieldStates.n, &amp;x-&gt;n)) { o-&gt;idx = (FieldIndex)(((uint32_t)o-&gt;idx) + 1); } break;</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;</div><div class="line"><a name="l00881"></a><span class="lineno"><a class="line" href="net_8H.html#a7d5ab65e322e4e1845cd0546b74e2b73">  881</a></span>&#160;<span class="preprocessor">#define DEFINE_HNET_STRUCT(T, FIELDS...) \</span></div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;<span class="preprocessor">  struct T { \</span></div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;<span class="preprocessor">    _HNET_MAP(HNET_STRUCT_FIELD, FIELDS) </span><span class="comment">/* struct fields */</span><span class="preprocessor"> \</span></div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;<span class="preprocessor">    typedef void is_hnet_struct; </span><span class="comment">/* identify this type as a struct */</span><span class="preprocessor"> \</span></div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;<span class="preprocessor">    static void encode(::hobbes::net::bytes* out) { \</span></div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;<span class="preprocessor">      size_t arity = HNET_FIELD_COUNT(FIELDS); \</span></div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;<span class="preprocessor">      if (arity &gt; 0) { \</span></div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;<span class="preprocessor">        ::hobbes::net::w(_HNET_TYCTOR_STRUCT, out); \</span></div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;<span class="preprocessor">        ::hobbes::net::w(arity, out); \</span></div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="preprocessor">        _HNET_MAP(HNET_STRUCT_FIELD_ENC, FIELDS) \</span></div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="preprocessor">      } else { \</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="preprocessor">        ::hobbes::net::encode_primty(&quot;unit&quot;, out); \</span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="preprocessor">      } \</span></div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="preprocessor">    } \</span></div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;<span class="preprocessor">    static std::string describe() { \</span></div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;<span class="preprocessor">      return &quot;{&quot; + ( std::string(&quot;&quot;) _HNET_MAP(HNET_STRUCT_FIELD_DESC, FIELDS) ).substr(2) + &quot;}&quot;; \</span></div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;<span class="preprocessor">    } \</span></div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;<span class="preprocessor">    void write(int s) const { \</span></div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;<span class="preprocessor">      HNET_FIELD_WRITES(FIELDS); \</span></div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;<span class="preprocessor">    } \</span></div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;<span class="preprocessor">    void read(int s) { \</span></div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;<span class="preprocessor">      HNET_FIELD_READS(FIELDS); \</span></div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;<span class="preprocessor">    } \</span></div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;<span class="preprocessor">    </span><span class="comment">/* async reading */</span><span class="preprocessor"> \</span></div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;<span class="preprocessor">    enum class FieldIndex : uint32_t { \</span></div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;<span class="preprocessor">      _ZeroInit = 0, \</span></div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;<span class="preprocessor">      _HNET_MAP(HNET_FIELD_ASYNC_READ_IDX_DEF, FIELDS) \</span></div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;<span class="preprocessor">      _FieldListEnd \</span></div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;<span class="preprocessor">    }; \</span></div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;<span class="preprocessor">    struct async_read_state { \</span></div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;<span class="preprocessor">      FieldIndex idx; \</span></div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;<span class="preprocessor">      struct { \</span></div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;<span class="preprocessor">      _HNET_MAP(HNET_FIELD_ASYNC_READ_STATE_DEC, FIELDS) \</span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="preprocessor">      } fieldStates; \</span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="preprocessor">    }; \</span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="preprocessor">    static void prepare(async_read_state* o) { \</span></div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="preprocessor">      o-&gt;idx = (FieldIndex)1; \</span></div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="preprocessor">      _HNET_MAP(HNET_FIELD_ASYNC_READ_STATE_INIT, FIELDS) \</span></div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;<span class="preprocessor">    } \</span></div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;<span class="preprocessor">    static bool accum(int s, async_read_state* o, T* x) { \</span></div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;<span class="preprocessor">      switch (o-&gt;idx) { \</span></div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;<span class="preprocessor">      _HNET_MAP(HNET_FIELD_ASYNC_READ_FIELD, FIELDS) \</span></div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;<span class="preprocessor">      default: break; \</span></div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;<span class="preprocessor">      } \</span></div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;<span class="preprocessor">      return o-&gt;idx == FieldIndex::_FieldListEnd; \</span></div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;<span class="preprocessor">    } \</span></div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;<span class="preprocessor">  }</span></div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l00930"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__struct_01_4.html">  930</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1io.html">io</a>&lt;T, typename T::is_hnet_struct&gt; {</div><div class="line"><a name="l00931"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__struct_01_4.html#a128a437089bcffe6f6b94ff216ffffa6">  931</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span>        <a class="code" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__struct_01_4.html#a128a437089bcffe6f6b94ff216ffffa6">encode</a>(bytes* <a class="code" href="netio_8H.html#a9a18f415b2912f27ae28ab8225dda5d4">out</a>)          { <a class="code" href="namespacehobbes.html#a735a44e6ab40e01f4bdbd98ee4ded4d4">T::encode</a>(out); }</div><div class="line"><a name="l00932"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__struct_01_4.html#a8b51f77f22068219765bb13fb89297fa">  932</a></span>&#160;    <span class="keyword">static</span> std::string <a class="code" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__struct_01_4.html#a8b51f77f22068219765bb13fb89297fa">describe</a>()                  { <span class="keywordflow">return</span> T::describe(); }</div><div class="line"><a name="l00933"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__struct_01_4.html#afd7cc454b9a859d187cc357114fbef81">  933</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span>        <a class="code" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__struct_01_4.html#afd7cc454b9a859d187cc357114fbef81">write</a>(<span class="keywordtype">int</span> s, <span class="keyword">const</span> T&amp; x)    { x.write(s); }</div><div class="line"><a name="l00934"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__struct_01_4.html#a09e7f5f7ed0812ac3c05fb7dc82a2beb">  934</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span>        <a class="code" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__struct_01_4.html#a09e7f5f7ed0812ac3c05fb7dc82a2beb">read</a>(<span class="keywordtype">int</span> s, T* x)           { x-&gt;read(s); }</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;</div><div class="line"><a name="l00936"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__struct_01_4.html#a9c9f10bfa8769b47edb1697bb1733a3c">  936</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> T::async_read_state <a class="code" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__struct_01_4.html#a9c9f10bfa8769b47edb1697bb1733a3c">async_read_state</a>;</div><div class="line"><a name="l00937"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__struct_01_4.html#a9c448f753bf3baf945061f510e56f9dc">  937</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__struct_01_4.html#a9c448f753bf3baf945061f510e56f9dc">prepare</a>(async_read_state* o) { T::prepare(o); }</div><div class="line"><a name="l00938"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__struct_01_4.html#a6aba6e950295c860a4d264c510b01f54">  938</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__struct_01_4.html#a6aba6e950295c860a4d264c510b01f54">accum</a>(<span class="keywordtype">int</span> s, async_read_state* o, T* x) { <span class="keywordflow">return</span> T::accum(s, o, x); }</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  };</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;<span class="comment">// tuple/sequence serialization</span></div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> ... Ts&gt;</div><div class="line"><a name="l00943"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1oSeq.html">  943</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1oSeq.html">oSeq</a> {</div><div class="line"><a name="l00944"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1oSeq.html#aa0f022521a54e6e70644e708d6d13270">  944</a></span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> count = 0;</div><div class="line"><a name="l00945"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1oSeq.html#aba6cc1c8961c39e93b2b2736b75d65bb">  945</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span>        <a class="code" href="structhobbes_1_1net_1_1oSeq.html#aba6cc1c8961c39e93b2b2736b75d65bb">encode</a>(<span class="keywordtype">size_t</span>,bytes*)    { }</div><div class="line"><a name="l00946"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1oSeq.html#a25a35b3030dfc3606d1bbf86bd48e44d">  946</a></span>&#160;    <span class="keyword">static</span> std::string <a class="code" href="structhobbes_1_1net_1_1oSeq.html#a25a35b3030dfc3606d1bbf86bd48e44d">describe</a>()               { <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>; }</div><div class="line"><a name="l00947"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1oSeq.html#af9137b49b91f99367c695158e7d0e0fb">  947</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span>        <a class="code" href="structhobbes_1_1net_1_1oSeq.html#af9137b49b91f99367c695158e7d0e0fb">write</a>(<span class="keywordtype">int</span>, <span class="keyword">const</span> Ts&amp;...) { }</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;  };</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> ... Ts&gt;</div><div class="line"><a name="l00950"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1oSeq_3_01T_00_01Ts_8_8_8_01_4.html">  950</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1oSeq.html">oSeq</a>&lt;T, Ts...&gt; {</div><div class="line"><a name="l00951"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1oSeq_3_01T_00_01Ts_8_8_8_01_4.html#a67b9df5ea67990f26d9a9c0ff3049d79">  951</a></span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> count = 1 + <a class="code" href="structhobbes_1_1net_1_1oSeq.html">oSeq</a>&lt;Ts...&gt;::count;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;</div><div class="line"><a name="l00953"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1oSeq_3_01T_00_01Ts_8_8_8_01_4.html#a5c4a96bbedc7566795993cc9222a61fe">  953</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1oSeq_3_01T_00_01Ts_8_8_8_01_4.html#a5c4a96bbedc7566795993cc9222a61fe">encode</a>(<span class="keywordtype">size_t</span> f, bytes* <a class="code" href="netio_8H.html#a9a18f415b2912f27ae28ab8225dda5d4">out</a>) {</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;      <span class="keywordtype">char</span> <a class="code" href="namespacehobbes.html#a7cac2deb09bd8ee44a942397f8d895f6">fn</a>[32];</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;      snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">&quot;.f%lld&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>)f);</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;      <a class="code" href="namespacehobbes_1_1net.html#a05034c768dd1231859bbb44a45a4306d">ws</a>(fn, out);</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;      <a class="code" href="namespacehobbes_1_1net.html#a5c4c0f003879ad2770dfd6a181a2b655">w</a>((<span class="keywordtype">int</span>)-1, out);</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;      <a class="code" href="namespacehobbes.html#a735a44e6ab40e01f4bdbd98ee4ded4d4">io&lt;T&gt;::encode</a>(out);</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;      <a class="code" href="structhobbes_1_1net_1_1oSeq.html#aba6cc1c8961c39e93b2b2736b75d65bb">oSeq&lt;Ts...&gt;::encode</a>(f+1, out);</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    }</div><div class="line"><a name="l00962"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1oSeq_3_01T_00_01Ts_8_8_8_01_4.html#a878de603debddae5954f6963bd242a8f">  962</a></span>&#160;    <span class="keyword">static</span> std::string <a class="code" href="structhobbes_1_1net_1_1oSeq_3_01T_00_01Ts_8_8_8_01_4.html#a878de603debddae5954f6963bd242a8f">describe</a>() {</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;T&gt;::describe</a>() + <span class="stringliteral">&quot;*&quot;</span> + <a class="code" href="structhobbes_1_1net_1_1oSeq.html#a25a35b3030dfc3606d1bbf86bd48e44d">oSeq&lt;Ts...&gt;::describe</a>();</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    }</div><div class="line"><a name="l00965"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1oSeq_3_01T_00_01Ts_8_8_8_01_4.html#a0537294e8a98b2a99c886b9603d1f4ee">  965</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1oSeq_3_01T_00_01Ts_8_8_8_01_4.html#a0537294e8a98b2a99c886b9603d1f4ee">write</a>(<span class="keywordtype">int</span> socket, <span class="keyword">const</span> T&amp; x, <span class="keyword">const</span> Ts&amp;... xs) {</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;      <a class="code" href="namespacehi.html#ade6eb55847b8c6cc62f9d82356f398fe">io&lt;T&gt;::write</a>(socket, x);</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;      <a class="code" href="structhobbes_1_1net_1_1oSeq.html#af9137b49b91f99367c695158e7d0e0fb">oSeq&lt;Ts...&gt;::write</a>(socket, xs...);</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    }</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  };</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;<span class="keyword">template</span> &lt;<span class="keywordtype">size_t</span> i, <span class="keywordtype">size_t</span> e, <span class="keyword">typename</span> ... Ts&gt;</div><div class="line"><a name="l00972"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1ioTuple.html">  972</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1ioTuple.html">ioTuple</a> {</div><div class="line"><a name="l00973"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1ioTuple.html#a4fff7d870a0c5bbdce83f400c9713918">  973</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1ioTuple.html#a4fff7d870a0c5bbdce83f400c9713918">write</a>(<span class="keywordtype">int</span> s, <span class="keyword">const</span> std::tuple&lt;Ts...&gt;&amp; t) {</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;      <a class="code" href="structhobbes_1_1net_1_1io.html">io</a>&lt;<span class="keyword">typename</span> std::tuple_element&lt;i, <a class="code" href="namespacehobbes.html#a68b38e08ad5ec9c6999e801f53e7dda9">std::tuple</a>&lt;Ts...&gt;&gt;::type&gt;<a class="code" href="namespacehobbes.html#a1fbfd18ce9403ee930596638d0ebe063">::write</a>(s, std::get&lt;i&gt;(t));</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;      <a class="code" href="structhobbes_1_1net_1_1ioTuple.html#a4fff7d870a0c5bbdce83f400c9713918">ioTuple&lt;i+1, e, Ts...&gt;::write</a>(s, t);</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    }</div><div class="line"><a name="l00977"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1ioTuple.html#a994065b5ccd1795a909c570c7ec28e52">  977</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1ioTuple.html#a994065b5ccd1795a909c570c7ec28e52">read</a>(<span class="keywordtype">int</span> s, std::tuple&lt;Ts...&gt;* t) {</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;      <a class="code" href="structhobbes_1_1net_1_1io.html">io</a>&lt;<span class="keyword">typename</span> std::tuple_element&lt;i, <a class="code" href="namespacehobbes.html#a68b38e08ad5ec9c6999e801f53e7dda9">std::tuple</a>&lt;Ts...&gt;&gt;::type&gt;<a class="code" href="namespacehobbes.html#a5ac388046025df59a27f0ec570d3094c">::read</a>(s, &amp;std::get&lt;i&gt;(*t));</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;      <a class="code" href="structhobbes_1_1net_1_1ioTuple.html#a994065b5ccd1795a909c570c7ec28e52">ioTuple&lt;i+1, e, Ts...&gt;::read</a>(s, t);</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    }</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  };</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;<span class="keyword">template</span> &lt;<span class="keywordtype">size_t</span> e, <span class="keyword">typename</span> ... Ts&gt;</div><div class="line"><a name="l00983"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1ioTuple_3_01e_00_01e_00_01Ts_8_8_8_01_4.html">  983</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1ioTuple.html">ioTuple</a>&lt;e, e, Ts...&gt; {</div><div class="line"><a name="l00984"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1ioTuple_3_01e_00_01e_00_01Ts_8_8_8_01_4.html#aa7feee727e4c5c389a97c5376256698f">  984</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1ioTuple_3_01e_00_01e_00_01Ts_8_8_8_01_4.html#aa7feee727e4c5c389a97c5376256698f">write</a>(<span class="keywordtype">int</span> s, <span class="keyword">const</span> std::tuple&lt;Ts...&gt;&amp;) { }</div><div class="line"><a name="l00985"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1ioTuple_3_01e_00_01e_00_01Ts_8_8_8_01_4.html#adcc32dd7c73aa75d296cdcae2099a10b">  985</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1ioTuple_3_01e_00_01e_00_01Ts_8_8_8_01_4.html#adcc32dd7c73aa75d296cdcae2099a10b">read</a>(<span class="keywordtype">int</span> s, std::tuple&lt;Ts...&gt;*) { }</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  };</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> ... Ts&gt;</div><div class="line"><a name="l00989"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1aioTupleState.html">  989</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1aioTupleState.html">aioTupleState</a> {</div><div class="line"><a name="l00990"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1aioTupleState.html#ade6ea5b42a7895dd75c095f88dc47536">  990</a></span>&#160;    <span class="keyword">typedef</span> std::tuple&lt;&gt; <a class="code" href="structhobbes_1_1net_1_1aioTupleState.html#ade6ea5b42a7895dd75c095f88dc47536">async_read_state</a>;</div><div class="line"><a name="l00991"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1aioTupleState.html#a9e174f9b35adfcd50425cee0ed74e8a4">  991</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1aioTupleState.html#a9e174f9b35adfcd50425cee0ed74e8a4">prepare</a>(async_read_state*) { }</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;  };</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> ... Ts&gt;</div><div class="line"><a name="l00994"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1aioTupleState_3_01T_00_01Ts_8_8_8_01_4.html">  994</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1aioTupleState.html">aioTupleState</a>&lt;T, Ts...&gt; {</div><div class="line"><a name="l00995"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1aioTupleState_3_01T_00_01Ts_8_8_8_01_4.html#a32e25ec27be892cbdbc2bc03ab52538a">  995</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;T&gt;::async_read_state</a> <a class="code" href="structhobbes_1_1net_1_1aioTupleState_3_01T_00_01Ts_8_8_8_01_4.html#a32e25ec27be892cbdbc2bc03ab52538a">FstRS</a>;</div><div class="line"><a name="l00996"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1aioTupleState_3_01T_00_01Ts_8_8_8_01_4.html#a37363ebc4c98ea51e9c26b9b0fdd5a19">  996</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structhobbes_1_1net_1_1aioTupleState.html">aioTupleState</a>&lt;Ts...&gt;<a class="code" href="structhobbes_1_1net_1_1aioTupleState_3_01T_00_01Ts_8_8_8_01_4.html#af86cb190bea77b4779aa20955ebbdeda">::async_read_state</a> <a class="code" href="structhobbes_1_1net_1_1aioTupleState_3_01T_00_01Ts_8_8_8_01_4.html#a37363ebc4c98ea51e9c26b9b0fdd5a19">SndRS</a>;</div><div class="line"><a name="l00997"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1aioTupleState_3_01T_00_01Ts_8_8_8_01_4.html#af86cb190bea77b4779aa20955ebbdeda">  997</a></span>&#160;    <span class="keyword">typedef</span> std::pair&lt;FstRS, SndRS&gt; <a class="code" href="structhobbes_1_1net_1_1aioTupleState_3_01T_00_01Ts_8_8_8_01_4.html#af86cb190bea77b4779aa20955ebbdeda">async_read_state</a>;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;</div><div class="line"><a name="l00999"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1aioTupleState_3_01T_00_01Ts_8_8_8_01_4.html#ac4c4d68ce12cc1eb47f442053b8e348d">  999</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1aioTupleState_3_01T_00_01Ts_8_8_8_01_4.html#ac4c4d68ce12cc1eb47f442053b8e348d">prepare</a>(async_read_state* o) {</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;      <a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;T&gt;::prepare</a>(&amp;o-&gt;first);</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;      <a class="code" href="structhobbes_1_1net_1_1aioTupleState.html#a9e174f9b35adfcd50425cee0ed74e8a4">aioTupleState&lt;Ts...&gt;::prepare</a>(&amp;o-&gt;second);</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    }</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  };</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;<span class="keyword">template</span> &lt;<span class="keywordtype">size_t</span> i, <span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l01005"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1aioTupleStateAt.html"> 1005</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1aioTupleStateAt.html">aioTupleStateAt</a> { };</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> U, <span class="keyword">typename</span> V&gt;</div><div class="line"><a name="l01007"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1aioTupleStateAt_3_010_00_01std_1_1pair_3_01U_00_01V_01_4_01_4.html"> 1007</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1aioTupleStateAt.html">aioTupleStateAt</a>&lt;0, <a class="code" href="namespacestd.html">std</a>::<a class="code" href="namespacehobbes_1_1str.html#ae0eccb44dca0257fa0e76fb9db052df4">pair</a>&lt;U,V&gt;&gt; {</div><div class="line"><a name="l01008"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1aioTupleStateAt_3_010_00_01std_1_1pair_3_01U_00_01V_01_4_01_4.html#ac97d5a7fb50d8068bdcd79b6ef91b102"> 1008</a></span>&#160;    <span class="keyword">typedef</span> U <a class="code" href="structhobbes_1_1net_1_1aioTupleStateAt_3_010_00_01std_1_1pair_3_01U_00_01V_01_4_01_4.html#ac97d5a7fb50d8068bdcd79b6ef91b102">type</a>;</div><div class="line"><a name="l01009"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1aioTupleStateAt_3_010_00_01std_1_1pair_3_01U_00_01V_01_4_01_4.html#a27f9254426938d2b834875c935c1f0e4"> 1009</a></span>&#160;    <span class="keyword">static</span> U* <span class="keyword">get</span>(std::pair&lt;U,V&gt;* x) { <span class="keywordflow">return</span> &amp;x-&gt;first; }</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  };</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;<span class="keyword">template</span> &lt;<span class="keywordtype">size_t</span> i, <span class="keyword">typename</span> U, <span class="keyword">typename</span> V&gt;</div><div class="line"><a name="l01012"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1aioTupleStateAt_3_01i_00_01std_1_1pair_3_01U_00_01V_01_4_01_4.html"> 1012</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1aioTupleStateAt.html">aioTupleStateAt</a>&lt;i, <a class="code" href="namespacestd.html">std</a>::<a class="code" href="namespacehobbes_1_1str.html#ae0eccb44dca0257fa0e76fb9db052df4">pair</a>&lt;U,V&gt;&gt; {</div><div class="line"><a name="l01013"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1aioTupleStateAt_3_01i_00_01std_1_1pair_3_01U_00_01V_01_4_01_4.html#a8982bb811369f8fd9f09595e8a7b7377"> 1013</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structhobbes_1_1net_1_1aioTupleStateAt.html">aioTupleStateAt</a>&lt;i-1, V&gt;<a class="code" href="structhobbes_1_1net_1_1aioTupleStateAt_3_01i_00_01std_1_1pair_3_01U_00_01V_01_4_01_4.html#a8982bb811369f8fd9f09595e8a7b7377">::type</a> <a class="code" href="structhobbes_1_1net_1_1aioTupleStateAt_3_01i_00_01std_1_1pair_3_01U_00_01V_01_4_01_4.html#a8982bb811369f8fd9f09595e8a7b7377">type</a>;</div><div class="line"><a name="l01014"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1aioTupleStateAt_3_01i_00_01std_1_1pair_3_01U_00_01V_01_4_01_4.html#a721802d8842a073ad74709aac41d10ee"> 1014</a></span>&#160;    <span class="keyword">static</span> type* <span class="keyword">get</span>(std::pair&lt;U,V&gt;* x) { <span class="keywordflow">return</span> <a class="code" href="namespacehobbes.html#ad8d66137d02ef2431a77f59ace8e75df">aioTupleStateAt&lt;i-1, V&gt;::get</a>(&amp;x-&gt;second); }</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;  };</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;<span class="keyword">template</span> &lt;<span class="keywordtype">size_t</span> i, <span class="keywordtype">size_t</span> e, <span class="keyword">typename</span> ... Ts&gt;</div><div class="line"><a name="l01018"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1aioTupleRead.html"> 1018</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1aioTupleRead.html">aioTupleRead</a> {</div><div class="line"><a name="l01019"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1aioTupleRead.html#a48f5fc2af7df04befee70ede1f06b165"> 1019</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="structhobbes_1_1net_1_1aioTupleRead.html#a48f5fc2af7df04befee70ede1f06b165">accum</a>(<span class="keywordtype">int</span> s, <span class="keywordtype">size_t</span> ti, <span class="keyword">typename</span> <a class="code" href="structhobbes_1_1net_1_1aioTupleState.html#ade6ea5b42a7895dd75c095f88dc47536">aioTupleState&lt;Ts...&gt;::async_read_state</a>* o, std::tuple&lt;Ts...&gt;* x) {</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;      <span class="keywordflow">if</span> (ti == i) {</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="structhobbes_1_1net_1_1io.html">io</a>&lt;<span class="keyword">typename</span> std::tuple_element&lt;i, <a class="code" href="namespacehobbes.html#a68b38e08ad5ec9c6999e801f53e7dda9">std::tuple</a>&lt;Ts...&gt;&gt;::type&gt;::accum(s, <a class="code" href="structhobbes_1_1net_1_1aioTupleStateAt.html">aioTupleStateAt</a>&lt;i, <span class="keyword">typename</span> <a class="code" href="structhobbes_1_1net_1_1aioTupleState.html#ade6ea5b42a7895dd75c095f88dc47536">aioTupleState&lt;Ts...&gt;::async_read_state</a>&gt;::<span class="keyword">get</span>(o), &amp;std::get&lt;i&gt;(*x));</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="structhobbes_1_1net_1_1aioTupleRead.html#a48f5fc2af7df04befee70ede1f06b165">aioTupleRead&lt;i+1, e, Ts...&gt;::accum</a>(s, ti, o, x);</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;      }</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    }</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  };</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;<span class="keyword">template</span> &lt;<span class="keywordtype">size_t</span> e, <span class="keyword">typename</span> ... Ts&gt;</div><div class="line"><a name="l01028"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1aioTupleRead_3_01e_00_01e_00_01Ts_8_8_8_01_4.html"> 1028</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1aioTupleRead.html">aioTupleRead</a>&lt;e, e, Ts...&gt; {</div><div class="line"><a name="l01029"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1aioTupleRead_3_01e_00_01e_00_01Ts_8_8_8_01_4.html#a4705c2d596a22974431631777689fff4"> 1029</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="structhobbes_1_1net_1_1aioTupleRead_3_01e_00_01e_00_01Ts_8_8_8_01_4.html#a4705c2d596a22974431631777689fff4">accum</a>(<span class="keywordtype">int</span> s, <span class="keywordtype">size_t</span>, <span class="keyword">typename</span> <a class="code" href="structhobbes_1_1net_1_1aioTupleState.html#ade6ea5b42a7895dd75c095f88dc47536">aioTupleState&lt;Ts...&gt;::async_read_state</a>*, std::tuple&lt;Ts...&gt;*) { <span class="keywordflow">return</span> <span class="keyword">true</span>; }</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;  };</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> ... Ts&gt;</div><div class="line"><a name="l01033"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1tuple_3_01Ts_8_8_8_01_4_01_4.html"> 1033</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1io.html">io</a>&lt; <a class="code" href="namespacestd.html">std</a>::<a class="code" href="namespacehobbes.html#a68b38e08ad5ec9c6999e801f53e7dda9">tuple</a>&lt;Ts...&gt; &gt; {</div><div class="line"><a name="l01034"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1tuple_3_01Ts_8_8_8_01_4_01_4.html#a938cf09f61ff3674d51539edbccbb424"> 1034</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1tuple_3_01Ts_8_8_8_01_4_01_4.html#a938cf09f61ff3674d51539edbccbb424">encode</a>(bytes* <a class="code" href="netio_8H.html#a9a18f415b2912f27ae28ab8225dda5d4">out</a>) {</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;      <span class="keywordtype">size_t</span> arity = <a class="code" href="structhobbes_1_1net_1_1oSeq.html">oSeq</a>&lt;Ts...&gt;::count;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;      <span class="keywordflow">if</span> (arity &gt; 0) {</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;        <a class="code" href="namespacehobbes_1_1net.html#a5c4c0f003879ad2770dfd6a181a2b655">w</a>(<a class="code" href="net_8H.html#af44cc134ba320bce6bdba2b14e81342e">_HNET_TYCTOR_STRUCT</a>, out);</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;        <a class="code" href="namespacehobbes_1_1net.html#a5c4c0f003879ad2770dfd6a181a2b655">w</a>(arity, out);</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;        <a class="code" href="structhobbes_1_1net_1_1oSeq.html#aba6cc1c8961c39e93b2b2736b75d65bb">oSeq&lt;Ts...&gt;::encode</a>(0, out);</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;        <a class="code" href="namespacehobbes_1_1net.html#ab251aabc451fcd00548ec9e3adf98ded">encode_primty</a>(<span class="stringliteral">&quot;unit&quot;</span>, out);</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;      }</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    }</div><div class="line"><a name="l01045"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1tuple_3_01Ts_8_8_8_01_4_01_4.html#ae5935ec69c589625d4aa66b9f2efbd00"> 1045</a></span>&#160;    <span class="keyword">static</span> std::string <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1tuple_3_01Ts_8_8_8_01_4_01_4.html#ae5935ec69c589625d4aa66b9f2efbd00">describe</a>() {</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;      std::string x = <a class="code" href="structhobbes_1_1net_1_1oSeq.html#a25a35b3030dfc3606d1bbf86bd48e44d">oSeq&lt;Ts...&gt;::describe</a>();</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;      <span class="keywordflow">return</span> (x.size() &gt; 1) ? x.substr(0,x.size()-1) : x;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    }</div><div class="line"><a name="l01049"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1tuple_3_01Ts_8_8_8_01_4_01_4.html#a8e826579a12ed7c79aaf70b7b10fe14e"> 1049</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1tuple_3_01Ts_8_8_8_01_4_01_4.html#a8e826579a12ed7c79aaf70b7b10fe14e">write</a>(<span class="keywordtype">int</span> s, <span class="keyword">const</span> std::tuple&lt;Ts...&gt;&amp; t) {</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;      <a class="code" href="structhobbes_1_1net_1_1ioTuple.html">ioTuple</a>&lt;0, std::tuple_size&lt;<a class="code" href="namespacehobbes.html#a68b38e08ad5ec9c6999e801f53e7dda9">std::tuple</a>&lt;Ts...&gt;&gt;::value, Ts...&gt;<a class="code" href="namespacehobbes.html#a1fbfd18ce9403ee930596638d0ebe063">::write</a>(s, t);</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    }</div><div class="line"><a name="l01052"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1tuple_3_01Ts_8_8_8_01_4_01_4.html#aa7c20caaa2d8665d167385a09f5b4715"> 1052</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1tuple_3_01Ts_8_8_8_01_4_01_4.html#aa7c20caaa2d8665d167385a09f5b4715">read</a>(<span class="keywordtype">int</span> s, std::tuple&lt;Ts...&gt;* t) {</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;      <a class="code" href="structhobbes_1_1net_1_1ioTuple.html">ioTuple</a>&lt;0, std::tuple_size&lt;<a class="code" href="namespacehobbes.html#a68b38e08ad5ec9c6999e801f53e7dda9">std::tuple</a>&lt;Ts...&gt;&gt;::value, Ts...&gt;<a class="code" href="namespacehobbes.html#a5ac388046025df59a27f0ec570d3094c">::read</a>(s, t);</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    }</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <span class="comment">// async reading of tuples</span></div><div class="line"><a name="l01057"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1tuple_3_01Ts_8_8_8_01_4_01_4.html#ac810847df15fe7372f18397b8e70bb2c"> 1057</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="namespacehobbes_1_1str.html#ae0eccb44dca0257fa0e76fb9db052df4">std::pair</a>&lt;size_t, <span class="keyword">typename</span> <a class="code" href="structhobbes_1_1net_1_1aioTupleState.html">aioTupleState</a>&lt;Ts...&gt;<a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1tuple_3_01Ts_8_8_8_01_4_01_4.html#ac810847df15fe7372f18397b8e70bb2c">::async_read_state</a>&gt; <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1tuple_3_01Ts_8_8_8_01_4_01_4.html#ac810847df15fe7372f18397b8e70bb2c">async_read_state</a>;</div><div class="line"><a name="l01058"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1tuple_3_01Ts_8_8_8_01_4_01_4.html#a68555f7eb72082c1544c609f1b549a90"> 1058</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1tuple_3_01Ts_8_8_8_01_4_01_4.html#a68555f7eb72082c1544c609f1b549a90">prepare</a>(async_read_state* o) { o-&gt;first = 0; <a class="code" href="structhobbes_1_1net_1_1aioTupleState.html#a9e174f9b35adfcd50425cee0ed74e8a4">aioTupleState&lt;Ts...&gt;::prepare</a>(&amp;o-&gt;second); }</div><div class="line"><a name="l01059"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01std_1_1tuple_3_01Ts_8_8_8_01_4_01_4.html#abeaca8efee38c7f034d6489df5b57fba"> 1059</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01std_1_1tuple_3_01Ts_8_8_8_01_4_01_4.html#abeaca8efee38c7f034d6489df5b57fba">accum</a>(<span class="keywordtype">int</span> s, async_read_state* o, std::tuple&lt;Ts...&gt;* x) {</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="structhobbes_1_1net_1_1aioTupleRead.html">aioTupleRead</a>&lt;0, std::tuple_size&lt;std::tuple&lt;Ts...&gt;&gt;::value, Ts...&gt;::accum(s, o-&gt;first, &amp;o-&gt;second, x)) {</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;        ++o-&gt;first;</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;      }</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;      <span class="keywordflow">return</span> o-&gt;first == <a class="code" href="structhobbes_1_1net_1_1oSeq.html">oSeq</a>&lt;Ts...&gt;::count;</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    }</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;  };</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;<span class="comment">// support opaque type aliases</span></div><div class="line"><a name="l01068"></a><span class="lineno"><a class="line" href="net_8H.html#a4781057f4782e65b97e10df31309ae00"> 1068</a></span>&#160;<span class="preprocessor">#define DEFINE_HNET_TYPE_ALIAS(_ATY, _REPTY) \</span></div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;<span class="preprocessor">  struct _ATY { \</span></div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;<span class="preprocessor">    typedef void is_hnet_alias; \</span></div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;<span class="preprocessor">    typedef _REPTY type; \</span></div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;<span class="preprocessor">    static const char* name() { return #_ATY; } \</span></div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;<span class="preprocessor">    inline operator _REPTY() { return this-&gt;value; } \</span></div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;<span class="preprocessor">    _REPTY value; \</span></div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;<span class="preprocessor">    _ATY() : value() { } \</span></div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;<span class="preprocessor">    _ATY(const _REPTY&amp; x) : value(x) { } \</span></div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;<span class="preprocessor">    _ATY(const _ATY&amp; x) : value(x.value) { } \</span></div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;<span class="preprocessor">    _ATY&amp; operator=(const _ATY&amp; x) { this-&gt;value = x.value; return *this; } \</span></div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;<span class="preprocessor">  }</span></div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l01082"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__alias_01_4.html"> 1082</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1io.html">io</a>&lt;T, typename T::is_hnet_alias&gt; {</div><div class="line"><a name="l01083"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__alias_01_4.html#a03b653b7ce1ba8fefc442d2d9971a3be"> 1083</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span>        <a class="code" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__alias_01_4.html#a03b653b7ce1ba8fefc442d2d9971a3be">encode</a>(bytes* <a class="code" href="netio_8H.html#a9a18f415b2912f27ae28ab8225dda5d4">out</a>)          { <a class="code" href="namespacehobbes_1_1net.html#a5c4c0f003879ad2770dfd6a181a2b655">w</a>(<a class="code" href="net_8H.html#a79799930e5e8b49cd493bd14e53b56c5">_HNET_TYCTOR_PRIM</a>, out); <a class="code" href="namespacehobbes_1_1net.html#a05034c768dd1231859bbb44a45a4306d">ws</a>(T::name(), out); <a class="code" href="namespacehobbes_1_1net.html#a5c4c0f003879ad2770dfd6a181a2b655">w</a>((<span class="keywordtype">bool</span>)<span class="keyword">true</span>, out); <a class="code" href="namespacehobbes.html#a735a44e6ab40e01f4bdbd98ee4ded4d4">io&lt;typename T::type&gt;::encode</a>(out); }</div><div class="line"><a name="l01084"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__alias_01_4.html#a44b2205bc1599a4828aedd479f0ff150"> 1084</a></span>&#160;    <span class="keyword">static</span> std::string <a class="code" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__alias_01_4.html#a44b2205bc1599a4828aedd479f0ff150">describe</a>()                  { <span class="keywordflow">return</span> T::name(); }</div><div class="line"><a name="l01085"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__alias_01_4.html#ae706de0837da48744b44cd241fe25017"> 1085</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span>        <a class="code" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__alias_01_4.html#ae706de0837da48744b44cd241fe25017">write</a>(<span class="keywordtype">int</span> s, <span class="keyword">const</span> T&amp; x)    { <a class="code" href="namespacehi.html#ade6eb55847b8c6cc62f9d82356f398fe">io&lt;typename T::type&gt;::write</a>(s, x.value); }</div><div class="line"><a name="l01086"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__alias_01_4.html#a85c7562799370b219d66decc4bcae7b8"> 1086</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span>        <a class="code" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__alias_01_4.html#a85c7562799370b219d66decc4bcae7b8">read</a>(<span class="keywordtype">int</span> s, T* x)           { <a class="code" href="namespacehog.html#a69806acabf162cbe9803ada209348f96">io&lt;typename T::type&gt;::read</a>(s, &amp;x-&gt;value); }</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;</div><div class="line"><a name="l01088"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__alias_01_4.html#aa323621b9aa981c08c81764e634f186b"> 1088</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;typename T::type&gt;::async_read_state</a> <a class="code" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__alias_01_4.html#aa323621b9aa981c08c81764e634f186b">async_read_state</a>;</div><div class="line"><a name="l01089"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__alias_01_4.html#ab9d69faea62fbbfb99a8b97d5f991125"> 1089</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__alias_01_4.html#ab9d69faea62fbbfb99a8b97d5f991125">prepare</a>(async_read_state* o) { <a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;typename T::type&gt;::prepare</a>(o); }</div><div class="line"><a name="l01090"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__alias_01_4.html#aa51d99830ac3ec66b943fe10efeb7851"> 1090</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__alias_01_4.html#aa51d99830ac3ec66b943fe10efeb7851">accum</a>(<span class="keywordtype">int</span> s, async_read_state* o, T* x) { <span class="keywordflow">return</span> <a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;typename T::type&gt;::accum</a>(s, o, &amp;x-&gt;value); }</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  };</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;<span class="comment">/*****************************</span></div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;<span class="comment"> * END serialization by type / type-family</span></div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;<span class="comment"> *****************************/</span></div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;<span class="comment">// convert C++ compile-time types to hobbes type descriptions</span></div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> F&gt;</div><div class="line"><a name="l01099"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1RPCTyDef.html"> 1099</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1RPCTyDef.html">RPCTyDef</a> {</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  };</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> R, <span class="keyword">typename</span> ... <a class="code" href="namespacehobbes.html#a518e2a32060cee1a76919efbbe5cf152">Args</a>&gt;</div><div class="line"><a name="l01102"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1RPCTyDef_3_01R_07Args_8_8_8_08_4.html"> 1102</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1RPCTyDef.html">RPCTyDef</a>&lt;R(<a class="code" href="namespacehobbes.html#a518e2a32060cee1a76919efbbe5cf152">Args</a>...)&gt; {</div><div class="line"><a name="l01103"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1RPCTyDef_3_01R_07Args_8_8_8_08_4.html#abb7be41d3ea53f23dbf9875540d606ee"> 1103</a></span>&#160;    <span class="keyword">static</span> bytes <a class="code" href="structhobbes_1_1net_1_1RPCTyDef_3_01R_07Args_8_8_8_08_4.html#abb7be41d3ea53f23dbf9875540d606ee">inputType</a>()  { bytes <a class="code" href="namespacehobbes_1_1storage.html#ae00b5d0111f6bf16fd14988156c3c631">r</a>; <a class="code" href="structhobbes_1_1net_1_1io.html">io</a>&lt;<a class="code" href="namespacehobbes.html#a68b38e08ad5ec9c6999e801f53e7dda9">std::tuple</a>&lt;<a class="code" href="namespacehobbes.html#a518e2a32060cee1a76919efbbe5cf152">Args</a>...&gt;&gt;<a class="code" href="namespacehobbes.html#a735a44e6ab40e01f4bdbd98ee4ded4d4">::encode</a>(&amp;r); <span class="keywordflow">return</span> <a class="code" href="namespacehobbes_1_1storage.html#ae00b5d0111f6bf16fd14988156c3c631">r</a>; }</div><div class="line"><a name="l01104"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1RPCTyDef_3_01R_07Args_8_8_8_08_4.html#a0d6bb2fe3dd4640f42ed6fae83b9c3b2"> 1104</a></span>&#160;    <span class="keyword">static</span> bytes <a class="code" href="structhobbes_1_1net_1_1RPCTyDef_3_01R_07Args_8_8_8_08_4.html#a0d6bb2fe3dd4640f42ed6fae83b9c3b2">outputType</a>() { bytes <a class="code" href="namespacehobbes_1_1storage.html#ae00b5d0111f6bf16fd14988156c3c631">r</a>; <a class="code" href="namespacehobbes.html#a735a44e6ab40e01f4bdbd98ee4ded4d4">io&lt;R&gt;::encode</a>(&amp;r); <span class="keywordflow">return</span> <a class="code" href="namespacehobbes_1_1storage.html#ae00b5d0111f6bf16fd14988156c3c631">r</a>; }</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  };</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> ... <a class="code" href="namespacehobbes.html#a518e2a32060cee1a76919efbbe5cf152">Args</a>&gt;</div><div class="line"><a name="l01107"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1RPCTyDef_3_01void_07Args_8_8_8_08_4.html"> 1107</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1RPCTyDef.html">RPCTyDef</a>&lt;void(<a class="code" href="namespacehobbes.html#a518e2a32060cee1a76919efbbe5cf152">Args</a>...)&gt; {</div><div class="line"><a name="l01108"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1RPCTyDef_3_01void_07Args_8_8_8_08_4.html#a814f60da15d457de0fef418a1d3532f9"> 1108</a></span>&#160;    <span class="keyword">static</span> bytes <a class="code" href="structhobbes_1_1net_1_1RPCTyDef_3_01void_07Args_8_8_8_08_4.html#a814f60da15d457de0fef418a1d3532f9">inputType</a>()  { bytes <a class="code" href="namespacehobbes_1_1storage.html#ae00b5d0111f6bf16fd14988156c3c631">r</a>; <a class="code" href="structhobbes_1_1net_1_1io.html">io</a>&lt;<a class="code" href="namespacehobbes.html#a68b38e08ad5ec9c6999e801f53e7dda9">std::tuple</a>&lt;<a class="code" href="namespacehobbes.html#a518e2a32060cee1a76919efbbe5cf152">Args</a>...&gt;&gt;<a class="code" href="namespacehobbes.html#a735a44e6ab40e01f4bdbd98ee4ded4d4">::encode</a>(&amp;r); <span class="keywordflow">return</span> <a class="code" href="namespacehobbes_1_1storage.html#ae00b5d0111f6bf16fd14988156c3c631">r</a>; }</div><div class="line"><a name="l01109"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1RPCTyDef_3_01void_07Args_8_8_8_08_4.html#a1544a1f1dd6f23e96ae5defa0efae906"> 1109</a></span>&#160;    <span class="keyword">static</span> bytes <a class="code" href="structhobbes_1_1net_1_1RPCTyDef_3_01void_07Args_8_8_8_08_4.html#a1544a1f1dd6f23e96ae5defa0efae906">outputType</a>() { bytes <a class="code" href="namespacehobbes_1_1storage.html#ae00b5d0111f6bf16fd14988156c3c631">r</a>; <a class="code" href="namespacehobbes_1_1net.html#ab251aabc451fcd00548ec9e3adf98ded">encode_primty</a>(<span class="stringliteral">&quot;unit&quot;</span>, &amp;r); <span class="keywordflow">return</span> <a class="code" href="namespacehobbes_1_1storage.html#ae00b5d0111f6bf16fd14988156c3c631">r</a>; }</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  };</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;<span class="comment">// synchronous request/reply</span></div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> F&gt;</div><div class="line"><a name="l01114"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1RPCFunc.html"> 1114</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1RPCFunc.html">RPCFunc</a> {</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;  };</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> R, <span class="keyword">typename</span> ... <a class="code" href="namespacehobbes.html#a518e2a32060cee1a76919efbbe5cf152">Args</a>&gt;</div><div class="line"><a name="l01117"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1RPCFunc_3_01R_07Args_8_8_8_08_4.html"> 1117</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1RPCFunc.html">RPCFunc</a>&lt;R(<a class="code" href="namespacehobbes.html#a518e2a32060cee1a76919efbbe5cf152">Args</a>...)&gt; {</div><div class="line"><a name="l01118"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1RPCFunc_3_01R_07Args_8_8_8_08_4.html#a544c5dd07cc5c4b571448039c435a674"> 1118</a></span>&#160;    <a class="code" href="structhobbes_1_1net_1_1RPCFunc_3_01R_07Args_8_8_8_08_4.html#a544c5dd07cc5c4b571448039c435a674">RPCFunc</a>(<span class="keywordtype">int</span>* socket, uint32_t <a class="code" href="namespacehobbes.html#aa0eb7665c2a202048fe90c04d3319486">exprid</a>) : socket(socket), exprid(exprid) { }</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;</div><div class="line"><a name="l01120"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1RPCFunc_3_01R_07Args_8_8_8_08_4.html#a8e4cb2ff51433bf47a34e3cda983fef3"> 1120</a></span>&#160;    R <a class="code" href="structhobbes_1_1net_1_1RPCFunc_3_01R_07Args_8_8_8_08_4.html#a8e4cb2ff51433bf47a34e3cda983fef3">operator()</a>(<span class="keyword">const</span> <a class="code" href="namespacehobbes.html#a518e2a32060cee1a76919efbbe5cf152">Args</a>&amp;... args) {</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;      <span class="keywordtype">int</span> s = *this-&gt;socket;</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;      <a class="code" href="namespacehi.html#ade6eb55847b8c6cc62f9d82356f398fe">io&lt;uint8_t&gt;::write</a>(s, <a class="code" href="net_8H.html#a83d71ecea2dd83b294854ffc107b845b">HNET_CMD_INVOKE</a>);</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;      <a class="code" href="namespacehi.html#ade6eb55847b8c6cc62f9d82356f398fe">io&lt;uint32_t&gt;::write</a>(s, this-&gt;<a class="code" href="namespacehobbes.html#aa0eb7665c2a202048fe90c04d3319486">exprid</a>);</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;      <a class="code" href="structhobbes_1_1net_1_1oSeq.html#af9137b49b91f99367c695158e7d0e0fb">oSeq&lt;Args...&gt;::write</a>(s, args...);</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;      R <a class="code" href="namespacehobbes.html#aee08ce488a4342b3cc2e2cb513297ec8">result</a>;</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;      <a class="code" href="namespacehog.html#a69806acabf162cbe9803ada209348f96">io&lt;R&gt;::read</a>(s, &amp;result);</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacehobbes.html#aee08ce488a4342b3cc2e2cb513297ec8">result</a>;</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    }</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l01132"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1RPCFunc_3_01R_07Args_8_8_8_08_4.html#a5e029e80dc66f19bb96ae38596356195"> 1132</a></span>&#160;    <span class="keywordtype">int</span>*     <a class="code" href="structhobbes_1_1net_1_1RPCFunc_3_01R_07Args_8_8_8_08_4.html#a5e029e80dc66f19bb96ae38596356195">socket</a>;</div><div class="line"><a name="l01133"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1RPCFunc_3_01R_07Args_8_8_8_08_4.html#abc4a69c403a8e3cde151061d7535a99b"> 1133</a></span>&#160;    uint32_t <a class="code" href="structhobbes_1_1net_1_1RPCFunc_3_01R_07Args_8_8_8_08_4.html#abc4a69c403a8e3cde151061d7535a99b">exprid</a>;</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;  };</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> ... <a class="code" href="namespacehobbes.html#a518e2a32060cee1a76919efbbe5cf152">Args</a>&gt;</div><div class="line"><a name="l01136"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1RPCFunc_3_01void_07Args_8_8_8_08_4.html"> 1136</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1RPCFunc.html">RPCFunc</a>&lt;void(<a class="code" href="namespacehobbes.html#a518e2a32060cee1a76919efbbe5cf152">Args</a>...)&gt; {</div><div class="line"><a name="l01137"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1RPCFunc_3_01void_07Args_8_8_8_08_4.html#a510b962cf13c471840ea26899a4dc532"> 1137</a></span>&#160;    <a class="code" href="structhobbes_1_1net_1_1RPCFunc_3_01void_07Args_8_8_8_08_4.html#a510b962cf13c471840ea26899a4dc532">RPCFunc</a>(<span class="keywordtype">int</span>* socket, uint32_t <a class="code" href="namespacehobbes.html#aa0eb7665c2a202048fe90c04d3319486">exprid</a>) : socket(socket), exprid(exprid) { }</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;</div><div class="line"><a name="l01139"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1RPCFunc_3_01void_07Args_8_8_8_08_4.html#a2c3b3bca16783e7ce91a404a0eb3d932"> 1139</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1RPCFunc_3_01void_07Args_8_8_8_08_4.html#a2c3b3bca16783e7ce91a404a0eb3d932">operator()</a>(<span class="keyword">const</span> <a class="code" href="namespacehobbes.html#a518e2a32060cee1a76919efbbe5cf152">Args</a>&amp;... args) {</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;      <span class="keywordtype">int</span> s = *this-&gt;socket;</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;      <a class="code" href="namespacehi.html#ade6eb55847b8c6cc62f9d82356f398fe">io&lt;uint8_t&gt;::write</a>(s, <a class="code" href="net_8H.html#a83d71ecea2dd83b294854ffc107b845b">HNET_CMD_INVOKE</a>);</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;      <a class="code" href="namespacehi.html#ade6eb55847b8c6cc62f9d82356f398fe">io&lt;uint32_t&gt;::write</a>(s, this-&gt;<a class="code" href="namespacehobbes.html#aa0eb7665c2a202048fe90c04d3319486">exprid</a>);</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;      <a class="code" href="structhobbes_1_1net_1_1oSeq.html#af9137b49b91f99367c695158e7d0e0fb">oSeq&lt;Args...&gt;::write</a>(s, args...);</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    }</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l01147"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1RPCFunc_3_01void_07Args_8_8_8_08_4.html#add079739e18905930606be25abf84575"> 1147</a></span>&#160;    <span class="keywordtype">int</span>*     <a class="code" href="structhobbes_1_1net_1_1RPCFunc_3_01void_07Args_8_8_8_08_4.html#add079739e18905930606be25abf84575">socket</a>;</div><div class="line"><a name="l01148"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1RPCFunc_3_01void_07Args_8_8_8_08_4.html#ad6f850e50889c687924b529f7841ce57"> 1148</a></span>&#160;    uint32_t <a class="code" href="structhobbes_1_1net_1_1RPCFunc_3_01void_07Args_8_8_8_08_4.html#ad6f850e50889c687924b529f7841ce57">exprid</a>;</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;  };</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;</div><div class="line"><a name="l01151"></a><span class="lineno"><a class="line" href="net_8H.html#a7d4896710b175376932bbc1729bd58fc"> 1151</a></span>&#160;<span class="preprocessor">#define _HNET_CLIENT_MAKE_EXPRID(n, _, __) , exprID_##n</span></div><div class="line"><a name="l01152"></a><span class="lineno"><a class="line" href="net_8H.html#ab344500c4ede9d8cbf61d78732c6708e"> 1152</a></span>&#160;<span class="preprocessor">#define _HNET_CLIENT_MAKE_RPCDEF(n, t, e) result.push_back(::hobbes::net::RPCDef((uint32_t)exprID_##n, e, ::hobbes::net::RPCTyDef&lt;t&gt;::inputType(), ::hobbes::net::RPCTyDef&lt;t&gt;::outputType()));</span></div><div class="line"><a name="l01153"></a><span class="lineno"><a class="line" href="net_8H.html#a586853958c8e2ff69d8e62435fac4d34"> 1153</a></span>&#160;<span class="preprocessor">#define _HNET_CLIENT_INIT_RPCFUNC(n, t, _) , n(&amp;this-&gt;s, (uint32_t)exprID_##n)</span></div><div class="line"><a name="l01154"></a><span class="lineno"><a class="line" href="net_8H.html#a77aff98b42974273cee34d59f0d7eec0"> 1154</a></span>&#160;<span class="preprocessor">#define _HNET_CLIENT_MAKE_RPCFUNC(n, t, _) ::hobbes::net::RPCFunc&lt;t&gt; n;</span></div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;</div><div class="line"><a name="l01156"></a><span class="lineno"><a class="line" href="net_8H.html#a1186b11309de57f09ea1911f773c2d1d"> 1156</a></span>&#160;<span class="preprocessor">#define DEFINE_NET_CLIENT(T, C...) \</span></div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;<span class="preprocessor">  class T { \</span></div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;<span class="preprocessor">  private: \</span></div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;<span class="preprocessor">    int s; \</span></div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;<span class="preprocessor">  public: \</span></div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;<span class="preprocessor">    T(int fd) : s(::hobbes::net::initSession(fd, makeRPCDefs())) _HNET_MAP(_HNET_CLIENT_INIT_RPCFUNC, C) { } \</span></div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;<span class="preprocessor">    T(const std::string&amp; host, size_t port) : T(::hobbes::net::makeConnection(host, port)) { } \</span></div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;<span class="preprocessor">    T(const std::string&amp; host, const std::string&amp; port) : T(::hobbes::net::makeConnection(host, port)) { } \</span></div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;<span class="preprocessor">    T(const std::string&amp; hostport) : T(::hobbes::net::makeConnection(hostport)) { } \</span></div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;<span class="preprocessor">    virtual ~T() { closeC(); } \</span></div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;<span class="preprocessor">    int fd() const { return this-&gt;s; } \</span></div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;<span class="preprocessor">    void reconnect(int fd) { closeC(); this-&gt;s = ::hobbes::net::initSession(fd, makeRPCDefs()); } \</span></div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;<span class="preprocessor">    void reconnect(const std::string&amp; host, size_t port) { reconnect(::hobbes::net::makeConnection(host, port)); } \</span></div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;<span class="preprocessor">    void reconnect(const std::string&amp; host, const std::string&amp; port) { reconnect(::hobbes::net::makeConnection(host, port)); } \</span></div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;<span class="preprocessor">    void reconnect(const std::string&amp; hostport) { reconnect(::hobbes::net::makeConnection(hostport)); } \</span></div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;<span class="preprocessor">    \</span></div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;<span class="preprocessor">    _HNET_MAP(_HNET_CLIENT_MAKE_RPCFUNC, C) \</span></div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;<span class="preprocessor">  private: \</span></div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;<span class="preprocessor">    enum ExprIDs { \</span></div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;<span class="preprocessor">      NullExpr = 0 \</span></div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;<span class="preprocessor">      _HNET_MAP(_HNET_CLIENT_MAKE_EXPRID, C) \</span></div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;<span class="preprocessor">    }; \</span></div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;<span class="preprocessor">    static ::hobbes::net::RPCDefs makeRPCDefs() { \</span></div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;<span class="preprocessor">      ::hobbes::net::RPCDefs result; \</span></div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;<span class="preprocessor">      _HNET_MAP(_HNET_CLIENT_MAKE_RPCDEF, C) \</span></div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;<span class="preprocessor">      return result; \</span></div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;<span class="preprocessor">    } \</span></div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;<span class="preprocessor">    void closeC() { \</span></div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;<span class="preprocessor">      ::close(this-&gt;s); \</span></div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;<span class="preprocessor">    } \</span></div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;<span class="preprocessor">  };</span></div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;<span class="comment">// asynchronous request/reply</span></div><div class="line"><a name="l01189"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1AsyncReader.html"> 1189</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1AsyncReader.html">AsyncReader</a>    { <span class="keyword">virtual</span> <span class="keywordtype">bool</span> readAndFinish() = 0; };</div><div class="line"><a name="l01190"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1AsyncScheduler.html"> 1190</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1AsyncScheduler.html">AsyncScheduler</a> { <span class="keyword">virtual</span> <span class="keywordtype">void</span> enqueue(<a class="code" href="structhobbes_1_1net_1_1AsyncReader.html">AsyncReader</a>*) = 0; };</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> F&gt;</div><div class="line"><a name="l01193"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1AsyncRPCFunc.html"> 1193</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1AsyncRPCFunc.html">AsyncRPCFunc</a> {</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;  };</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> R, <span class="keyword">typename</span> ... <a class="code" href="namespacehobbes.html#a518e2a32060cee1a76919efbbe5cf152">Args</a>&gt;</div><div class="line"><a name="l01196"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4.html"> 1196</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1AsyncRPCFunc.html">AsyncRPCFunc</a>&lt;R(<a class="code" href="namespacehobbes.html#a518e2a32060cee1a76919efbbe5cf152">Args</a>...)&gt; : <span class="keyword">public</span> <a class="code" href="structhobbes_1_1net_1_1AsyncReader.html">AsyncReader</a> {</div><div class="line"><a name="l01197"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4.html#a06b7f8bf1fb8c2157db6b6e38040e033"> 1197</a></span>&#160;    <span class="keyword">typedef</span> std::function&lt;void(const R&amp;)&gt; <a class="code" href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4.html#a06b7f8bf1fb8c2157db6b6e38040e033">K</a>;</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;</div><div class="line"><a name="l01199"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4.html#a2f320109d3c42c02d33889c3293eeb83"> 1199</a></span>&#160;    <a class="code" href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4.html#a2f320109d3c42c02d33889c3293eeb83">AsyncRPCFunc</a>(<a class="code" href="structhobbes_1_1net_1_1AsyncScheduler.html">AsyncScheduler</a>* sched, <span class="keywordtype">int</span>* socket, uint32_t <a class="code" href="namespacehobbes.html#aa0eb7665c2a202048fe90c04d3319486">exprid</a>) :</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;      sched(sched), socket(socket), exprid(exprid)</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    {</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;      <a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;R&gt;::prepare</a>(&amp;this-&gt;pr);</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    }</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;</div><div class="line"><a name="l01205"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4.html#aaee409ecaeebd87dcadb5432a7677bf5"> 1205</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4.html#aaee409ecaeebd87dcadb5432a7677bf5">operator()</a>(<span class="keyword">const</span> <a class="code" href="namespacehobbes.html#a518e2a32060cee1a76919efbbe5cf152">Args</a>&amp;... args, <span class="keyword">const</span> K&amp; k) {</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;      <span class="keywordtype">int</span> s = *this-&gt;socket;</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;      <span class="comment">// block to write input</span></div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;      <a class="code" href="namespacehobbes_1_1net.html#ab2a3ad953d5ebdf1e38db1522ae63b96">setBlockingBit</a>(s, <span class="keyword">true</span>);</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;      <a class="code" href="namespacehi.html#ade6eb55847b8c6cc62f9d82356f398fe">io&lt;uint8_t&gt;::write</a>(s, <a class="code" href="net_8H.html#a83d71ecea2dd83b294854ffc107b845b">HNET_CMD_INVOKE</a>);</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;      <a class="code" href="namespacehi.html#ade6eb55847b8c6cc62f9d82356f398fe">io&lt;uint32_t&gt;::write</a>(s, this-&gt;<a class="code" href="namespacehobbes.html#aa0eb7665c2a202048fe90c04d3319486">exprid</a>);</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;      <a class="code" href="structhobbes_1_1net_1_1oSeq.html#af9137b49b91f99367c695158e7d0e0fb">oSeq&lt;Args...&gt;::write</a>(s, args...);</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;      <span class="comment">// don&#39;t block to read output</span></div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;      <a class="code" href="namespacehobbes_1_1net.html#ab2a3ad953d5ebdf1e38db1522ae63b96">setBlockingBit</a>(s, <span class="keyword">false</span>);</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;      this-&gt;ks.push(k);</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;      this-&gt;sched-&gt;enqueue(<span class="keyword">this</span>);</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    }</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;</div><div class="line"><a name="l01220"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4.html#ae726e16c9b60530a86cef2ecc49f987d"> 1220</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4.html#ae726e16c9b60530a86cef2ecc49f987d">readAndFinish</a>() {</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;R&gt;::accum</a>(*this-&gt;socket, &amp;this-&gt;pr, &amp;this-&gt;<a class="code" href="namespacehobbes_1_1storage.html#ae00b5d0111f6bf16fd14988156c3c631">r</a>)) {</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;        this-&gt;ks.front()(this-&gt;<a class="code" href="namespacehobbes_1_1storage.html#ae00b5d0111f6bf16fd14988156c3c631">r</a>);</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;        this-&gt;ks.pop();</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;        this-&gt;<a class="code" href="namespacehobbes_1_1storage.html#ae00b5d0111f6bf16fd14988156c3c631">r</a> = R();</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;        <a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;R&gt;::prepare</a>(&amp;this-&gt;pr);</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;      }</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    }</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l01232"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4.html#a504b82d4056e48a2167ac6523e644a93"> 1232</a></span>&#160;    <a class="code" href="structhobbes_1_1net_1_1AsyncScheduler.html">AsyncScheduler</a>* <a class="code" href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4.html#a504b82d4056e48a2167ac6523e644a93">sched</a>;</div><div class="line"><a name="l01233"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4.html#a5d54323818bc1ed2285dc0f689d086c8"> 1233</a></span>&#160;    <span class="keywordtype">int</span>*            <a class="code" href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4.html#a5d54323818bc1ed2285dc0f689d086c8">socket</a>;</div><div class="line"><a name="l01234"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4.html#a515ed970d429d7944aee5d130d1d7854"> 1234</a></span>&#160;    uint32_t        <a class="code" href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4.html#a515ed970d429d7944aee5d130d1d7854">exprid</a>;</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;</div><div class="line"><a name="l01236"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4.html#a1d0ebc91b18e786ae41c7b5ac1866506"> 1236</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structhobbes_1_1net_1_1io.html">io&lt;R&gt;::async_read_state</a> <a class="code" href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4.html#a1d0ebc91b18e786ae41c7b5ac1866506">async_read_state</a>;</div><div class="line"><a name="l01237"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4.html#a5767209a61f68871fccd6bb908a0b48b"> 1237</a></span>&#160;    <span class="keyword">typedef</span> std::queue&lt;K&gt; <a class="code" href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4.html#a5767209a61f68871fccd6bb908a0b48b">KS</a>;</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;</div><div class="line"><a name="l01239"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4.html#a13fa1d64402f3ecc46edd6c7691b8ada"> 1239</a></span>&#160;    KS               <a class="code" href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4.html#a13fa1d64402f3ecc46edd6c7691b8ada">ks</a>;</div><div class="line"><a name="l01240"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4.html#ae173d19986a251a9a2e39e26372128f7"> 1240</a></span>&#160;    R                <a class="code" href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4.html#ae173d19986a251a9a2e39e26372128f7">r</a>;</div><div class="line"><a name="l01241"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4.html#ae70d2db79e05c42b1db671dedf8e94b0"> 1241</a></span>&#160;    async_read_state <a class="code" href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4.html#ae70d2db79e05c42b1db671dedf8e94b0">pr</a>;</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;  };</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> ... <a class="code" href="namespacehobbes.html#a518e2a32060cee1a76919efbbe5cf152">Args</a>&gt;</div><div class="line"><a name="l01244"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01void_07Args_8_8_8_08_4.html"> 1244</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structhobbes_1_1net_1_1AsyncRPCFunc.html">AsyncRPCFunc</a>&lt;void(<a class="code" href="namespacehobbes.html#a518e2a32060cee1a76919efbbe5cf152">Args</a>...)&gt; {</div><div class="line"><a name="l01245"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01void_07Args_8_8_8_08_4.html#a7cb04e23ad3e277296ba5e37315e0931"> 1245</a></span>&#160;    <a class="code" href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01void_07Args_8_8_8_08_4.html#a7cb04e23ad3e277296ba5e37315e0931">AsyncRPCFunc</a>(<a class="code" href="structhobbes_1_1net_1_1AsyncScheduler.html">AsyncScheduler</a>*, <span class="keywordtype">int</span>* socket, uint32_t <a class="code" href="namespacehobbes.html#aa0eb7665c2a202048fe90c04d3319486">exprid</a>) : socket(socket), exprid(exprid) { }</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;</div><div class="line"><a name="l01247"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01void_07Args_8_8_8_08_4.html#a329f96c544029c0c9d6f32ad271d9bd8"> 1247</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01void_07Args_8_8_8_08_4.html#a329f96c544029c0c9d6f32ad271d9bd8">operator()</a>(<span class="keyword">const</span> <a class="code" href="namespacehobbes.html#a518e2a32060cee1a76919efbbe5cf152">Args</a>&amp;... args) {</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;      <span class="keywordtype">int</span> s = *this-&gt;socket;</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;      <span class="comment">// block to write input</span></div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;      <a class="code" href="namespacehobbes_1_1net.html#ab2a3ad953d5ebdf1e38db1522ae63b96">setBlockingBit</a>(s, <span class="keyword">true</span>);</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;      <a class="code" href="namespacehi.html#ade6eb55847b8c6cc62f9d82356f398fe">io&lt;uint8_t&gt;::write</a>(s, <a class="code" href="net_8H.html#a83d71ecea2dd83b294854ffc107b845b">HNET_CMD_INVOKE</a>);</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;      <a class="code" href="namespacehi.html#ade6eb55847b8c6cc62f9d82356f398fe">io&lt;uint32_t&gt;::write</a>(s, this-&gt;<a class="code" href="namespacehobbes.html#aa0eb7665c2a202048fe90c04d3319486">exprid</a>);</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;      <a class="code" href="structhobbes_1_1net_1_1oSeq.html#af9137b49b91f99367c695158e7d0e0fb">oSeq&lt;Args...&gt;::write</a>(s, args...);</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;      <span class="comment">// don&#39;t block to read output</span></div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;      <a class="code" href="namespacehobbes_1_1net.html#ab2a3ad953d5ebdf1e38db1522ae63b96">setBlockingBit</a>(s, <span class="keyword">false</span>);</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    }</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l01260"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01void_07Args_8_8_8_08_4.html#a04188a818884a894f41d184ac706feab"> 1260</a></span>&#160;    <span class="keywordtype">int</span>*     <a class="code" href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01void_07Args_8_8_8_08_4.html#a04188a818884a894f41d184ac706feab">socket</a>;</div><div class="line"><a name="l01261"></a><span class="lineno"><a class="line" href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01void_07Args_8_8_8_08_4.html#a3cc45b363b6011f8a045e3e5a1748769"> 1261</a></span>&#160;    uint32_t <a class="code" href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01void_07Args_8_8_8_08_4.html#a3cc45b363b6011f8a045e3e5a1748769">exprid</a>;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  };</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;</div><div class="line"><a name="l01264"></a><span class="lineno"><a class="line" href="net_8H.html#a3abdf820e1de5e6de32596ef31362711"> 1264</a></span>&#160;<span class="preprocessor">#define _HNET_CLIENT_INIT_ASYNC_RPCFUNC(n, t, _) , n(this, &amp;this-&gt;s, (uint32_t)exprID_##n)</span></div><div class="line"><a name="l01265"></a><span class="lineno"><a class="line" href="net_8H.html#a389824ddec85e48f8da32aafdc9b6f50"> 1265</a></span>&#160;<span class="preprocessor">#define _HNET_CLIENT_MAKE_ASYNC_RPCFUNC(n, t, _) ::hobbes::net::AsyncRPCFunc&lt;t&gt; n;</span></div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;</div><div class="line"><a name="l01267"></a><span class="lineno"><a class="line" href="net_8H.html#a45dc879aa13f8825f800741bd7ac225c"> 1267</a></span>&#160;<span class="preprocessor">#define DEFINE_ASYNC_NET_CLIENT(T, C...) \</span></div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;<span class="preprocessor">  class T : public ::hobbes::net::AsyncScheduler { \</span></div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;<span class="preprocessor">  private: \</span></div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;<span class="preprocessor">    int s; \</span></div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;<span class="preprocessor">  public: \</span></div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;<span class="preprocessor">    T(int fd) : s(::hobbes::net::initSession(fd, makeRPCDefs())) _HNET_MAP(_HNET_CLIENT_INIT_ASYNC_RPCFUNC, C) { } \</span></div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;<span class="preprocessor">    T(const std::string&amp; host, size_t port) : T(::hobbes::net::makeConnection(host, port)) { } \</span></div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;<span class="preprocessor">    T(const std::string&amp; host, const std::string&amp; port) : T(::hobbes::net::makeConnection(host, port)) { } \</span></div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;<span class="preprocessor">    T(const std::string&amp; hostport) : T(::hobbes::net::makeConnection(hostport)) { } \</span></div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;<span class="preprocessor">    virtual ~T() { closeC(); } \</span></div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;<span class="preprocessor">    int fd() const { return this-&gt;s; } \</span></div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;<span class="preprocessor">    void reconnect(int fd) { closeC(); this-&gt;s = ::hobbes::net::initSession(fd, makeRPCDefs()); } \</span></div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;<span class="preprocessor">    void reconnect(const std::string&amp; host, size_t port) { reconnect(::hobbes::net::makeConnection(host, port)); } \</span></div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;<span class="preprocessor">    void reconnect(const std::string&amp; host, const std::string&amp; port) { reconnect(::hobbes::net::makeConnection(host, port)); } \</span></div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;<span class="preprocessor">    void reconnect(const std::string&amp; hostport) { reconnect(::hobbes::net::makeConnection(hostport)); } \</span></div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;<span class="preprocessor">    void step() { while (this-&gt;asyncReaders.size() &gt; 0 &amp;&amp; this-&gt;asyncReaders.front()-&gt;readAndFinish()) { this-&gt;asyncReaders.pop(); } } \</span></div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;<span class="preprocessor">    size_t pendingRequests() const { return this-&gt;asyncReaders.size(); } \</span></div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;<span class="preprocessor">    \</span></div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;<span class="preprocessor">    _HNET_MAP(_HNET_CLIENT_MAKE_ASYNC_RPCFUNC, C) \</span></div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;<span class="preprocessor">  private: \</span></div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;<span class="preprocessor">    enum ExprIDs { \</span></div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;<span class="preprocessor">      NullExpr = 0 \</span></div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;<span class="preprocessor">      _HNET_MAP(_HNET_CLIENT_MAKE_EXPRID, C) \</span></div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;<span class="preprocessor">    }; \</span></div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;<span class="preprocessor">    static ::hobbes::net::RPCDefs makeRPCDefs() { \</span></div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;<span class="preprocessor">      ::hobbes::net::RPCDefs result; \</span></div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;<span class="preprocessor">      _HNET_MAP(_HNET_CLIENT_MAKE_RPCDEF, C) \</span></div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;<span class="preprocessor">      return result; \</span></div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;<span class="preprocessor">    } \</span></div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;<span class="preprocessor">    std::queue&lt;::hobbes::net::AsyncReader*&gt; asyncReaders; \</span></div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;<span class="preprocessor">    void enqueue(::hobbes::net::AsyncReader* r) { this-&gt;asyncReaders.push(r); } \</span></div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;<span class="preprocessor">    void closeC() { \</span></div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;<span class="preprocessor">      ::close(this-&gt;s); \</span></div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;<span class="preprocessor">      this-&gt;asyncReaders = std::queue&lt;::hobbes::net::AsyncReader*&gt;(); \</span></div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;<span class="preprocessor">    } \</span></div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;<span class="preprocessor">  };</span></div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;}}</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;</div><div class="ttc" id="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__variant_01_4_html_a2aacf585fab237533f818db18d817c0a"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__variant_01_4.html#a2aacf585fab237533f818db18d817c0a">hobbes::net::io&lt; T, typename T::is_hnet_variant &gt;::encode</a></div><div class="ttdeci">static void encode(bytes *out)</div><div class="ttdef"><b>Definition:</b> net.H:587</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_4_1_1type_01_4_html_a052f631799e3ada935f3c2ebdeab62c4"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_4_1_1type_01_4.html#a052f631799e3ada935f3c2ebdeab62c4">hobbes::net::io&lt; std::vector&lt; T &gt;, typename cannot_memcpy&lt; T &gt;::type &gt;::accum</a></div><div class="ttdeci">static bool accum(int s, async_read_state *o, std::vector&lt; T &gt; *x)</div><div class="ttdef"><b>Definition:</b> net.H:730</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_4_1_1type_01_4_html_a9c49c7ca72cd2b299356301654c5419c"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_4_1_1type_01_4.html#a9c49c7ca72cd2b299356301654c5419c">hobbes::net::io&lt; std::vector&lt; T &gt;, typename cannot_memcpy&lt; T &gt;::type &gt;::prepare</a></div><div class="ttdeci">static void prepare(async_read_state *o)</div><div class="ttdef"><b>Definition:</b> net.H:725</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4_1_1async__read__state_html_a117ce8aa109322d9e9e26c3c3e33b69d"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4_1_1async__read__state.html#a117ce8aa109322d9e9e26c3c3e33b69d">hobbes::net::io&lt; std::vector&lt; T &gt;, typename io&lt; T &gt;::can_memcpy &gt;::async_read_state::byteLen</a></div><div class="ttdeci">size_t byteLen</div><div class="ttdef"><b>Definition:</b> net.H:670</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1RPCTyDef_3_01void_07Args_8_8_8_08_4_html_a1544a1f1dd6f23e96ae5defa0efae906"><div class="ttname"><a href="structhobbes_1_1net_1_1RPCTyDef_3_01void_07Args_8_8_8_08_4.html#a1544a1f1dd6f23e96ae5defa0efae906">hobbes::net::RPCTyDef&lt; void(Args...)&gt;::outputType</a></div><div class="ttdeci">static bytes outputType()</div><div class="ttdef"><b>Definition:</b> net.H:1109</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1aioTupleRead_html"><div class="ttname"><a href="structhobbes_1_1net_1_1aioTupleRead.html">hobbes::net::aioTupleRead</a></div><div class="ttdef"><b>Definition:</b> net.H:1018</div></div>
<div class="ttc" id="net_8H_html_a9a8e86d83dbcc67c9af615f3d75a7e3d"><div class="ttname"><a href="net_8H.html#a9a8e86d83dbcc67c9af615f3d75a7e3d">_HNET_TYCTOR_ARR</a></div><div class="ttdeci">#define _HNET_TYCTOR_ARR</div><div class="ttdef"><b>Definition:</b> net.H:275</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1cannot__memcpy_html_aff735b5bc814d1121e62fb46b2c0dfd4"><div class="ttname"><a href="structhobbes_1_1net_1_1cannot__memcpy.html#aff735b5bc814d1121e62fb46b2c0dfd4">hobbes::net::cannot_memcpy::type</a></div><div class="ttdeci">void type</div><div class="ttdef"><b>Definition:</b> net.H:335</div></div>
<div class="ttc" id="namespacehi_html_ade6eb55847b8c6cc62f9d82356f398fe"><div class="ttname"><a href="namespacehi.html#ade6eb55847b8c6cc62f9d82356f398fe">hi::write</a></div><div class="ttdeci">void write(int fd, const char *s)</div><div class="ttdef"><b>Definition:</b> www.C:23</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1RPCDef_html_af6757e32d450d33a78b6d5a5bfa81ea9"><div class="ttname"><a href="structhobbes_1_1net_1_1RPCDef.html#af6757e32d450d33a78b6d5a5bfa81ea9">hobbes::net::RPCDef::willGet</a></div><div class="ttdeci">bytes willGet</div><div class="ttdef"><b>Definition:</b> net.H:126</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4_html_ae173d19986a251a9a2e39e26372128f7"><div class="ttname"><a href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4.html#ae173d19986a251a9a2e39e26372128f7">hobbes::net::AsyncRPCFunc&lt; R(Args...)&gt;::r</a></div><div class="ttdeci">R r</div><div class="ttdef"><b>Definition:</b> net.H:1240</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4_1_1async__read__state_html_ac868c88a7b97259907587ef679d61c85"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4_1_1async__read__state.html#ac868c88a7b97259907587ef679d61c85">hobbes::net::io&lt; std::string &gt;::async_read_state::byteLen</a></div><div class="ttdeci">size_t byteLen</div><div class="ttdef"><b>Definition:</b> net.H:839</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_1_1async__read__state_html_a3edddc2e36350bd5eacb29959b7420a1"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_1_1async__read__state.html#a3edddc2e36350bd5eacb29959b7420a1">hobbes::net::io&lt; std::map&lt; K, T &gt; &gt;::async_read_state::lenS</a></div><div class="ttdeci">LenS lenS</div><div class="ttdef"><b>Definition:</b> net.H:780</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1aioTupleStateAt_3_01i_00_01std_1_1pair_3_01U_00_01V_01_4_01_4_html_a8982bb811369f8fd9f09595e8a7b7377"><div class="ttname"><a href="structhobbes_1_1net_1_1aioTupleStateAt_3_01i_00_01std_1_1pair_3_01U_00_01V_01_4_01_4.html#a8982bb811369f8fd9f09595e8a7b7377">hobbes::net::aioTupleStateAt&lt; i, std::pair&lt; U, V &gt; &gt;::type</a></div><div class="ttdeci">aioTupleStateAt&lt; i-1, V &gt;::type type</div><div class="ttdef"><b>Definition:</b> net.H:1013</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1aioTupleState_3_01T_00_01Ts_8_8_8_01_4_html_a37363ebc4c98ea51e9c26b9b0fdd5a19"><div class="ttname"><a href="structhobbes_1_1net_1_1aioTupleState_3_01T_00_01Ts_8_8_8_01_4.html#a37363ebc4c98ea51e9c26b9b0fdd5a19">hobbes::net::aioTupleState&lt; T, Ts... &gt;::SndRS</a></div><div class="ttdeci">aioTupleState&lt; Ts... &gt;::async_read_state SndRS</div><div class="ttdef"><b>Definition:</b> net.H:996</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__enum_01_4_html_a8c4dc2c71b0e814001f3bc33f7b4aba1"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__enum_01_4.html#a8c4dc2c71b0e814001f3bc33f7b4aba1">hobbes::net::io&lt; T, typename T::is_hnet_enum &gt;::write</a></div><div class="ttdeci">static void write(int s, const T &amp;x)</div><div class="ttdef"><b>Definition:</b> net.H:405</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4_1_1async__read__state_html_ab2d0b64da4e5095eb69701719bd9008b"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4_1_1async__read__state.html#ab2d0b64da4e5095eb69701719bd9008b">hobbes::net::io&lt; std::pair&lt; U, V &gt; &gt;::async_read_state::Vstate</a></div><div class="ttdeci">io&lt; V &gt;::async_read_state Vstate</div><div class="ttdef"><b>Definition:</b> net.H:628</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_html_a9380c21af1f613c8412aafb3eda56a9e"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4.html#a9380c21af1f613c8412aafb3eda56a9e">hobbes::net::io&lt; std::map&lt; K, T &gt; &gt;::LenS</a></div><div class="ttdeci">io&lt; size_t &gt;::async_read_state LenS</div><div class="ttdef"><b>Definition:</b> net.H:773</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4_html_ad8d618bed1dae1106f825d892fa19713"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4.html#ad8d618bed1dae1106f825d892fa19713">hobbes::net::io&lt; std::string &gt;::write</a></div><div class="ttdeci">static void write(int s, const std::string &amp;x)</div><div class="ttdef"><b>Definition:</b> net.H:829</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4_html_af666b76c08641f84a72ce100b370b9bb"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4.html#af666b76c08641f84a72ce100b370b9bb">hobbes::net::io&lt; std::vector&lt; T &gt;, typename io&lt; T &gt;::can_memcpy &gt;::prepare</a></div><div class="ttdeci">static void prepare(async_read_state *o)</div><div class="ttdef"><b>Definition:</b> net.H:673</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4_html_ae09ec82649d8165b8ebdff31ec77147f"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4.html#ae09ec82649d8165b8ebdff31ec77147f">hobbes::net::io&lt; std::vector&lt; T &gt;, typename io&lt; T &gt;::can_memcpy &gt;::encode</a></div><div class="ttdeci">static void encode(bytes *out)</div><div class="ttdef"><b>Definition:</b> net.H:658</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1tuple_3_01Ts_8_8_8_01_4_01_4_html_ae5935ec69c589625d4aa66b9f2efbd00"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1tuple_3_01Ts_8_8_8_01_4_01_4.html#ae5935ec69c589625d4aa66b9f2efbd00">hobbes::net::io&lt; std::tuple&lt; Ts... &gt; &gt;::describe</a></div><div class="ttdeci">static std::string describe()</div><div class="ttdef"><b>Definition:</b> net.H:1045</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_html_a4ce0df27d0bc4f737561da94f190753d"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4.html#a4ce0df27d0bc4f737561da94f190753d">hobbes::net::io&lt; std::map&lt; K, T &gt; &gt;::prepare</a></div><div class="ttdeci">static void prepare(async_read_state *o)</div><div class="ttdef"><b>Definition:</b> net.H:787</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4_1_1async__read__state_html_a75eef2af9ff03d07023410b6bce9ee4f"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4_1_1async__read__state.html#a75eef2af9ff03d07023410b6bce9ee4f">hobbes::net::io&lt; std::pair&lt; U, V &gt; &gt;::async_read_state::Ustate</a></div><div class="ttdeci">io&lt; U &gt;::async_read_state Ustate</div><div class="ttdef"><b>Definition:</b> net.H:627</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_1_1async__read__state_html_a28f2765ea12d2836397b4d625e5d4e59"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_1_1async__read__state.html#a28f2765ea12d2836397b4d625e5d4e59">hobbes::net::io&lt; std::map&lt; K, T &gt; &gt;::async_read_state::len</a></div><div class="ttdeci">size_t len</div><div class="ttdef"><b>Definition:</b> net.H:781</div></div>
<div class="ttc" id="namespacehobbes_1_1net_html_a4737710e8e08cb62497625e5eb6b3461"><div class="ttname"><a href="namespacehobbes_1_1net.html#a4737710e8e08cb62497625e5eb6b3461">hobbes::net::RPCDefs</a></div><div class="ttdeci">std::vector&lt; RPCDef &gt; RPCDefs</div><div class="ttdef"><b>Definition:</b> net.H:128</div></div>
<div class="ttc" id="namespacehobbes_1_1net_html_a237ffac2d20d3f18d8c50934a93e6cf7"><div class="ttname"><a href="namespacehobbes_1_1net.html#a237ffac2d20d3f18d8c50934a93e6cf7">hobbes::net::recvData</a></div><div class="ttdeci">void recvData(int socket, uint8_t *d, size_t sz)</div><div class="ttdef"><b>Definition:</b> net.H:70</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1AsyncRPCFunc_html"><div class="ttname"><a href="structhobbes_1_1net_1_1AsyncRPCFunc.html">hobbes::net::AsyncRPCFunc</a></div><div class="ttdef"><b>Definition:</b> net.H:1193</div></div>
<div class="ttc" id="namespacehobbes_html_a735a44e6ab40e01f4bdbd98ee4ded4d4"><div class="ttname"><a href="namespacehobbes.html#a735a44e6ab40e01f4bdbd98ee4ded4d4">hobbes::encode</a></div><div class="ttdeci">void encode(const PrimitivePtr &amp;, std::ostream &amp;)</div><div class="ttdef"><b>Definition:</b> expr.C:1674</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__alias_01_4_html_a03b653b7ce1ba8fefc442d2d9971a3be"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__alias_01_4.html#a03b653b7ce1ba8fefc442d2d9971a3be">hobbes::net::io&lt; T, typename T::is_hnet_alias &gt;::encode</a></div><div class="ttdeci">static void encode(bytes *out)</div><div class="ttdef"><b>Definition:</b> net.H:1083</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__struct_01_4_html_a128a437089bcffe6f6b94ff216ffffa6"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__struct_01_4.html#a128a437089bcffe6f6b94ff216ffffa6">hobbes::net::io&lt; T, typename T::is_hnet_struct &gt;::encode</a></div><div class="ttdeci">static void encode(bytes *out)</div><div class="ttdef"><b>Definition:</b> net.H:931</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__enum_01_4_html_aa4cf6530d62680e272b2877781c78161"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__enum_01_4.html#aa4cf6530d62680e272b2877781c78161">hobbes::net::io&lt; T, typename T::is_hnet_enum &gt;::encode</a></div><div class="ttdeci">static void encode(bytes *out)</div><div class="ttdef"><b>Definition:</b> net.H:402</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1oSeq_html_aba6cc1c8961c39e93b2b2736b75d65bb"><div class="ttname"><a href="structhobbes_1_1net_1_1oSeq.html#aba6cc1c8961c39e93b2b2736b75d65bb">hobbes::net::oSeq::encode</a></div><div class="ttdeci">static void encode(size_t, bytes *)</div><div class="ttdef"><b>Definition:</b> net.H:945</div></div>
<div class="ttc" id="namespacehog_html_a69806acabf162cbe9803ada209348f96"><div class="ttname"><a href="namespacehog.html#a69806acabf162cbe9803ada209348f96">hog::read</a></div><div class="ttdeci">void read(gzbuffer *in, uint8_t *b, size_t n)</div><div class="ttdef"><b>Definition:</b> batchrecv.C:86</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4_1_1async__read__state_html_af15b27f46b05780bcf23046617afda86"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4_1_1async__read__state.html#af15b27f46b05780bcf23046617afda86">hobbes::net::io&lt; std::string &gt;::async_read_state::bytesRead</a></div><div class="ttdeci">size_t bytesRead</div><div class="ttdef"><b>Definition:</b> net.H:838</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1oSeq_3_01T_00_01Ts_8_8_8_01_4_html_a0537294e8a98b2a99c886b9603d1f4ee"><div class="ttname"><a href="structhobbes_1_1net_1_1oSeq_3_01T_00_01Ts_8_8_8_01_4.html#a0537294e8a98b2a99c886b9603d1f4ee">hobbes::net::oSeq&lt; T, Ts... &gt;::write</a></div><div class="ttdeci">static void write(int socket, const T &amp;x, const Ts &amp;... xs)</div><div class="ttdef"><b>Definition:</b> net.H:965</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4_1_1async__read__state_html_a860e0a307b836e4fb770acafc145370d"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4_1_1async__read__state.html#a860e0a307b836e4fb770acafc145370d">hobbes::net::io&lt; std::string &gt;::async_read_state::readLen</a></div><div class="ttdeci">bool readLen</div><div class="ttdef"><b>Definition:</b> net.H:836</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__enum_01_4_html_a34ab1f49d73381a3c313bdcb5376c8f9"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__enum_01_4.html#a34ab1f49d73381a3c313bdcb5376c8f9">hobbes::net::io&lt; T, typename T::is_hnet_enum &gt;::size</a></div><div class="ttdeci">static size_t size(const T &amp;)</div><div class="ttdef"><b>Definition:</b> net.H:404</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1RPCFunc_3_01void_07Args_8_8_8_08_4_html_add079739e18905930606be25abf84575"><div class="ttname"><a href="structhobbes_1_1net_1_1RPCFunc_3_01void_07Args_8_8_8_08_4.html#add079739e18905930606be25abf84575">hobbes::net::RPCFunc&lt; void(Args...)&gt;::socket</a></div><div class="ttdeci">int * socket</div><div class="ttdef"><b>Definition:</b> net.H:1147</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1aioTupleState_html_ade6ea5b42a7895dd75c095f88dc47536"><div class="ttname"><a href="structhobbes_1_1net_1_1aioTupleState.html#ade6ea5b42a7895dd75c095f88dc47536">hobbes::net::aioTupleState::async_read_state</a></div><div class="ttdeci">std::tuple async_read_state</div><div class="ttdef"><b>Definition:</b> net.H:990</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1ioTuple_html_a994065b5ccd1795a909c570c7ec28e52"><div class="ttname"><a href="structhobbes_1_1net_1_1ioTuple.html#a994065b5ccd1795a909c570c7ec28e52">hobbes::net::ioTuple::read</a></div><div class="ttdeci">static void read(int s, std::tuple&lt; Ts... &gt; *t)</div><div class="ttdef"><b>Definition:</b> net.H:977</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4_1_1async__read__state_html_a24b50c29116c8217ff3d5384bd336d0e"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4_1_1async__read__state.html#a24b50c29116c8217ff3d5384bd336d0e">hobbes::net::io&lt; std::vector&lt; T &gt;, typename io&lt; T &gt;::can_memcpy &gt;::async_read_state::readLen</a></div><div class="ttdeci">bool readLen</div><div class="ttdef"><b>Definition:</b> net.H:667</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4_html_afc0616294b23a8c8666934492b12a32f"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4.html#afc0616294b23a8c8666934492b12a32f">hobbes::net::io&lt; std::string &gt;::encode</a></div><div class="ttdeci">static void encode(bytes *out)</div><div class="ttdef"><b>Definition:</b> net.H:827</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__enum_01_4_html_a6b3706258a7f64a5c885d4af68816981"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__enum_01_4.html#a6b3706258a7f64a5c885d4af68816981">hobbes::net::io&lt; T, typename T::is_hnet_enum &gt;::can_memcpy</a></div><div class="ttdeci">void can_memcpy</div><div class="ttdef"><b>Definition:</b> net.H:401</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1RPCTyDef_html"><div class="ttname"><a href="structhobbes_1_1net_1_1RPCTyDef.html">hobbes::net::RPCTyDef</a></div><div class="ttdef"><b>Definition:</b> net.H:1099</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1RPCFunc_3_01R_07Args_8_8_8_08_4_html_abc4a69c403a8e3cde151061d7535a99b"><div class="ttname"><a href="structhobbes_1_1net_1_1RPCFunc_3_01R_07Args_8_8_8_08_4.html#abc4a69c403a8e3cde151061d7535a99b">hobbes::net::RPCFunc&lt; R(Args...)&gt;::exprid</a></div><div class="ttdeci">uint32_t exprid</div><div class="ttdef"><b>Definition:</b> net.H:1133</div></div>
<div class="ttc" id="namespacehobbes_1_1net_html_a70ce255cbdc9f854fe86150856cbf5da"><div class="ttname"><a href="namespacehobbes_1_1net.html#a70ce255cbdc9f854fe86150856cbf5da">hobbes::net::bytes</a></div><div class="ttdeci">std::vector&lt; uint8_t &gt; bytes</div><div class="ttdef"><b>Definition:</b> net.H:41</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01unit_01_4_html_acf395211bdcdba51225b629ab58aab1b"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01unit_01_4.html#acf395211bdcdba51225b629ab58aab1b">hobbes::net::io&lt; unit &gt;::encode</a></div><div class="ttdeci">static void encode(bytes *out)</div><div class="ttdef"><b>Definition:</b> net.H:346</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1ioTuple_3_01e_00_01e_00_01Ts_8_8_8_01_4_html_aa7feee727e4c5c389a97c5376256698f"><div class="ttname"><a href="structhobbes_1_1net_1_1ioTuple_3_01e_00_01e_00_01Ts_8_8_8_01_4.html#aa7feee727e4c5c389a97c5376256698f">hobbes::net::ioTuple&lt; e, e, Ts... &gt;::write</a></div><div class="ttdeci">static void write(int s, const std::tuple&lt; Ts... &gt; &amp;)</div><div class="ttdef"><b>Definition:</b> net.H:984</div></div>
<div class="ttc" id="namespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div><div class="ttdef"><b>Definition:</b> pattern.H:281</div></div>
<div class="ttc" id="namespacehobbes_1_1str_html_ae0eccb44dca0257fa0e76fb9db052df4"><div class="ttname"><a href="namespacehobbes_1_1str.html#ae0eccb44dca0257fa0e76fb9db052df4">hobbes::str::pair</a></div><div class="ttdeci">std::pair&lt; std::string, std::string &gt; pair</div><div class="ttdef"><b>Definition:</b> str.H:220</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__struct_01_4_html_a6aba6e950295c860a4d264c510b01f54"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__struct_01_4.html#a6aba6e950295c860a4d264c510b01f54">hobbes::net::io&lt; T, typename T::is_hnet_struct &gt;::accum</a></div><div class="ttdeci">static bool accum(int s, async_read_state *o, T *x)</div><div class="ttdef"><b>Definition:</b> net.H:938</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1RPCTyDef_3_01R_07Args_8_8_8_08_4_html_abb7be41d3ea53f23dbf9875540d606ee"><div class="ttname"><a href="structhobbes_1_1net_1_1RPCTyDef_3_01R_07Args_8_8_8_08_4.html#abb7be41d3ea53f23dbf9875540d606ee">hobbes::net::RPCTyDef&lt; R(Args...)&gt;::inputType</a></div><div class="ttdeci">static bytes inputType()</div><div class="ttdef"><b>Definition:</b> net.H:1103</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1RPCDef_html_a79ed3d9a8bc408214f42ec64500ec82e"><div class="ttname"><a href="structhobbes_1_1net_1_1RPCDef.html#a79ed3d9a8bc408214f42ec64500ec82e">hobbes::net::RPCDef::expr</a></div><div class="ttdeci">std::string expr</div><div class="ttdef"><b>Definition:</b> net.H:124</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1AsyncRPCFunc_3_01void_07Args_8_8_8_08_4_html_a04188a818884a894f41d184ac706feab"><div class="ttname"><a href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01void_07Args_8_8_8_08_4.html#a04188a818884a894f41d184ac706feab">hobbes::net::AsyncRPCFunc&lt; void(Args...)&gt;::socket</a></div><div class="ttdeci">int * socket</div><div class="ttdef"><b>Definition:</b> net.H:1260</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1RPCFunc_3_01R_07Args_8_8_8_08_4_html_a8e4cb2ff51433bf47a34e3cda983fef3"><div class="ttname"><a href="structhobbes_1_1net_1_1RPCFunc_3_01R_07Args_8_8_8_08_4.html#a8e4cb2ff51433bf47a34e3cda983fef3">hobbes::net::RPCFunc&lt; R(Args...)&gt;::operator()</a></div><div class="ttdeci">R operator()(const Args &amp;... args)</div><div class="ttdef"><b>Definition:</b> net.H:1120</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4_1_1async__read__state_html_a515d8015057651abd7aa53473e8b2098"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4_1_1async__read__state.html#a515d8015057651abd7aa53473e8b2098">hobbes::net::io&lt; std::vector&lt; T &gt;, typename io&lt; T &gt;::can_memcpy &gt;::async_read_state::bytesRead</a></div><div class="ttdeci">size_t bytesRead</div><div class="ttdef"><b>Definition:</b> net.H:669</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__variant_01_4_html_aa596461d484320e33f1f507774b45e27"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__variant_01_4.html#aa596461d484320e33f1f507774b45e27">hobbes::net::io&lt; T, typename T::is_hnet_variant &gt;::write</a></div><div class="ttdeci">static void write(int s, const T &amp;x)</div><div class="ttdef"><b>Definition:</b> net.H:589</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__alias_01_4_html_ae706de0837da48744b44cd241fe25017"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__alias_01_4.html#ae706de0837da48744b44cd241fe25017">hobbes::net::io&lt; T, typename T::is_hnet_alias &gt;::write</a></div><div class="ttdeci">static void write(int s, const T &amp;x)</div><div class="ttdef"><b>Definition:</b> net.H:1085</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4_html_aa30421d16e259f38c110447fe6748a61"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4.html#aa30421d16e259f38c110447fe6748a61">hobbes::net::io&lt; std::string &gt;::describe</a></div><div class="ttdeci">static std::string describe()</div><div class="ttdef"><b>Definition:</b> net.H:828</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4_html_aaee409ecaeebd87dcadb5432a7677bf5"><div class="ttname"><a href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4.html#aaee409ecaeebd87dcadb5432a7677bf5">hobbes::net::AsyncRPCFunc&lt; R(Args...)&gt;::operator()</a></div><div class="ttdeci">void operator()(const Args &amp;... args, const K &amp;k)</div><div class="ttdef"><b>Definition:</b> net.H:1205</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__enum_01_4_html_aff36bb6bf0a4c4313bfad7f7aef9d8e6"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__enum_01_4.html#aff36bb6bf0a4c4313bfad7f7aef9d8e6">hobbes::net::io&lt; T, typename T::is_hnet_enum &gt;::read</a></div><div class="ttdeci">static void read(int s, T *x)</div><div class="ttdef"><b>Definition:</b> net.H:406</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4_html_a504b82d4056e48a2167ac6523e644a93"><div class="ttname"><a href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4.html#a504b82d4056e48a2167ac6523e644a93">hobbes::net::AsyncRPCFunc&lt; R(Args...)&gt;::sched</a></div><div class="ttdeci">AsyncScheduler * sched</div><div class="ttdef"><b>Definition:</b> net.H:1232</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__variant_01_4_html_a510c75fd84d0f3d851ea999a8b024d7b"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__variant_01_4.html#a510c75fd84d0f3d851ea999a8b024d7b">hobbes::net::io&lt; T, typename T::is_hnet_variant &gt;::accum</a></div><div class="ttdeci">static bool accum(int s, async_read_state *o, T *x)</div><div class="ttdef"><b>Definition:</b> net.H:595</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1aioTupleState_html_a9e174f9b35adfcd50425cee0ed74e8a4"><div class="ttname"><a href="structhobbes_1_1net_1_1aioTupleState.html#a9e174f9b35adfcd50425cee0ed74e8a4">hobbes::net::aioTupleState::prepare</a></div><div class="ttdeci">static void prepare(async_read_state *)</div><div class="ttdef"><b>Definition:</b> net.H:991</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4_html_ac03c74a9098720db0342cd2aab7e0141"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4.html#ac03c74a9098720db0342cd2aab7e0141">hobbes::net::io&lt; std::pair&lt; U, V &gt; &gt;::accum</a></div><div class="ttdeci">static bool accum(int s, async_read_state *o, std::pair&lt; U, V &gt; *x)</div><div class="ttdef"><b>Definition:</b> net.H:641</div></div>
<div class="ttc" id="namespacehobbes_html"><div class="ttname"><a href="namespacehobbes.html">hobbes</a></div><div class="ttdef"><b>Definition:</b> boot.H:7</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_413907d7a41fd8b8d9d4586d80544e951_html_a8748ac8c3903327b19702acbdd683393"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_413907d7a41fd8b8d9d4586d80544e951.html#a8748ac8c3903327b19702acbdd683393">hobbes::net::io&lt; std::vector&lt; T &gt;, typename cannot_memcpy&lt; T &gt;::type &gt;::async_read_state::readLen</a></div><div class="ttdeci">bool readLen</div><div class="ttdef"><b>Definition:</b> net.H:719</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1RPCDef_html_a7d57f0cb9b4a749f2e2a220b3855beb4"><div class="ttname"><a href="structhobbes_1_1net_1_1RPCDef.html#a7d57f0cb9b4a749f2e2a220b3855beb4">hobbes::net::RPCDef::id</a></div><div class="ttdeci">uint32_t id</div><div class="ttdef"><b>Definition:</b> net.H:123</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_html_ac4b17afb071cdd7b7500456f2c523803"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4.html#ac4b17afb071cdd7b7500456f2c523803">hobbes::net::io&lt; std::map&lt; K, T &gt; &gt;::write</a></div><div class="ttdeci">static void write(int s, const std::map&lt; K, T &gt; &amp;x)</div><div class="ttdef"><b>Definition:</b> net.H:753</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_1_1async__read__state_html_ae216eeda64ed9de4edd879bf1f5aa36d"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_1_1async__read__state.html#ae216eeda64ed9de4edd879bf1f5aa36d">hobbes::net::io&lt; std::map&lt; K, T &gt; &gt;::async_read_state::k</a></div><div class="ttdeci">K k</div><div class="ttdef"><b>Definition:</b> net.H:783</div></div>
<div class="ttc" id="namespacehobbes_html_aa0eb7665c2a202048fe90c04d3319486"><div class="ttname"><a href="namespacehobbes.html#aa0eb7665c2a202048fe90c04d3319486">hobbes::exprid</a></div><div class="ttdeci">uint32_t exprid</div><div class="ttdef"><b>Definition:</b> net.H:34</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__alias_01_4_html_a44b2205bc1599a4828aedd479f0ff150"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__alias_01_4.html#a44b2205bc1599a4828aedd479f0ff150">hobbes::net::io&lt; T, typename T::is_hnet_alias &gt;::describe</a></div><div class="ttdeci">static std::string describe()</div><div class="ttdef"><b>Definition:</b> net.H:1084</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_1_1async__read__state_html_a42f0fefde7610a1be0e4322f275dbb1b"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_1_1async__read__state.html#a42f0fefde7610a1be0e4322f275dbb1b">hobbes::net::io&lt; std::map&lt; K, T &gt; &gt;::async_read_state::kS</a></div><div class="ttdeci">KS kS</div><div class="ttdef"><b>Definition:</b> net.H:782</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1RPCDef_html"><div class="ttname"><a href="structhobbes_1_1net_1_1RPCDef.html">hobbes::net::RPCDef</a></div><div class="ttdef"><b>Definition:</b> net.H:117</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4_1_1async__read__state_html_a66366e249efab10302dcbea17678e028"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4_1_1async__read__state.html#a66366e249efab10302dcbea17678e028">hobbes::net::io&lt; std::string &gt;::async_read_state::LenS</a></div><div class="ttdeci">io&lt; size_t &gt;::async_read_state LenS</div><div class="ttdef"><b>Definition:</b> net.H:834</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__variant_01_4_html_a4007871bf0964b633840f0b87f8c4d77"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__variant_01_4.html#a4007871bf0964b633840f0b87f8c4d77">hobbes::net::io&lt; T, typename T::is_hnet_variant &gt;::describe</a></div><div class="ttdeci">static std::string describe()</div><div class="ttdef"><b>Definition:</b> net.H:588</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_1_1async__read__state_html_ac4947975ddd9b98b9f5885a38ae27732"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_1_1async__read__state.html#ac4947975ddd9b98b9f5885a38ae27732">hobbes::net::io&lt; std::map&lt; K, T &gt; &gt;::async_read_state::readS</a></div><div class="ttdeci">ReadS readS</div><div class="ttdef"><b>Definition:</b> net.H:779</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1aioTupleStateAt_3_010_00_01std_1_1pair_3_01U_00_01V_01_4_01_4_html_ac97d5a7fb50d8068bdcd79b6ef91b102"><div class="ttname"><a href="structhobbes_1_1net_1_1aioTupleStateAt_3_010_00_01std_1_1pair_3_01U_00_01V_01_4_01_4.html#ac97d5a7fb50d8068bdcd79b6ef91b102">hobbes::net::aioTupleStateAt&lt; 0, std::pair&lt; U, V &gt; &gt;::type</a></div><div class="ttdeci">U type</div><div class="ttdef"><b>Definition:</b> net.H:1008</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4_html_a0f37d48a8285dbbbb4306960c8c563e9"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4.html#a0f37d48a8285dbbbb4306960c8c563e9">hobbes::net::io&lt; std::vector&lt; T &gt;, typename io&lt; T &gt;::can_memcpy &gt;::read</a></div><div class="ttdeci">static void read(int s, std::vector&lt; T &gt; *x)</div><div class="ttdef"><b>Definition:</b> net.H:661</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1tuple_3_01Ts_8_8_8_01_4_01_4_html_a8e826579a12ed7c79aaf70b7b10fe14e"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1tuple_3_01Ts_8_8_8_01_4_01_4.html#a8e826579a12ed7c79aaf70b7b10fe14e">hobbes::net::io&lt; std::tuple&lt; Ts... &gt; &gt;::write</a></div><div class="ttdeci">static void write(int s, const std::tuple&lt; Ts... &gt; &amp;t)</div><div class="ttdef"><b>Definition:</b> net.H:1049</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_4_1_1type_01_4_html_a1012cf6004e074403e40d61bc87bb887"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_4_1_1type_01_4.html#a1012cf6004e074403e40d61bc87bb887">hobbes::net::io&lt; std::vector&lt; T &gt;, typename cannot_memcpy&lt; T &gt;::type &gt;::read</a></div><div class="ttdeci">static void read(int s, std::vector&lt; T &gt; *x)</div><div class="ttdef"><b>Definition:</b> net.H:705</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4_html_a02a7f1377bd1bce311171708b44b8751"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4.html#a02a7f1377bd1bce311171708b44b8751">hobbes::net::io&lt; std::pair&lt; U, V &gt; &gt;::read</a></div><div class="ttdeci">static void read(int s, std::pair&lt; U, V &gt; *p)</div><div class="ttdef"><b>Definition:</b> net.H:620</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1aioTupleState_3_01T_00_01Ts_8_8_8_01_4_html_ac4c4d68ce12cc1eb47f442053b8e348d"><div class="ttname"><a href="structhobbes_1_1net_1_1aioTupleState_3_01T_00_01Ts_8_8_8_01_4.html#ac4c4d68ce12cc1eb47f442053b8e348d">hobbes::net::aioTupleState&lt; T, Ts... &gt;::prepare</a></div><div class="ttdeci">static void prepare(async_read_state *o)</div><div class="ttdef"><b>Definition:</b> net.H:999</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1RPCDef_html_a397b915eb570d7995e9aab1d58a999bd"><div class="ttname"><a href="structhobbes_1_1net_1_1RPCDef.html#a397b915eb570d7995e9aab1d58a999bd">hobbes::net::RPCDef::RPCDef</a></div><div class="ttdeci">RPCDef(uint32_t id=0, const std::string &amp;expr=&quot;&quot;, const bytes &amp;willPut=bytes(), const bytes &amp;willGet=bytes())</div><div class="ttdef"><b>Definition:</b> net.H:118</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1aioTupleRead_html_a48f5fc2af7df04befee70ede1f06b165"><div class="ttname"><a href="structhobbes_1_1net_1_1aioTupleRead.html#a48f5fc2af7df04befee70ede1f06b165">hobbes::net::aioTupleRead::accum</a></div><div class="ttdeci">static bool accum(int s, size_t ti, typename aioTupleState&lt; Ts... &gt;::async_read_state *o, std::tuple&lt; Ts... &gt; *x)</div><div class="ttdef"><b>Definition:</b> net.H:1019</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4_html_a06b7f8bf1fb8c2157db6b6e38040e033"><div class="ttname"><a href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4.html#a06b7f8bf1fb8c2157db6b6e38040e033">hobbes::net::AsyncRPCFunc&lt; R(Args...)&gt;::K</a></div><div class="ttdeci">std::function&lt; void(const R &amp;)&gt; K</div><div class="ttdef"><b>Definition:</b> net.H:1197</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1cannot__memcpy_html"><div class="ttname"><a href="structhobbes_1_1net_1_1cannot__memcpy.html">hobbes::net::cannot_memcpy</a></div><div class="ttdef"><b>Definition:</b> net.H:334</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4_html_ae726e16c9b60530a86cef2ecc49f987d"><div class="ttname"><a href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4.html#ae726e16c9b60530a86cef2ecc49f987d">hobbes::net::AsyncRPCFunc&lt; R(Args...)&gt;::readAndFinish</a></div><div class="ttdeci">bool readAndFinish()</div><div class="ttdef"><b>Definition:</b> net.H:1220</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_html_a471ce67d41101f0861fd41d79298f35d"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4.html#a471ce67d41101f0861fd41d79298f35d">hobbes::net::io&lt; std::map&lt; K, T &gt; &gt;::encode</a></div><div class="ttdeci">static void encode(bytes *out)</div><div class="ttdef"><b>Definition:</b> net.H:751</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_html"><div class="ttname"><a href="structhobbes_1_1net_1_1io.html">hobbes::net::io</a></div><div class="ttdef"><b>Definition:</b> net.H:268</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4_html_a515ed970d429d7944aee5d130d1d7854"><div class="ttname"><a href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4.html#a515ed970d429d7944aee5d130d1d7854">hobbes::net::AsyncRPCFunc&lt; R(Args...)&gt;::exprid</a></div><div class="ttdeci">uint32_t exprid</div><div class="ttdef"><b>Definition:</b> net.H:1234</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1RPCFunc_3_01R_07Args_8_8_8_08_4_html_a544c5dd07cc5c4b571448039c435a674"><div class="ttname"><a href="structhobbes_1_1net_1_1RPCFunc_3_01R_07Args_8_8_8_08_4.html#a544c5dd07cc5c4b571448039c435a674">hobbes::net::RPCFunc&lt; R(Args...)&gt;::RPCFunc</a></div><div class="ttdeci">RPCFunc(int *socket, uint32_t exprid)</div><div class="ttdef"><b>Definition:</b> net.H:1118</div></div>
<div class="ttc" id="namespacehobbes_1_1net_html_abcc1694520fa2502eb65f7efbab6e6e0"><div class="ttname"><a href="namespacehobbes_1_1net.html#abcc1694520fa2502eb65f7efbab6e6e0">hobbes::net::sendString</a></div><div class="ttdeci">void sendString(int socket, const std::string &amp;s)</div><div class="ttdef"><b>Definition:</b> net.H:55</div></div>
<div class="ttc" id="namespacehobbes_1_1net_html_a54111fdc38eb6ad569a64973a1c866e9"><div class="ttname"><a href="namespacehobbes_1_1net.html#a54111fdc38eb6ad569a64973a1c866e9">hobbes::net::sendData</a></div><div class="ttdeci">void sendData(int socket, const uint8_t *d, size_t sz)</div><div class="ttdef"><b>Definition:</b> net.H:44</div></div>
<div class="ttc" id="net_8H_html_af44cc134ba320bce6bdba2b14e81342e"><div class="ttname"><a href="net_8H.html#af44cc134ba320bce6bdba2b14e81342e">_HNET_TYCTOR_STRUCT</a></div><div class="ttdeci">#define _HNET_TYCTOR_STRUCT</div><div class="ttdef"><b>Definition:</b> net.H:277</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1tuple_3_01Ts_8_8_8_01_4_01_4_html_a938cf09f61ff3674d51539edbccbb424"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1tuple_3_01Ts_8_8_8_01_4_01_4.html#a938cf09f61ff3674d51539edbccbb424">hobbes::net::io&lt; std::tuple&lt; Ts... &gt; &gt;::encode</a></div><div class="ttdeci">static void encode(bytes *out)</div><div class="ttdef"><b>Definition:</b> net.H:1034</div></div>
<div class="ttc" id="namespacehobbes_html_ad8d66137d02ef2431a77f59ace8e75df"><div class="ttname"><a href="namespacehobbes.html#ad8d66137d02ef2431a77f59ace8e75df">hobbes::get</a></div><div class="ttdeci">T * get(variant&lt; Ctors... &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> variant.H:156</div></div>
<div class="ttc" id="namespacehobbes_html_a10d33eee44f86065fb908209061f8cb3"><div class="ttname"><a href="namespacehobbes.html#a10d33eee44f86065fb908209061f8cb3">hobbes::select</a></div><div class="ttdeci">T select(const std::vector&lt; T &gt; &amp;xs, I i)</div><div class="ttdef"><b>Definition:</b> array.H:92</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_html_ade03b37ae124953bf22ba30593603874"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4.html#ade03b37ae124953bf22ba30593603874">hobbes::net::io&lt; std::map&lt; K, T &gt; &gt;::KS</a></div><div class="ttdeci">io&lt; K &gt;::async_read_state KS</div><div class="ttdef"><b>Definition:</b> net.H:774</div></div>
<div class="ttc" id="namespacehobbes_1_1net_html_a434ad51614dfb1d517558a768f7b4f77"><div class="ttname"><a href="namespacehobbes_1_1net.html#a434ad51614dfb1d517558a768f7b4f77">hobbes::net::initSession</a></div><div class="ttdeci">int initSession(int s, const RPCDefs &amp;rpcds)</div><div class="ttdef"><b>Definition:</b> net.H:131</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4_html_ae00d0c3a8a6c5d48294e7134f1731355"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4.html#ae00d0c3a8a6c5d48294e7134f1731355">hobbes::net::io&lt; std::pair&lt; U, V &gt; &gt;::describe</a></div><div class="ttdeci">static std::string describe()</div><div class="ttdef"><b>Definition:</b> net.H:613</div></div>
<div class="ttc" id="namespacehobbes_1_1net_html_ab2a3ad953d5ebdf1e38db1522ae63b96"><div class="ttname"><a href="namespacehobbes_1_1net.html#ab2a3ad953d5ebdf1e38db1522ae63b96">hobbes::net::setBlockingBit</a></div><div class="ttdeci">void setBlockingBit(int socket, bool block)</div><div class="ttdef"><b>Definition:</b> net.H:95</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__alias_01_4_html_a85c7562799370b219d66decc4bcae7b8"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__alias_01_4.html#a85c7562799370b219d66decc4bcae7b8">hobbes::net::io&lt; T, typename T::is_hnet_alias &gt;::read</a></div><div class="ttdeci">static void read(int s, T *x)</div><div class="ttdef"><b>Definition:</b> net.H:1086</div></div>
<div class="ttc" id="namespacehobbes_1_1net_html_ab251aabc451fcd00548ec9e3adf98ded"><div class="ttname"><a href="namespacehobbes_1_1net.html#ab251aabc451fcd00548ec9e3adf98ded">hobbes::net::encode_primty</a></div><div class="ttdeci">void encode_primty(const char *tn, bytes *out)</div><div class="ttdef"><b>Definition:</b> net.H:299</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01const_01char_01_5_01_4_html_a19c8934e6e4587e8245d27dc7819dab0"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01const_01char_01_5_01_4.html#a19c8934e6e4587e8245d27dc7819dab0">hobbes::net::io&lt; const char * &gt;::write</a></div><div class="ttdeci">static void write(int s, const char *x)</div><div class="ttdef"><b>Definition:</b> net.H:823</div></div>
<div class="ttc" id="namespacehobbes_1_1net_html_a05034c768dd1231859bbb44a45a4306d"><div class="ttname"><a href="namespacehobbes_1_1net.html#a05034c768dd1231859bbb44a45a4306d">hobbes::net::ws</a></div><div class="ttdeci">void ws(const char *x, bytes *out)</div><div class="ttdef"><b>Definition:</b> net.H:285</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1aioTupleState_html"><div class="ttname"><a href="structhobbes_1_1net_1_1aioTupleState.html">hobbes::net::aioTupleState</a></div><div class="ttdef"><b>Definition:</b> net.H:989</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__alias_01_4_html_aa323621b9aa981c08c81764e634f186b"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__alias_01_4.html#aa323621b9aa981c08c81764e634f186b">hobbes::net::io&lt; T, typename T::is_hnet_alias &gt;::async_read_state</a></div><div class="ttdeci">io&lt; typename T::type &gt;::async_read_state async_read_state</div><div class="ttdef"><b>Definition:</b> net.H:1088</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__struct_01_4_html_a9c9f10bfa8769b47edb1697bb1733a3c"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__struct_01_4.html#a9c9f10bfa8769b47edb1697bb1733a3c">hobbes::net::io&lt; T, typename T::is_hnet_struct &gt;::async_read_state</a></div><div class="ttdeci">T::async_read_state async_read_state</div><div class="ttdef"><b>Definition:</b> net.H:936</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01const_01char_01_5_01_4_html_a615143c045682b62624c9cd30a3e31ef"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01const_01char_01_5_01_4.html#a615143c045682b62624c9cd30a3e31ef">hobbes::net::io&lt; const char * &gt;::describe</a></div><div class="ttdeci">static std::string describe()</div><div class="ttdef"><b>Definition:</b> net.H:822</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1oSeq_html"><div class="ttname"><a href="structhobbes_1_1net_1_1oSeq.html">hobbes::net::oSeq</a></div><div class="ttdef"><b>Definition:</b> net.H:943</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__struct_01_4_html_afd7cc454b9a859d187cc357114fbef81"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__struct_01_4.html#afd7cc454b9a859d187cc357114fbef81">hobbes::net::io&lt; T, typename T::is_hnet_struct &gt;::write</a></div><div class="ttdeci">static void write(int s, const T &amp;x)</div><div class="ttdef"><b>Definition:</b> net.H:933</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1RPCTyDef_3_01R_07Args_8_8_8_08_4_html_a0d6bb2fe3dd4640f42ed6fae83b9c3b2"><div class="ttname"><a href="structhobbes_1_1net_1_1RPCTyDef_3_01R_07Args_8_8_8_08_4.html#a0d6bb2fe3dd4640f42ed6fae83b9c3b2">hobbes::net::RPCTyDef&lt; R(Args...)&gt;::outputType</a></div><div class="ttdeci">static bytes outputType()</div><div class="ttdef"><b>Definition:</b> net.H:1104</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1AsyncRPCFunc_3_01void_07Args_8_8_8_08_4_html_a329f96c544029c0c9d6f32ad271d9bd8"><div class="ttname"><a href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01void_07Args_8_8_8_08_4.html#a329f96c544029c0c9d6f32ad271d9bd8">hobbes::net::AsyncRPCFunc&lt; void(Args...)&gt;::operator()</a></div><div class="ttdeci">void operator()(const Args &amp;... args)</div><div class="ttdef"><b>Definition:</b> net.H:1247</div></div>
<div class="ttc" id="namespacehobbes_html_a1fbfd18ce9403ee930596638d0ebe063"><div class="ttname"><a href="namespacehobbes.html#a1fbfd18ce9403ee930596638d0ebe063">hobbes::write</a></div><div class="ttdeci">void write(imagefile *f, const T &amp;x)</div><div class="ttdef"><b>Definition:</b> file.C:188</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1AsyncRPCFunc_3_01void_07Args_8_8_8_08_4_html_a3cc45b363b6011f8a045e3e5a1748769"><div class="ttname"><a href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01void_07Args_8_8_8_08_4.html#a3cc45b363b6011f8a045e3e5a1748769">hobbes::net::AsyncRPCFunc&lt; void(Args...)&gt;::exprid</a></div><div class="ttdeci">uint32_t exprid</div><div class="ttdef"><b>Definition:</b> net.H:1261</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4_html_a0b631dd6860dd7d416fcb364ac9a5681"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4.html#a0b631dd6860dd7d416fcb364ac9a5681">hobbes::net::io&lt; std::pair&lt; U, V &gt; &gt;::encode</a></div><div class="ttdeci">static void encode(bytes *out)</div><div class="ttdef"><b>Definition:</b> net.H:601</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4_html_a888ed9874afd48ca282989c70fbbf4fd"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4.html#a888ed9874afd48ca282989c70fbbf4fd">hobbes::net::io&lt; std::vector&lt; T &gt;, typename io&lt; T &gt;::can_memcpy &gt;::write</a></div><div class="ttdeci">static void write(int s, const std::vector&lt; T &gt; &amp;x)</div><div class="ttdef"><b>Definition:</b> net.H:660</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_html_a463dabc72f3c49d84d9dc94490c532b6"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4.html#a463dabc72f3c49d84d9dc94490c532b6">hobbes::net::io&lt; std::map&lt; K, T &gt; &gt;::read</a></div><div class="ttdeci">static void read(int s, std::map&lt; K, T &gt; *x)</div><div class="ttdef"><b>Definition:</b> net.H:761</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_html_aa00408ff4beecf924c99e59fe2a9008c"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4.html#aa00408ff4beecf924c99e59fe2a9008c">hobbes::net::io&lt; std::map&lt; K, T &gt; &gt;::accum</a></div><div class="ttdeci">static bool accum(int s, async_read_state *o, std::map&lt; K, T &gt; *x)</div><div class="ttdef"><b>Definition:</b> net.H:791</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_4_1_1type_01_4_html_ab9f3d8f327cb0b23a6f61194e617c39c"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_4_1_1type_01_4.html#ab9f3d8f327cb0b23a6f61194e617c39c">hobbes::net::io&lt; std::vector&lt; T &gt;, typename cannot_memcpy&lt; T &gt;::type &gt;::describe</a></div><div class="ttdeci">static std::string describe()</div><div class="ttdef"><b>Definition:</b> net.H:697</div></div>
<div class="ttc" id="net_8H_html_a83d71ecea2dd83b294854ffc107b845b"><div class="ttname"><a href="net_8H.html#a83d71ecea2dd83b294854ffc107b845b">HNET_CMD_INVOKE</a></div><div class="ttdeci">#define HNET_CMD_INVOKE</div><div class="ttdef"><b>Definition:</b> net.H:38</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4_html_a31704c5b3acb65f0ed2b3348913820ab"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4.html#a31704c5b3acb65f0ed2b3348913820ab">hobbes::net::io&lt; std::pair&lt; U, V &gt; &gt;::prepare</a></div><div class="ttdeci">static void prepare(async_read_state *o)</div><div class="ttdef"><b>Definition:</b> net.H:635</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4_html_ac7b17c19df84e53db07e92be512ef734"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4.html#ac7b17c19df84e53db07e92be512ef734">hobbes::net::io&lt; std::string &gt;::prepare</a></div><div class="ttdeci">static void prepare(async_read_state *o)</div><div class="ttdef"><b>Definition:</b> net.H:842</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1oSeq_html_a25a35b3030dfc3606d1bbf86bd48e44d"><div class="ttname"><a href="structhobbes_1_1net_1_1oSeq.html#a25a35b3030dfc3606d1bbf86bd48e44d">hobbes::net::oSeq::describe</a></div><div class="ttdeci">static std::string describe()</div><div class="ttdef"><b>Definition:</b> net.H:946</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1tuple_3_01Ts_8_8_8_01_4_01_4_html_a68555f7eb72082c1544c609f1b549a90"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1tuple_3_01Ts_8_8_8_01_4_01_4.html#a68555f7eb72082c1544c609f1b549a90">hobbes::net::io&lt; std::tuple&lt; Ts... &gt; &gt;::prepare</a></div><div class="ttdeci">static void prepare(async_read_state *o)</div><div class="ttdef"><b>Definition:</b> net.H:1058</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_413907d7a41fd8b8d9d4586d80544e951_html_a3e3b8493a4e2e29d017d8b439bb28ae5"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_413907d7a41fd8b8d9d4586d80544e951.html#a3e3b8493a4e2e29d017d8b439bb28ae5">hobbes::net::io&lt; std::vector&lt; T &gt;, typename cannot_memcpy&lt; T &gt;::type &gt;::async_read_state::elemS</a></div><div class="ttdeci">ElemS elemS</div><div class="ttdef"><b>Definition:</b> net.H:722</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1aioTupleRead_3_01e_00_01e_00_01Ts_8_8_8_01_4_html_a4705c2d596a22974431631777689fff4"><div class="ttname"><a href="structhobbes_1_1net_1_1aioTupleRead_3_01e_00_01e_00_01Ts_8_8_8_01_4.html#a4705c2d596a22974431631777689fff4">hobbes::net::aioTupleRead&lt; e, e, Ts... &gt;::accum</a></div><div class="ttdeci">static bool accum(int s, size_t, typename aioTupleState&lt; Ts... &gt;::async_read_state *, std::tuple&lt; Ts... &gt; *)</div><div class="ttdef"><b>Definition:</b> net.H:1029</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4_1_1async__read__state_html_a7dd4328955ed98f8f5c1cbae18486a4a"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4_1_1async__read__state.html#a7dd4328955ed98f8f5c1cbae18486a4a">hobbes::net::io&lt; std::string &gt;::async_read_state::lenS</a></div><div class="ttdeci">LenS lenS</div><div class="ttdef"><b>Definition:</b> net.H:837</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_1_1async__read__state_html_a25ad791423fc2de68128a7277b1bb7a9"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_1_1async__read__state.html#a25ad791423fc2de68128a7277b1bb7a9">hobbes::net::io&lt; std::map&lt; K, T &gt; &gt;::async_read_state::t</a></div><div class="ttdeci">T t</div><div class="ttdef"><b>Definition:</b> net.H:785</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4_1_1async__read__state_html_a5d0b73b1d71240668c89457eea0e6c64"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4_1_1async__read__state.html#a5d0b73b1d71240668c89457eea0e6c64">hobbes::net::io&lt; std::pair&lt; U, V &gt; &gt;::async_read_state::readFirst</a></div><div class="ttdeci">bool readFirst</div><div class="ttdef"><b>Definition:</b> net.H:630</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_html_a096080a33ba8b9b4861a0051a4de306a"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4.html#a096080a33ba8b9b4861a0051a4de306a">hobbes::net::io&lt; std::map&lt; K, T &gt; &gt;::TS</a></div><div class="ttdeci">io&lt; T &gt;::async_read_state TS</div><div class="ttdef"><b>Definition:</b> net.H:775</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4_html_a9f11bb70898d4187056d73987b5537e9"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4.html#a9f11bb70898d4187056d73987b5537e9">hobbes::net::io&lt; std::string &gt;::read</a></div><div class="ttdeci">static void read(int s, std::string *x)</div><div class="ttdef"><b>Definition:</b> net.H:830</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1RPCFunc_3_01void_07Args_8_8_8_08_4_html_a2c3b3bca16783e7ce91a404a0eb3d932"><div class="ttname"><a href="structhobbes_1_1net_1_1RPCFunc_3_01void_07Args_8_8_8_08_4.html#a2c3b3bca16783e7ce91a404a0eb3d932">hobbes::net::RPCFunc&lt; void(Args...)&gt;::operator()</a></div><div class="ttdeci">void operator()(const Args &amp;... args)</div><div class="ttdef"><b>Definition:</b> net.H:1139</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4_1_1async__read__state_html_a334268f3109e206ee43ddf4f9e23c096"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4_1_1async__read__state.html#a334268f3109e206ee43ddf4f9e23c096">hobbes::net::io&lt; std::vector&lt; T &gt;, typename io&lt; T &gt;::can_memcpy &gt;::async_read_state::LenS</a></div><div class="ttdeci">io&lt; size_t &gt;::async_read_state LenS</div><div class="ttdef"><b>Definition:</b> net.H:665</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_html_ae956ea2ed1fc25b079a1c8b9b237833a"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4.html#ae956ea2ed1fc25b079a1c8b9b237833a">hobbes::net::io&lt; std::map&lt; K, T &gt; &gt;::describe</a></div><div class="ttdeci">static std::string describe()</div><div class="ttdef"><b>Definition:</b> net.H:752</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__alias_01_4_html_aa51d99830ac3ec66b943fe10efeb7851"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__alias_01_4.html#aa51d99830ac3ec66b943fe10efeb7851">hobbes::net::io&lt; T, typename T::is_hnet_alias &gt;::accum</a></div><div class="ttdeci">static bool accum(int s, async_read_state *o, T *x)</div><div class="ttdef"><b>Definition:</b> net.H:1090</div></div>
<div class="ttc" id="namespacehobbes_1_1storage_html_ae00b5d0111f6bf16fd14988156c3c631"><div class="ttname"><a href="namespacehobbes_1_1storage.html#ae00b5d0111f6bf16fd14988156c3c631">hobbes::storage::r</a></div><div class="ttdeci">size_t r(const reader::MetaData &amp;md, size_t o, T *t)</div><div class="ttdef"><b>Definition:</b> storage.H:1730</div></div>
<div class="ttc" id="net_8H_html_a535bf5c6405e99b5e6e37f4dcb18fccf"><div class="ttname"><a href="net_8H.html#a535bf5c6405e99b5e6e37f4dcb18fccf">HNET_RESULT_FAIL</a></div><div class="ttdeci">#define HNET_RESULT_FAIL</div><div class="ttdef"><b>Definition:</b> net.H:39</div></div>
<div class="ttc" id="namespacehobbes_1_1net_html_a5c4c0f003879ad2770dfd6a181a2b655"><div class="ttname"><a href="namespacehobbes_1_1net.html#a5c4c0f003879ad2770dfd6a181a2b655">hobbes::net::w</a></div><div class="ttdeci">void w(const T &amp;x, bytes *out)</div><div class="ttdef"><b>Definition:</b> net.H:282</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4_html_a01bc1303e1015d017e145dc643334236"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1string_01_4.html#a01bc1303e1015d017e145dc643334236">hobbes::net::io&lt; std::string &gt;::accum</a></div><div class="ttdeci">static bool accum(int s, async_read_state *o, std::string *x)</div><div class="ttdef"><b>Definition:</b> net.H:847</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_4_1_1type_01_4_html_aa36b56b6a4491ff60b9949b7b2a981d5"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_4_1_1type_01_4.html#aa36b56b6a4491ff60b9949b7b2a981d5">hobbes::net::io&lt; std::vector&lt; T &gt;, typename cannot_memcpy&lt; T &gt;::type &gt;::write</a></div><div class="ttdeci">static void write(int s, const std::vector&lt; T &gt; &amp;x)</div><div class="ttdef"><b>Definition:</b> net.H:698</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4_html_a5d54323818bc1ed2285dc0f689d086c8"><div class="ttname"><a href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4.html#a5d54323818bc1ed2285dc0f689d086c8">hobbes::net::AsyncRPCFunc&lt; R(Args...)&gt;::socket</a></div><div class="ttdeci">int * socket</div><div class="ttdef"><b>Definition:</b> net.H:1233</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1tuple_3_01Ts_8_8_8_01_4_01_4_html_abeaca8efee38c7f034d6489df5b57fba"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1tuple_3_01Ts_8_8_8_01_4_01_4.html#abeaca8efee38c7f034d6489df5b57fba">hobbes::net::io&lt; std::tuple&lt; Ts... &gt; &gt;::accum</a></div><div class="ttdeci">static bool accum(int s, async_read_state *o, std::tuple&lt; Ts... &gt; *x)</div><div class="ttdef"><b>Definition:</b> net.H:1059</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1RPCFunc_html"><div class="ttname"><a href="structhobbes_1_1net_1_1RPCFunc.html">hobbes::net::RPCFunc</a></div><div class="ttdef"><b>Definition:</b> net.H:1114</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1RPCFunc_3_01R_07Args_8_8_8_08_4_html_a5e029e80dc66f19bb96ae38596356195"><div class="ttname"><a href="structhobbes_1_1net_1_1RPCFunc_3_01R_07Args_8_8_8_08_4.html#a5e029e80dc66f19bb96ae38596356195">hobbes::net::RPCFunc&lt; R(Args...)&gt;::socket</a></div><div class="ttdeci">int * socket</div><div class="ttdef"><b>Definition:</b> net.H:1132</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1ioTuple_3_01e_00_01e_00_01Ts_8_8_8_01_4_html_adcc32dd7c73aa75d296cdcae2099a10b"><div class="ttname"><a href="structhobbes_1_1net_1_1ioTuple_3_01e_00_01e_00_01Ts_8_8_8_01_4.html#adcc32dd7c73aa75d296cdcae2099a10b">hobbes::net::ioTuple&lt; e, e, Ts... &gt;::read</a></div><div class="ttdeci">static void read(int s, std::tuple&lt; Ts... &gt; *)</div><div class="ttdef"><b>Definition:</b> net.H:985</div></div>
<div class="ttc" id="namespacehobbes_1_1net_html_ae3a54035fb643eda7362a415a5efaaeb"><div class="ttname"><a href="namespacehobbes_1_1net.html#ae3a54035fb643eda7362a415a5efaaeb">hobbes::net::makeConnection</a></div><div class="ttdeci">int makeConnection(int s, sockaddr *saddr, size_t len)</div><div class="ttdef"><b>Definition:</b> net.H:156</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_413907d7a41fd8b8d9d4586d80544e951_html_a00bc9e7cc023001d0da37d4ac52ae5c0"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_413907d7a41fd8b8d9d4586d80544e951.html#a00bc9e7cc023001d0da37d4ac52ae5c0">hobbes::net::io&lt; std::vector&lt; T &gt;, typename cannot_memcpy&lt; T &gt;::type &gt;::async_read_state::LenS</a></div><div class="ttdeci">io&lt; size_t &gt;::async_read_state LenS</div><div class="ttdef"><b>Definition:</b> net.H:716</div></div>
<div class="ttc" id="namespacehobbes_1_1net_html_a393f1251dceafa382796c81887d1b09b"><div class="ttname"><a href="namespacehobbes_1_1net.html#a393f1251dceafa382796c81887d1b09b">hobbes::net::recvDataPartial</a></div><div class="ttdeci">size_t recvDataPartial(int socket, uint8_t *d, size_t sz)</div><div class="ttdef"><b>Definition:</b> net.H:101</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1oSeq_html_af9137b49b91f99367c695158e7d0e0fb"><div class="ttname"><a href="structhobbes_1_1net_1_1oSeq.html#af9137b49b91f99367c695158e7d0e0fb">hobbes::net::oSeq::write</a></div><div class="ttdeci">static void write(int, const Ts &amp;...)</div><div class="ttdef"><b>Definition:</b> net.H:947</div></div>
<div class="ttc" id="net_8H_html_a468c25f4e4a73f7c265e4e5637359f25"><div class="ttname"><a href="net_8H.html#a468c25f4e4a73f7c265e4e5637359f25">HNET_CMD_DEFEXPR</a></div><div class="ttdeci">#define HNET_CMD_DEFEXPR</div><div class="ttdef"><b>Definition:</b> net.H:37</div></div>
<div class="ttc" id="namespacehobbes_html_a7cac2deb09bd8ee44a942397f8d895f6"><div class="ttname"><a href="namespacehobbes.html#a7cac2deb09bd8ee44a942397f8d895f6">hobbes::fn</a></div><div class="ttdeci">ExprPtr fn(const str::seq &amp;vns, const ExprPtr &amp;b, const LexicalAnnotation &amp;la)</div><div class="ttdef"><b>Definition:</b> expr.H:837</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1aioTupleState_3_01T_00_01Ts_8_8_8_01_4_html_af86cb190bea77b4779aa20955ebbdeda"><div class="ttname"><a href="structhobbes_1_1net_1_1aioTupleState_3_01T_00_01Ts_8_8_8_01_4.html#af86cb190bea77b4779aa20955ebbdeda">hobbes::net::aioTupleState&lt; T, Ts... &gt;::async_read_state</a></div><div class="ttdeci">std::pair&lt; FstRS, SndRS &gt; async_read_state</div><div class="ttdef"><b>Definition:</b> net.H:997</div></div>
<div class="ttc" id="netio_8H_html_a9a18f415b2912f27ae28ab8225dda5d4"><div class="ttname"><a href="netio_8H.html#a9a18f415b2912f27ae28ab8225dda5d4">out</a></div><div class="ttdeci">#define out</div><div class="ttdef"><b>Definition:</b> netio.H:19</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1RPCTyDef_3_01void_07Args_8_8_8_08_4_html_a814f60da15d457de0fef418a1d3532f9"><div class="ttname"><a href="structhobbes_1_1net_1_1RPCTyDef_3_01void_07Args_8_8_8_08_4.html#a814f60da15d457de0fef418a1d3532f9">hobbes::net::RPCTyDef&lt; void(Args...)&gt;::inputType</a></div><div class="ttdeci">static bytes inputType()</div><div class="ttdef"><b>Definition:</b> net.H:1108</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1aioTupleState_3_01T_00_01Ts_8_8_8_01_4_html_a32e25ec27be892cbdbc2bc03ab52538a"><div class="ttname"><a href="structhobbes_1_1net_1_1aioTupleState_3_01T_00_01Ts_8_8_8_01_4.html#a32e25ec27be892cbdbc2bc03ab52538a">hobbes::net::aioTupleState&lt; T, Ts... &gt;::FstRS</a></div><div class="ttdeci">io&lt; T &gt;::async_read_state FstRS</div><div class="ttdef"><b>Definition:</b> net.H:995</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4_1_1async__read__state_html_a13d8ab2ee5476ccf2ff8d1d77d801399"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4_1_1async__read__state.html#a13d8ab2ee5476ccf2ff8d1d77d801399">hobbes::net::io&lt; std::pair&lt; U, V &gt; &gt;::async_read_state::sndState</a></div><div class="ttdeci">Vstate sndState</div><div class="ttdef"><b>Definition:</b> net.H:632</div></div>
<div class="ttc" id="namespacehobbes_html_aee08ce488a4342b3cc2e2cb513297ec8"><div class="ttname"><a href="namespacehobbes.html#aee08ce488a4342b3cc2e2cb513297ec8">hobbes::result</a></div><div class="ttdeci">uint32_t result</div><div class="ttdef"><b>Definition:</b> regex.C:376</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01unit_01_4_html_a47c2003e7d0d97b88aab685ad9ccbeb0"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01unit_01_4.html#a47c2003e7d0d97b88aab685ad9ccbeb0">hobbes::net::io&lt; unit &gt;::describe</a></div><div class="ttdeci">static std::string describe()</div><div class="ttdef"><b>Definition:</b> net.H:347</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__struct_01_4_html_a9c448f753bf3baf945061f510e56f9dc"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__struct_01_4.html#a9c448f753bf3baf945061f510e56f9dc">hobbes::net::io&lt; T, typename T::is_hnet_struct &gt;::prepare</a></div><div class="ttdeci">static void prepare(async_read_state *o)</div><div class="ttdef"><b>Definition:</b> net.H:937</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_413907d7a41fd8b8d9d4586d80544e951_html_a973aba081b84f7105c30d7e7853067b3"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_413907d7a41fd8b8d9d4586d80544e951.html#a973aba081b84f7105c30d7e7853067b3">hobbes::net::io&lt; std::vector&lt; T &gt;, typename cannot_memcpy&lt; T &gt;::type &gt;::async_read_state::idx</a></div><div class="ttdeci">size_t idx</div><div class="ttdef"><b>Definition:</b> net.H:721</div></div>
<div class="ttc" id="net_8H_html_a79799930e5e8b49cd493bd14e53b56c5"><div class="ttname"><a href="net_8H.html#a79799930e5e8b49cd493bd14e53b56c5">_HNET_TYCTOR_PRIM</a></div><div class="ttdeci">#define _HNET_TYCTOR_PRIM</div><div class="ttdef"><b>Definition:</b> net.H:272</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4_html_a13fa1d64402f3ecc46edd6c7691b8ada"><div class="ttname"><a href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4.html#a13fa1d64402f3ecc46edd6c7691b8ada">hobbes::net::AsyncRPCFunc&lt; R(Args...)&gt;::ks</a></div><div class="ttdeci">KS ks</div><div class="ttdef"><b>Definition:</b> net.H:1239</div></div>
<div class="ttc" id="namespacehobbes_1_1net_html_afc47641e046a4d747e0d772eb1bfea80"><div class="ttname"><a href="namespacehobbes_1_1net.html#afc47641e046a4d747e0d772eb1bfea80">hobbes::net::sendBytes</a></div><div class="ttdeci">void sendBytes(int socket, const bytes &amp;x)</div><div class="ttdef"><b>Definition:</b> net.H:61</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01unit_01_4_html_a5a1923689e0e0ec682c2927a68d03557"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01unit_01_4.html#a5a1923689e0e0ec682c2927a68d03557">hobbes::net::io&lt; unit &gt;::write</a></div><div class="ttdeci">static void write(int s, const unit &amp;)</div><div class="ttdef"><b>Definition:</b> net.H:348</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4_html_a9df9958f157dad94a1f78c80f302614d"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4.html#a9df9958f157dad94a1f78c80f302614d">hobbes::net::io&lt; std::vector&lt; T &gt;, typename io&lt; T &gt;::can_memcpy &gt;::accum</a></div><div class="ttdeci">static bool accum(int s, async_read_state *o, std::vector&lt; T &gt; *x)</div><div class="ttdef"><b>Definition:</b> net.H:678</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__enum_01_4_html_a4a3762d727ad67e6cf7d9868bdb03cc1"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__enum_01_4.html#a4a3762d727ad67e6cf7d9868bdb03cc1">hobbes::net::io&lt; T, typename T::is_hnet_enum &gt;::describe</a></div><div class="ttdeci">static std::string describe()</div><div class="ttdef"><b>Definition:</b> net.H:403</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__enum_01_4_html_aa69d953c34c36571f57ae0566022a06b"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__enum_01_4.html#aa69d953c34c36571f57ae0566022a06b">hobbes::net::io&lt; T, typename T::is_hnet_enum &gt;::async_read_state</a></div><div class="ttdeci">uint8_t async_read_state</div><div class="ttdef"><b>Definition:</b> net.H:408</div></div>
<div class="ttc" id="namespacehobbes_1_1net_html_a00d9b10c9bb695798cfc41694aacaf59"><div class="ttname"><a href="namespacehobbes_1_1net.html#a00d9b10c9bb695798cfc41694aacaf59">hobbes::net::_HNET_DEFINE_PRIMTYS</a></div><div class="ttdeci">_HNET_DEFINE_PRIMTYS(bool, &quot;bool&quot;)</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__struct_01_4_html_a09e7f5f7ed0812ac3c05fb7dc82a2beb"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__struct_01_4.html#a09e7f5f7ed0812ac3c05fb7dc82a2beb">hobbes::net::io&lt; T, typename T::is_hnet_struct &gt;::read</a></div><div class="ttdeci">static void read(int s, T *x)</div><div class="ttdef"><b>Definition:</b> net.H:934</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__variant_01_4_html_a638824ace36d3b6a2f00c8459e879f68"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__variant_01_4.html#a638824ace36d3b6a2f00c8459e879f68">hobbes::net::io&lt; T, typename T::is_hnet_variant &gt;::prepare</a></div><div class="ttdeci">static void prepare(async_read_state *o)</div><div class="ttdef"><b>Definition:</b> net.H:594</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1RPCFunc_3_01void_07Args_8_8_8_08_4_html_a510b962cf13c471840ea26899a4dc532"><div class="ttname"><a href="structhobbes_1_1net_1_1RPCFunc_3_01void_07Args_8_8_8_08_4.html#a510b962cf13c471840ea26899a4dc532">hobbes::net::RPCFunc&lt; void(Args...)&gt;::RPCFunc</a></div><div class="ttdeci">RPCFunc(int *socket, uint32_t exprid)</div><div class="ttdef"><b>Definition:</b> net.H:1137</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_4_1_1type_01_4_html_add8bf6053b0976669143c5331948c34b"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_4_1_1type_01_4.html#add8bf6053b0976669143c5331948c34b">hobbes::net::io&lt; std::vector&lt; T &gt;, typename cannot_memcpy&lt; T &gt;::type &gt;::encode</a></div><div class="ttdeci">static void encode(bytes *out)</div><div class="ttdef"><b>Definition:</b> net.H:696</div></div>
<div class="ttc" id="namespacehobbes_html_a518e2a32060cee1a76919efbbe5cf152"><div class="ttname"><a href="namespacehobbes.html#a518e2a32060cee1a76919efbbe5cf152">hobbes::Args</a></div><div class="ttdeci">std::map&lt; std::string, llvm::Value * &gt; Args</div><div class="ttdef"><b>Definition:</b> dfa.C:1276</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1unit_html_a46745ea3d27ef921dd538cafdf38a19a"><div class="ttname"><a href="structhobbes_1_1net_1_1unit.html#a46745ea3d27ef921dd538cafdf38a19a">hobbes::net::unit::unit</a></div><div class="ttdeci">unit()</div><div class="ttdef"><b>Definition:</b> net.H:342</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1AsyncRPCFunc_3_01void_07Args_8_8_8_08_4_html_a7cb04e23ad3e277296ba5e37315e0931"><div class="ttname"><a href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01void_07Args_8_8_8_08_4.html#a7cb04e23ad3e277296ba5e37315e0931">hobbes::net::AsyncRPCFunc&lt; void(Args...)&gt;::AsyncRPCFunc</a></div><div class="ttdeci">AsyncRPCFunc(AsyncScheduler *, int *socket, uint32_t exprid)</div><div class="ttdef"><b>Definition:</b> net.H:1245</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4_html_a2f320109d3c42c02d33889c3293eeb83"><div class="ttname"><a href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4.html#a2f320109d3c42c02d33889c3293eeb83">hobbes::net::AsyncRPCFunc&lt; R(Args...)&gt;::AsyncRPCFunc</a></div><div class="ttdeci">AsyncRPCFunc(AsyncScheduler *sched, int *socket, uint32_t exprid)</div><div class="ttdef"><b>Definition:</b> net.H:1199</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4_html_acf2a1777a02525549406d41a2e57479f"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4.html#acf2a1777a02525549406d41a2e57479f">hobbes::net::io&lt; std::pair&lt; U, V &gt; &gt;::write</a></div><div class="ttdeci">static void write(int s, const std::pair&lt; U, V &gt; &amp;p)</div><div class="ttdef"><b>Definition:</b> net.H:616</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1ioTuple_html_a4fff7d870a0c5bbdce83f400c9713918"><div class="ttname"><a href="structhobbes_1_1net_1_1ioTuple.html#a4fff7d870a0c5bbdce83f400c9713918">hobbes::net::ioTuple::write</a></div><div class="ttdeci">static void write(int s, const std::tuple&lt; Ts... &gt; &amp;t)</div><div class="ttdef"><b>Definition:</b> net.H:973</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_413907d7a41fd8b8d9d4586d80544e951_html_a8e968f224147fe710e0d1146e60478d4"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_413907d7a41fd8b8d9d4586d80544e951.html#a8e968f224147fe710e0d1146e60478d4">hobbes::net::io&lt; std::vector&lt; T &gt;, typename cannot_memcpy&lt; T &gt;::type &gt;::async_read_state::ElemS</a></div><div class="ttdeci">io&lt; T &gt;::async_read_state ElemS</div><div class="ttdef"><b>Definition:</b> net.H:717</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_html_a193d3959ea2befbfc0dc238f9ee36cc7"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4.html#a193d3959ea2befbfc0dc238f9ee36cc7">hobbes::net::io&lt; std::map&lt; K, T &gt; &gt;::ReadS</a></div><div class="ttdeci">ReadS</div><div class="ttdef"><b>Definition:</b> net.H:776</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4_html_a1d0ebc91b18e786ae41c7b5ac1866506"><div class="ttname"><a href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4.html#a1d0ebc91b18e786ae41c7b5ac1866506">hobbes::net::AsyncRPCFunc&lt; R(Args...)&gt;::async_read_state</a></div><div class="ttdeci">io&lt; R &gt;::async_read_state async_read_state</div><div class="ttdef"><b>Definition:</b> net.H:1236</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4_1_1async__read__state_html_aa7e459e5a82d66969da708d63a3bdff1"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4_1_1async__read__state.html#aa7e459e5a82d66969da708d63a3bdff1">hobbes::net::io&lt; std::vector&lt; T &gt;, typename io&lt; T &gt;::can_memcpy &gt;::async_read_state::lenS</a></div><div class="ttdeci">LenS lenS</div><div class="ttdef"><b>Definition:</b> net.H:668</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1oSeq_3_01T_00_01Ts_8_8_8_01_4_html_a878de603debddae5954f6963bd242a8f"><div class="ttname"><a href="structhobbes_1_1net_1_1oSeq_3_01T_00_01Ts_8_8_8_01_4.html#a878de603debddae5954f6963bd242a8f">hobbes::net::oSeq&lt; T, Ts... &gt;::describe</a></div><div class="ttdeci">static std::string describe()</div><div class="ttdef"><b>Definition:</b> net.H:962</div></div>
<div class="ttc" id="namespacehobbes_html_a68b38e08ad5ec9c6999e801f53e7dda9"><div class="ttname"><a href="namespacehobbes.html#a68b38e08ad5ec9c6999e801f53e7dda9">hobbes::tuple</a></div><div class="ttdeci">MonoTypePtr tuple(const MonoTypes &amp;mtys=MonoTypes())</div><div class="ttdef"><b>Definition:</b> type.H:1068</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1ioTuple_html"><div class="ttname"><a href="structhobbes_1_1net_1_1ioTuple.html">hobbes::net::ioTuple</a></div><div class="ttdef"><b>Definition:</b> net.H:972</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__variant_01_4_html_ae09c812158077636fc612e47543be2ae"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__variant_01_4.html#ae09c812158077636fc612e47543be2ae">hobbes::net::io&lt; T, typename T::is_hnet_variant &gt;::read</a></div><div class="ttdeci">static void read(int s, T *x)</div><div class="ttdef"><b>Definition:</b> net.H:590</div></div>
<div class="ttc" id="hexpr_8parse_8C_html_aab67351865de70c1e46d2434b16b1a07"><div class="ttname"><a href="hexpr_8parse_8C.html#aab67351865de70c1e46d2434b16b1a07">m</a></div><div class="ttdeci">LexicalAnnotation m(const YYLTYPE &amp;p)</div><div class="ttdef"><b>Definition:</b> hexpr.parse.C:127</div></div>
<div class="ttc" id="net_8H_html_ab75ff31bc99fd7682adeb34e78574fe0"><div class="ttname"><a href="net_8H.html#ab75ff31bc99fd7682adeb34e78574fe0">HNET_VERSION</a></div><div class="ttdeci">#define HNET_VERSION</div><div class="ttdef"><b>Definition:</b> net.H:36</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_413907d7a41fd8b8d9d4586d80544e951_html_a5e43e96a9e22b7cef8c1374d36129891"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01cannot__memcpy_3_01T_01_413907d7a41fd8b8d9d4586d80544e951.html#a5e43e96a9e22b7cef8c1374d36129891">hobbes::net::io&lt; std::vector&lt; T &gt;, typename cannot_memcpy&lt; T &gt;::type &gt;::async_read_state::lenS</a></div><div class="ttdeci">LenS lenS</div><div class="ttdef"><b>Definition:</b> net.H:720</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1tuple_3_01Ts_8_8_8_01_4_01_4_html_aa7c20caaa2d8665d167385a09f5b4715"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1tuple_3_01Ts_8_8_8_01_4_01_4.html#aa7c20caaa2d8665d167385a09f5b4715">hobbes::net::io&lt; std::tuple&lt; Ts... &gt; &gt;::read</a></div><div class="ttdeci">static void read(int s, std::tuple&lt; Ts... &gt; *t)</div><div class="ttdef"><b>Definition:</b> net.H:1052</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__alias_01_4_html_ab9d69faea62fbbfb99a8b97d5f991125"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__alias_01_4.html#ab9d69faea62fbbfb99a8b97d5f991125">hobbes::net::io&lt; T, typename T::is_hnet_alias &gt;::prepare</a></div><div class="ttdeci">static void prepare(async_read_state *o)</div><div class="ttdef"><b>Definition:</b> net.H:1089</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1oSeq_3_01T_00_01Ts_8_8_8_01_4_html_a5c4a96bbedc7566795993cc9222a61fe"><div class="ttname"><a href="structhobbes_1_1net_1_1oSeq_3_01T_00_01Ts_8_8_8_01_4.html#a5c4a96bbedc7566795993cc9222a61fe">hobbes::net::oSeq&lt; T, Ts... &gt;::encode</a></div><div class="ttdeci">static void encode(size_t f, bytes *out)</div><div class="ttdef"><b>Definition:</b> net.H:953</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__struct_01_4_html_a8b51f77f22068219765bb13fb89297fa"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__struct_01_4.html#a8b51f77f22068219765bb13fb89297fa">hobbes::net::io&lt; T, typename T::is_hnet_struct &gt;::describe</a></div><div class="ttdeci">static std::string describe()</div><div class="ttdef"><b>Definition:</b> net.H:932</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1AsyncReader_html"><div class="ttname"><a href="structhobbes_1_1net_1_1AsyncReader.html">hobbes::net::AsyncReader</a></div><div class="ttdef"><b>Definition:</b> net.H:1189</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01unit_01_4_html_a2140ca3b5338c101b128020ff575ca39"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01unit_01_4.html#a2140ca3b5338c101b128020ff575ca39">hobbes::net::io&lt; unit &gt;::read</a></div><div class="ttdeci">static void read(int s, unit *)</div><div class="ttdef"><b>Definition:</b> net.H:349</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4_html_a5767209a61f68871fccd6bb908a0b48b"><div class="ttname"><a href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4.html#a5767209a61f68871fccd6bb908a0b48b">hobbes::net::AsyncRPCFunc&lt; R(Args...)&gt;::KS</a></div><div class="ttdeci">std::queue&lt; K &gt; KS</div><div class="ttdef"><b>Definition:</b> net.H:1237</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4_html_af81dad7ba87aefdaabbe3cae15643860"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1vector_3_01T_01_4_00_01typename_01io_3_01T_01_4_1_1can__memcpy_01_4.html#af81dad7ba87aefdaabbe3cae15643860">hobbes::net::io&lt; std::vector&lt; T &gt;, typename io&lt; T &gt;::can_memcpy &gt;::describe</a></div><div class="ttdeci">static std::string describe()</div><div class="ttdef"><b>Definition:</b> net.H:659</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01const_01char_01_5_01_4_html_a1be8f03f87b825433ed184b35b064b4e"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01const_01char_01_5_01_4.html#a1be8f03f87b825433ed184b35b064b4e">hobbes::net::io&lt; const char * &gt;::encode</a></div><div class="ttdeci">static void encode(bytes *out)</div><div class="ttdef"><b>Definition:</b> net.H:821</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1tuple_3_01Ts_8_8_8_01_4_01_4_html_ac810847df15fe7372f18397b8e70bb2c"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1tuple_3_01Ts_8_8_8_01_4_01_4.html#ac810847df15fe7372f18397b8e70bb2c">hobbes::net::io&lt; std::tuple&lt; Ts... &gt; &gt;::async_read_state</a></div><div class="ttdeci">std::pair&lt; size_t, typename aioTupleState&lt; Ts... &gt;::async_read_state &gt; async_read_state</div><div class="ttdef"><b>Definition:</b> net.H:1057</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__enum_01_4_html_a0d26e13cb59fd5e6735311e0c12c9a9b"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__enum_01_4.html#a0d26e13cb59fd5e6735311e0c12c9a9b">hobbes::net::io&lt; T, typename T::is_hnet_enum &gt;::prepare</a></div><div class="ttdeci">static void prepare(uint8_t *o)</div><div class="ttdef"><b>Definition:</b> net.H:409</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1RPCFunc_3_01void_07Args_8_8_8_08_4_html_ad6f850e50889c687924b529f7841ce57"><div class="ttname"><a href="structhobbes_1_1net_1_1RPCFunc_3_01void_07Args_8_8_8_08_4.html#ad6f850e50889c687924b529f7841ce57">hobbes::net::RPCFunc&lt; void(Args...)&gt;::exprid</a></div><div class="ttdeci">uint32_t exprid</div><div class="ttdef"><b>Definition:</b> net.H:1148</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__enum_01_4_html_a047e62bb9b46dab42e36238cbfbd2b4a"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__enum_01_4.html#a047e62bb9b46dab42e36238cbfbd2b4a">hobbes::net::io&lt; T, typename T::is_hnet_enum &gt;::accum</a></div><div class="ttdeci">static bool accum(int s, uint8_t *o, T *x)</div><div class="ttdef"><b>Definition:</b> net.H:410</div></div>
<div class="ttc" id="namespacehobbes_html_a5ac388046025df59a27f0ec570d3094c"><div class="ttname"><a href="namespacehobbes.html#a5ac388046025df59a27f0ec570d3094c">hobbes::read</a></div><div class="ttdeci">void read(const imagefile *f, T *x)</div><div class="ttdef"><b>Definition:</b> file.C:215</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4_1_1async__read__state_html_afb298bca50f39cd6754ca3d8c6c5c1dc"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1pair_3_01U_00_01V_01_4_01_4_1_1async__read__state.html#afb298bca50f39cd6754ca3d8c6c5c1dc">hobbes::net::io&lt; std::pair&lt; U, V &gt; &gt;::async_read_state::fstState</a></div><div class="ttdeci">Ustate fstState</div><div class="ttdef"><b>Definition:</b> net.H:631</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1AsyncScheduler_html"><div class="ttname"><a href="structhobbes_1_1net_1_1AsyncScheduler.html">hobbes::net::AsyncScheduler</a></div><div class="ttdef"><b>Definition:</b> net.H:1190</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1unit_html"><div class="ttname"><a href="structhobbes_1_1net_1_1unit.html">hobbes::net::unit</a></div><div class="ttdef"><b>Definition:</b> net.H:342</div></div>
<div class="ttc" id="namespacehobbes_1_1net_html_a1537ed619fbae307bdf0439cc2a27b8b"><div class="ttname"><a href="namespacehobbes_1_1net.html#a1537ed619fbae307bdf0439cc2a27b8b">hobbes::net::recvString</a></div><div class="ttdeci">void recvString(int socket, std::string *x)</div><div class="ttdef"><b>Definition:</b> net.H:87</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__variant_01_4_html_aba5fcaa3cf54455a9c1c6b661e58a170"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01T_00_01typename_01T_1_1is__hnet__variant_01_4.html#aba5fcaa3cf54455a9c1c6b661e58a170">hobbes::net::io&lt; T, typename T::is_hnet_variant &gt;::async_read_state</a></div><div class="ttdeci">T::async_read_state async_read_state</div><div class="ttdef"><b>Definition:</b> net.H:593</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4_html_ae70d2db79e05c42b1db671dedf8e94b0"><div class="ttname"><a href="structhobbes_1_1net_1_1AsyncRPCFunc_3_01R_07Args_8_8_8_08_4.html#ae70d2db79e05c42b1db671dedf8e94b0">hobbes::net::AsyncRPCFunc&lt; R(Args...)&gt;::pr</a></div><div class="ttdeci">async_read_state pr</div><div class="ttdef"><b>Definition:</b> net.H:1241</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1aioTupleStateAt_html"><div class="ttname"><a href="structhobbes_1_1net_1_1aioTupleStateAt.html">hobbes::net::aioTupleStateAt</a></div><div class="ttdef"><b>Definition:</b> net.H:1005</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1RPCDef_html_a182c6d69698021ee61dc9ce5eb248d13"><div class="ttname"><a href="structhobbes_1_1net_1_1RPCDef.html#a182c6d69698021ee61dc9ce5eb248d13">hobbes::net::RPCDef::willPut</a></div><div class="ttdeci">bytes willPut</div><div class="ttdef"><b>Definition:</b> net.H:125</div></div>
<div class="ttc" id="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_1_1async__read__state_html_a37152369bed642d346b47fbdb4fe8544"><div class="ttname"><a href="structhobbes_1_1net_1_1io_3_01std_1_1map_3_01K_00_01T_01_4_01_4_1_1async__read__state.html#a37152369bed642d346b47fbdb4fe8544">hobbes::net::io&lt; std::map&lt; K, T &gt; &gt;::async_read_state::tS</a></div><div class="ttdeci">TS tS</div><div class="ttdef"><b>Definition:</b> net.H:784</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
